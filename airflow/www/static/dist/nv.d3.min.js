!function(){var t={dev:!1};t.tooltip=t.tooltip||{},t.utils=t.utils||{},t.models=t.models||{},t.charts={},t.logs={},t.dom={},"undefined"!=typeof module&&"undefined"!=typeof exports&&"undefined"==typeof d3&&(d3=require("d3")),t.dispatch=d3.dispatch("render_start","render_end"),Function.prototype.bind||(Function.prototype.bind=function(t){if("function"!=typeof this)throw new TypeError("Function.prototype.bind - what is trying to be bound is not callable");var e=Array.prototype.slice.call(arguments,1),n=this,r=function(){},i=function(){return n.apply(this instanceof r&&t?this:t,e.concat(Array.prototype.slice.call(arguments)))};return r.prototype=this.prototype,i.prototype=new r,i}),t.dev&&(t.dispatch.on("render_start",(function(e){t.logs.startTime=+new Date})),t.dispatch.on("render_end",(function(e){t.logs.endTime=+new Date,t.logs.totalTime=t.logs.endTime-t.logs.startTime,t.log("total",t.logs.totalTime)}))),t.log=function(){if(t.dev&&window.console&&console.log&&console.log.apply)console.log.apply(console,arguments);else if(t.dev&&window.console&&"function"==typeof console.log&&Function.prototype.bind){var e=Function.prototype.bind.call(console.log,console);e.apply(console,arguments)}return arguments[arguments.length-1]},t.deprecated=function(t,e){console&&console.warn&&console.warn("nvd3 warning: `"+t+"` has been deprecated. ",e||"")},t.render=function(e){e=e||1,t.render.active=!0,t.dispatch.render_start();var n=function(){for(var r,i,o=0;e>o&&(i=t.render.queue[o]);o++)r=i.generate(),typeof i.callback==typeof Function&&i.callback(r);t.render.queue.splice(0,o),t.render.queue.length?setTimeout(n):(t.dispatch.render_end(),t.render.active=!1)};setTimeout(n)},t.render.active=!1,t.render.queue=[],t.addGraph=function(e){typeof arguments[0]==typeof Function&&(e={generate:arguments[0],callback:arguments[1]}),t.render.queue.push(e),t.render.active||t.render()},"undefined"!=typeof module&&"undefined"!=typeof exports&&(module.exports=t),"undefined"!=typeof window&&(window.nv=t),t.dom.write=function(t){return void 0!==window.fastdom?fastdom.mutate(t):t()},t.dom.read=function(t){return void 0!==window.fastdom?fastdom.measure(t):t()},t.interactiveGuideline=function(){"use strict";function e(d){d.each((function(d){function f(){var t=d3.event.clientX-this.getBoundingClientRect().left,r=d3.event.clientY-this.getBoundingClientRect().top,i=!0,s=!1;if(c&&(t=d3.event.offsetX,r=d3.event.offsetY,"svg"!==d3.event.target.tagName&&(i=!1),d3.event.target.className.baseVal.match("nv-legend")&&(s=!0)),i&&(t-=n.left,r-=n.top),"mouseout"===d3.event.type||0>t||0>r||t>h||r>g||d3.event.relatedTarget&&void 0===d3.event.relatedTarget.ownerSVGElement||s){if(c&&d3.event.relatedTarget&&void 0===d3.event.relatedTarget.ownerSVGElement&&(void 0===d3.event.relatedTarget.className||d3.event.relatedTarget.className.match(u.nvPointerEventsClass)))return;return a.elementMouseout({mouseX:t,mouseY:r}),e.renderGuideLine(null),void u.hidden(!0)}u.hidden(!1);var l=void 0;if("function"==typeof o.rangeBands){var d=d3.bisect(o.range(),t)-1;if(!(o.range()[d]+o.rangeBand()>=t))return a.elementMouseout({mouseX:t,mouseY:r}),e.renderGuideLine(null),void u.hidden(!0);l=o.domain()[d3.bisect(o.range(),t)-1]}else l=o.invert(t);a.elementMousemove({mouseX:t,mouseY:r,pointXValue:l}),"dblclick"===d3.event.type&&a.elementDblclick({mouseX:t,mouseY:r,pointXValue:l}),"click"===d3.event.type&&a.elementClick({mouseX:t,mouseY:r,pointXValue:l}),"mousedown"===d3.event.type&&a.elementMouseDown({mouseX:t,mouseY:r,pointXValue:l}),"mouseup"===d3.event.type&&a.elementMouseUp({mouseX:t,mouseY:r,pointXValue:l})}var p=d3.select(this),h=r||960,g=i||400,v=p.selectAll("g.nv-wrap.nv-interactiveLineLayer").data([d]);v.enter().append("g").attr("class"," nv-wrap nv-interactiveLineLayer").append("g").attr("class","nv-interactiveGuideLine"),l&&(l.on("touchmove",f).on("mousemove",f,!0).on("mouseout",f,!0).on("mousedown",f,!0).on("mouseup",f,!0).on("dblclick",f).on("click",f),e.guideLine=null,e.renderGuideLine=function(n){s&&(e.guideLine&&e.guideLine.attr("x1")===n||t.dom.write((function(){var e=v.select(".nv-interactiveGuideLine").selectAll("line").data(null!=n?[t.utils.NaNtoZero(n)]:[],String);e.enter().append("line").attr("class","nv-guideline").attr("x1",(function(t){return t})).attr("x2",(function(t){return t})).attr("y1",g).attr("y2",0),e.exit().remove()})))})}))}var n={left:0,top:0},r=null,i=null,o=d3.scale.linear(),a=d3.dispatch("elementMousemove","elementMouseout","elementClick","elementDblclick","elementMouseDown","elementMouseUp"),s=!0,l=null,u=t.models.tooltip(),c=window.ActiveXObject;return u.duration(0).hideDelay(0).hidden(!1),e.dispatch=a,e.tooltip=u,e.margin=function(t){return arguments.length?(n.top=void 0!==t.top?t.top:n.top,n.left=void 0!==t.left?t.left:n.left,e):n},e.width=function(t){return arguments.length?(r=t,e):r},e.height=function(t){return arguments.length?(i=t,e):i},e.xScale=function(t){return arguments.length?(o=t,e):o},e.showGuideLine=function(t){return arguments.length?(s=t,e):s},e.svgContainer=function(t){return arguments.length?(l=t,e):l},e},t.interactiveBisect=function(t,e,n){"use strict";if(!(t instanceof Array))return null;var r;r="function"!=typeof n?function(t){return t.x}:n;var i=d3.bisector((function(t,e){return r(t)-e})).left,o=d3.max([0,i(t,e)-1]),a=r(t[o]);if(void 0===a&&(a=o),a===e)return o;var s=d3.min([o+1,t.length-1]),l=r(t[s]);return void 0===l&&(l=s),Math.abs(l-e)>=Math.abs(a-e)?o:s},t.nearestValueIndex=function(t,e,n){"use strict";var r=1/0,i=null;return t.forEach((function(t,o){var a=Math.abs(e-t);null!=t&&r>=a&&n>a&&(r=a,i=o)})),i},t.models.tooltip=function(){"use strict";function e(){return f&&k(r)?(t.dom.write((function(){c&&c.node()||((c=d3.select(document.body).select("#"+n).data([1])).enter().append("div").attr("class","nvtooltip "+(s||"xy-tooltip")).attr("id",n).style("top",0).style("left",0).style("opacity",0).style("position","fixed").selectAll("div, table, td, tr").classed(g,!0).classed(g,!0),c.exit().remove());var t=x(r,c.node());t&&(c.node().innerHTML=t),M()})),e):void 0}var n="nvtooltip-"+Math.floor(1e5*Math.random()),r=null,i="w",o=25,a=0,s=null,l=!0,u=200,c=null,d={left:null,top:null},f=!0,p=100,h=!0,g="nv-pointer-events-none",v=function(t,e,n){return t},m=function(t){return t},y=function(t,e){return t},x=function(t,e){if(null===t)return"";var n=d3.select(document.createElement("table"));h&&n.selectAll("thead").data([t]).enter().append("thead").append("tr").append("td").attr("colspan",3).append("strong").classed("x-value",!0).html(m(t.value));var r=n.selectAll("tbody").data([t]).enter().append("tbody").selectAll("tr").data((function(t){return t.series})).enter().append("tr").classed("highlight",(function(t){return t.highlight}));r.append("td").classed("legend-color-guide",!0).append("div").style("background-color",(function(t){return t.color})),r.append("td").classed("key",!0).classed("total",(function(t){return!!t.total})).html((function(t,e){return y(t.key,e)})),r.append("td").classed("value",!0).html((function(t,e){return v(t.value,e,t)})),r.filter((function(t,e){return void 0!==t.percent})).append("td").classed("percent",!0).html((function(t,e){return"("+d3.format("%")(t.percent)+")"})),r.selectAll("td").each((function(t){if(t.highlight){var e=d3.scale.linear().domain([0,1]).range(["#fff",t.color]);d3.select(this).style("border-bottom-color",e(.6)).style("border-top-color",e(.6))}}));var i=n.node().outerHTML;return void 0!==t.footer&&(i+="<div class='footer'>"+t.footer+"</div>"),i},b=function(){var t={left:null!==d3.event?d3.event.clientX:0,top:null!==d3.event?d3.event.clientY:0};if("none"!=getComputedStyle(document.body).transform){var e=document.body.getBoundingClientRect();t.left-=e.left,t.top-=e.top}return t},k=function(e){if(e&&e.series){if(t.utils.isArray(e.series))return!0;if(t.utils.isObject(e.series))return e.series=[e.series],!0}return!1},w=function(t){var e,n,r,a=c.node().offsetHeight,s=c.node().offsetWidth,l=document.documentElement.clientWidth,u=document.documentElement.clientHeight;switch(i){case"e":e=-s-o,n=-a/2,t.left+e<0&&(e=o),(r=t.top+n)<0&&(n-=r),(r=t.top+n+a)>u&&(n-=r-u);break;case"w":e=o,n=-a/2,t.left+e+s>l&&(e=-s-o),(r=t.top+n)<0&&(n-=r),(r=t.top+n+a)>u&&(n-=r-u);break;case"n":e=-s/2-5,n=o,t.top+n+a>u&&(n=-a-o),(r=t.left+e)<0&&(e-=r),(r=t.left+e+s)>l&&(e-=r-l);break;case"s":e=-s/2,n=-a-o,t.top+n<0&&(n=o),(r=t.left+e)<0&&(e-=r),(r=t.left+e+s)>l&&(e-=r-l);break;case"center":e=-s/2,n=-a/2;break;default:e=0,n=0}return{left:e,top:n}},M=function(){t.dom.read((function(){var t=b(),e=w(t),n=t.left+e.left,r=t.top+e.top;if(l)c.interrupt().transition().delay(u).duration(0).style("opacity",0);else{var i="translate("+d.left+"px, "+d.top+"px)",o="translate("+Math.round(n)+"px, "+Math.round(r)+"px)",a=d3.interpolateString(i,o),s=c.style("opacity")<.1;c.interrupt().transition().duration(s?0:p).styleTween("transform",(function(t){return a}),"important").styleTween("-webkit-transform",(function(t){return a})).style("-ms-transform",o).style("opacity",1)}d.left=n,d.top=r}))};return e.nvPointerEventsClass=g,e.options=t.utils.optionsFunc.bind(e),e._options=Object.create({},{duration:{get:function(){return p},set:function(t){p=t}},gravity:{get:function(){return i},set:function(t){i=t}},distance:{get:function(){return o},set:function(t){o=t}},snapDistance:{get:function(){return a},set:function(t){a=t}},classes:{get:function(){return s},set:function(t){s=t}},enabled:{get:function(){return f},set:function(t){f=t}},hideDelay:{get:function(){return u},set:function(t){u=t}},contentGenerator:{get:function(){return x},set:function(t){x=t}},valueFormatter:{get:function(){return v},set:function(t){v=t}},headerFormatter:{get:function(){return m},set:function(t){m=t}},keyFormatter:{get:function(){return y},set:function(t){y=t}},headerEnabled:{get:function(){return h},set:function(t){h=t}},position:{get:function(){return b},set:function(t){b=t}},chartContainer:{get:function(){return document.body},set:function(e){t.deprecated("chartContainer","feature removed after 1.8.3")}},fixedTop:{get:function(){return null},set:function(e){t.deprecated("fixedTop","feature removed after 1.8.1")}},offset:{get:function(){return{left:0,top:0}},set:function(e){t.deprecated("offset","use chart.tooltip.distance() instead")}},hidden:{get:function(){return l},set:function(t){l!=t&&(l=!!t,e())}},data:{get:function(){return r},set:function(t){t.point&&(t.value=t.point.x,t.series=t.series||{},t.series.value=t.point.y,t.series.color=t.point.color||t.series.color),r=t}},node:{get:function(){return c.node()},set:function(t){}},id:{get:function(){return n},set:function(t){}}}),t.utils.initOptions(e),e},t.utils.windowSize=function(){var t={width:640,height:480};return window.innerWidth&&window.innerHeight?(t.width=window.innerWidth,t.height=window.innerHeight,t):"CSS1Compat"==document.compatMode&&document.documentElement&&document.documentElement.offsetWidth?(t.width=document.documentElement.offsetWidth,t.height=document.documentElement.offsetHeight,t):document.body&&document.body.offsetWidth?(t.width=document.body.offsetWidth,t.height=document.body.offsetHeight,t):t},t.utils.isArray=Array.isArray,t.utils.isObject=function(t){return null!==t&&"object"==typeof t},t.utils.isFunction=function(t){return"function"==typeof t},t.utils.isDate=function(t){return"[object Date]"===toString.call(t)},t.utils.isNumber=function(t){return!isNaN(t)&&"number"==typeof t},t.utils.windowResize=function(e){return window.addEventListener?window.addEventListener("resize",e):t.log("ERROR: Failed to bind to window.resize with: ",e),{callback:e,clear:function(){window.removeEventListener("resize",e)}}},t.utils.getColor=function(e){if(void 0===e)return t.utils.defaultColor();if(t.utils.isArray(e)){var n=d3.scale.ordinal().range(e);return function(t,e){var r=void 0===e?t:e;return t.color||n(r)}}return e},t.utils.defaultColor=function(){return t.utils.getColor(d3.scale.category20().range())},t.utils.customTheme=function(e,n,r){n=n||function(t){return t.key};var i=(r=r||d3.scale.category20().range()).length;return function(o,a){var s=n(o);return t.utils.isFunction(e[s])?e[s]():void 0!==e[s]?e[s]:(i||(i=r.length),r[i-=1])}},t.utils.pjax=function(e,n){var r=function(r){d3.html(r,(function(r){var i=d3.select(n).node();i.parentNode.replaceChild(d3.select(r).select(n).node(),i),t.utils.pjax(e,n)}))};d3.selectAll(e).on("click",(function(){history.pushState(this.href,this.textContent,this.href),r(this.href),d3.event.preventDefault()})),d3.select(window).on("popstate",(function(){d3.event.state&&r(d3.event.state)}))},t.utils.calcApproxTextWidth=function(e){if(t.utils.isFunction(e.style)&&t.utils.isFunction(e.text)){var n=parseInt(e.style("font-size").replace("px",""),10),r=e.text().length;return t.utils.NaNtoZero(r*n*.5)}return 0},t.utils.NaNtoZero=function(e){return!t.utils.isNumber(e)||isNaN(e)||null===e||e===1/0||e===-1/0?0:e},d3.selection.prototype.watchTransition=function(t){var e=[this].concat([].slice.call(arguments,1));return t.transition.apply(t,e)},t.utils.renderWatch=function(e,n){if(!(this instanceof t.utils.renderWatch))return new t.utils.renderWatch(e,n);var r=void 0!==n?n:250,i=[],o=this;this.models=function(t){return(t=[].slice.call(arguments,0)).forEach((function(t){t.__rendered=!1,function(t){t.dispatch.on("renderEnd",(function(e){t.__rendered=!0,o.renderEnd("model")}))}(t),i.indexOf(t)<0&&i.push(t)})),this},this.reset=function(t){void 0!==t&&(r=t),i=[]},this.transition=function(t,e,n){if(n=(e=arguments.length>1?[].slice.call(arguments,1):[]).length>1?e.pop():void 0!==r?r:250,t.__rendered=!1,i.indexOf(t)<0&&i.push(t),0===n)return t.__rendered=!0,t.delay=function(){return this},t.duration=function(){return this},t;0===t.length||t.every((function(t){return!t.length}))?t.__rendered=!0:t.__rendered=!1;var a=0;return t.transition().duration(n).each((function(){++a})).each("end",(function(n,r){0==--a&&(t.__rendered=!0,o.renderEnd.apply(this,e))}))},this.renderEnd=function(){i.every((function(t){return t.__rendered}))&&(i.forEach((function(t){t.__rendered=!1})),e.renderEnd.apply(this,arguments))}},t.utils.deepExtend=function(e){var n=arguments.length>1?[].slice.call(arguments,1):[];n.forEach((function(n){for(var r in n){var i=t.utils.isArray(e[r]),o=t.utils.isObject(e[r]),a=t.utils.isObject(n[r]);o&&!i&&a?t.utils.deepExtend(e[r],n[r]):e[r]=n[r]}}))},t.utils.state=function(){if(!(this instanceof t.utils.state))return new t.utils.state;var e={},n=function(){},r=function(){return{}},i=null;this.dispatch=d3.dispatch("change","set"),this.dispatch.on("set",(function(t){n(t,!0)})),this.getter=function(t){return r=t,this},this.setter=function(t,e){return e||(e=function(){}),n=function(n,r){t(n),r&&e()},this},this.init=function(e){i=i||{},t.utils.deepExtend(i,e)};var o=function(){var t=r();if(JSON.stringify(t)===JSON.stringify(e))return!1;for(var n in t)void 0===e[n]&&(e[n]={}),e[n]=t[n],!0;return!0};this.update=function(){i&&(n(i,!1),i=null),o.call(this)&&this.dispatch.change(e)}},t.utils.optionsFunc=function(e){return e&&d3.map(e).forEach(function(e,n){t.utils.isFunction(this[e])&&this[e](n)}.bind(this)),this},t.utils.calcTicksX=function(e,n){for(var r=1,i=0;i<n.length;i+=1){var o=n[i]&&n[i].values?n[i].values.length:0;r=o>r?o:r}return t.log("Requested number of ticks: ",e),t.log("Calculated max values to be: ",r),e=1>(e=e>r?e=r-1:e)?1:e,e=Math.floor(e),t.log("Calculating tick count as: ",e),e},t.utils.calcTicksY=function(e,n){return t.utils.calcTicksX(e,n)},t.utils.initOption=function(t,e){t._calls&&t._calls[e]?t[e]=t._calls[e]:(t[e]=function(n){return arguments.length?(t._overrides[e]=!0,t._options[e]=n,t):t._options[e]},t["_"+e]=function(n){return arguments.length?(t._overrides[e]||(t._options[e]=n),t):t._options[e]})},t.utils.initOptions=function(e){e._overrides=e._overrides||{};var n=Object.getOwnPropertyNames(e._options||{}),r=Object.getOwnPropertyNames(e._calls||{});for(var i in n=n.concat(r))t.utils.initOption(e,n[i])},t.utils.inheritOptionsD3=function(t,e,n){t._d3options=n.concat(t._d3options||[]),t._d3options=(t._d3options||[]).filter((function(t,e,n){return n.indexOf(t)===e})),n.unshift(e),n.unshift(t),d3.rebind.apply(this,n)},t.utils.arrayUnique=function(t){return t.sort().filter((function(e,n){return!n||e!=t[n-1]}))},t.utils.symbolMap=d3.map(),t.utils.symbol=function(){function e(e,i){var o=n.call(this,e,i),a=r.call(this,e,i);return-1!==d3.svg.symbolTypes.indexOf(o)?d3.svg.symbol().type(o).size(a)():t.utils.symbolMap.get(o)(a)}var n,r=64;return e.type=function(t){return arguments.length?(n=d3.functor(t),e):n},e.size=function(t){return arguments.length?(r=d3.functor(t),e):r},e},t.utils.inheritOptions=function(e,n){var r=Object.getOwnPropertyNames(n._options||{}),i=Object.getOwnPropertyNames(n._calls||{}),o=n._inherited||[],a=n._d3options||[],s=r.concat(i).concat(o).concat(a);s.unshift(n),s.unshift(e),d3.rebind.apply(this,s),e._inherited=t.utils.arrayUnique(r.concat(i).concat(o).concat(r).concat(e._inherited||[])),e._d3options=t.utils.arrayUnique(a.concat(e._d3options||[]))},t.utils.initSVG=function(t){t.classed({"nvd3-svg":!0})},t.utils.sanitizeHeight=function(t,e){return t||parseInt(e.style("height"),10)||400},t.utils.sanitizeWidth=function(t,e){return t||parseInt(e.style("width"),10)||960},t.utils.availableHeight=function(e,n,r){return Math.max(0,t.utils.sanitizeHeight(e,n)-r.top-r.bottom)},t.utils.availableWidth=function(e,n,r){return Math.max(0,t.utils.sanitizeWidth(e,n)-r.left-r.right)},t.utils.noData=function(e,n){var r=e.options(),i=r.margin(),o=r.noData(),a=null==o?["No Data Available."]:[o],s=t.utils.availableHeight(null,n,i),l=t.utils.availableWidth(null,n,i),u=i.left+l/2,c=i.top+s/2;n.selectAll("g").remove();var d=n.selectAll(".nv-noData").data(a);d.enter().append("text").attr("class","nvd3 nv-noData").attr("dy","-.7em").style("text-anchor","middle"),d.attr("x",u).attr("y",c).text((function(t){return t}))},t.utils.wrapTicks=function(t,e){t.each((function(){for(var t,n=d3.select(this),r=n.text().split(/\s+/).reverse(),i=[],o=0,a=n.attr("y"),s=parseFloat(n.attr("dy")),l=n.text(null).append("tspan").attr("x",0).attr("y",a).attr("dy",s+"em");t=r.pop();)i.push(t),l.text(i.join(" ")),l.node().getComputedTextLength()>e&&(i.pop(),l.text(i.join(" ")),i=[t],l=n.append("tspan").attr("x",0).attr("y",a).attr("dy",1.1*++o+s+"em").text(t))}))},t.utils.arrayEquals=function(e,n){if(e===n)return!0;if(!e||!n)return!1;if(e.length!=n.length)return!1;for(var r=0,i=e.length;i>r;r++)if(e[r]instanceof Array&&n[r]instanceof Array){if(!t.arrayEquals(e[r],n[r]))return!1}else if(e[r]!=n[r])return!1;return!0},t.utils.pointIsInArc=function(t,e,n){var r=n.innerRadius()(e),i=n.outerRadius()(e),o=n.startAngle()(e),a=n.endAngle()(e),s=t.x*t.x+t.y*t.y,l=Math.atan2(t.x,-t.y);return l=0>l?l+2*Math.PI:l,s>=r*r&&i*i>=s&&l>=o&&a>=l},t.models.axis=function(){"use strict";function e(s){return b.reset(),s.each((function(e){var s=d3.select(this);t.utils.initSVG(s);var m=s.selectAll("g.nv-wrap.nv-axis").data([e]),y=(m.enter().append("g").attr("class","nvd3 nv-wrap nv-axis").append("g"),m.select("g"));null!==h?r.ticks(h):("top"==r.orient()||"bottom"==r.orient())&&r.ticks(Math.abs(i.range()[1]-i.range()[0])/100),y.watchTransition(b,"axis").call(r),x=x||r.scale();var k=r.tickFormat();null==k&&(k=x.tickFormat());var w,M,A,C=y.selectAll("text.nv-axislabel").data([l||null]);switch(C.exit().remove(),void 0!==v&&y.selectAll("g").select("text").style("font-size",v),r.orient()){case"top":C.enter().append("text").attr("class","nv-axislabel"),A=0,1===i.range().length?A=p?2*i.range()[0]+i.rangeBand():0:2===i.range().length?A=p?i.range()[0]+i.range()[1]+i.rangeBand():i.range()[1]:i.range().length>2&&(A=i.range()[i.range().length-1]+(i.range()[1]-i.range()[0])),C.attr("text-anchor","middle").attr("y",0).attr("x",A/2),u&&((M=m.selectAll("g.nv-axisMaxMin").data(i.domain())).enter().append("g").attr("class",(function(t,e){return["nv-axisMaxMin","nv-axisMaxMin-x",0==e?"nv-axisMin-x":"nv-axisMax-x"].join(" ")})).append("text"),M.exit().remove(),M.attr("transform",(function(e,n){return"translate("+t.utils.NaNtoZero(i(e))+",0)"})).select("text").attr("dy","-0.5em").attr("y",-r.tickPadding()).attr("text-anchor","middle").text((function(t,e){var r=(n||k)(t);return(""+r).match("NaN")?"":r})),M.watchTransition(b,"min-max top").attr("transform",(function(e,n){return"translate("+t.utils.NaNtoZero(i.range()[n])+",0)"})));break;case"bottom":w=g+36;var S=30,W=0,E=y.selectAll("g").select("text"),F="";if(c%360){E.attr("transform",""),E.each((function(t,e){var n=this.getBoundingClientRect(),r=n.width;W=n.height,r>S&&(S=r)})),F="rotate("+c+" 0,"+(W/2+r.tickPadding())+")";var N=Math.abs(Math.sin(c*Math.PI/180));w=(N?N*S:S)+30,E.attr("transform",F).style("text-anchor",c%360>0?"start":"end")}else f?E.attr("transform",(function(t,e){return"translate(0,"+(e%2==0?"0":"12")+")"})):E.attr("transform","translate(0,0)");C.enter().append("text").attr("class","nv-axislabel"),A=0,1===i.range().length?A=p?2*i.range()[0]+i.rangeBand():0:2===i.range().length?A=p?i.range()[0]+i.range()[1]+i.rangeBand():i.range()[1]:i.range().length>2&&(A=i.range()[i.range().length-1]+(i.range()[1]-i.range()[0])),C.attr("text-anchor","middle").attr("y",w).attr("x",A/2),u&&((M=m.selectAll("g.nv-axisMaxMin").data([i.domain()[0],i.domain()[i.domain().length-1]])).enter().append("g").attr("class",(function(t,e){return["nv-axisMaxMin","nv-axisMaxMin-x",0==e?"nv-axisMin-x":"nv-axisMax-x"].join(" ")})).append("text"),M.exit().remove(),M.attr("transform",(function(e,n){return"translate("+t.utils.NaNtoZero(i(e)+(p?i.rangeBand()/2:0))+",0)"})).select("text").attr("dy",".71em").attr("y",r.tickPadding()).attr("transform",F).style("text-anchor",c?c%360>0?"start":"end":"middle").text((function(t,e){var r=(n||k)(t);return(""+r).match("NaN")?"":r})),M.watchTransition(b,"min-max bottom").attr("transform",(function(e,n){return"translate("+t.utils.NaNtoZero(i(e)+(p?i.rangeBand()/2:0))+",0)"})));break;case"right":C.enter().append("text").attr("class","nv-axislabel"),C.style("text-anchor",d?"middle":"begin").attr("transform",d?"rotate(90)":"").attr("y",d?12-Math.max(o.right,a)-(g||0):-10).attr("x",d?d3.max(i.range())/2:r.tickPadding()),u&&((M=m.selectAll("g.nv-axisMaxMin").data(i.domain())).enter().append("g").attr("class",(function(t,e){return["nv-axisMaxMin","nv-axisMaxMin-y",0==e?"nv-axisMin-y":"nv-axisMax-y"].join(" ")})).append("text").style("opacity",0),M.exit().remove(),M.attr("transform",(function(e,n){return"translate(0,"+t.utils.NaNtoZero(i(e))+")"})).select("text").attr("dy",".32em").attr("y",0).attr("x",r.tickPadding()).style("text-anchor","start").text((function(t,e){var r=(n||k)(t);return(""+r).match("NaN")?"":r})),M.watchTransition(b,"min-max right").attr("transform",(function(e,n){return"translate(0,"+t.utils.NaNtoZero(i.range()[n])+")"})).select("text").style("opacity",1));break;case"left":C.enter().append("text").attr("class","nv-axislabel"),C.style("text-anchor",d?"middle":"end").attr("transform",d?"rotate(-90)":"").attr("y",d?25-Math.max(o.left,a)-(g||0):-10).attr("x",d?-d3.max(i.range())/2:-r.tickPadding()),u&&((M=m.selectAll("g.nv-axisMaxMin").data(i.domain())).enter().append("g").attr("class",(function(t,e){return["nv-axisMaxMin","nv-axisMaxMin-y",0==e?"nv-axisMin-y":"nv-axisMax-y"].join(" ")})).append("text").style("opacity",0),M.exit().remove(),M.attr("transform",(function(e,n){return"translate(0,"+t.utils.NaNtoZero(x(e))+")"})).select("text").attr("dy",".32em").attr("y",0).attr("x",-r.tickPadding()).attr("text-anchor","end").text((function(t,e){var r=(n||k)(t);return(""+r).match("NaN")?"":r})),M.watchTransition(b,"min-max right").attr("transform",(function(e,n){return"translate(0,"+t.utils.NaNtoZero(i.range()[n])+")"})).select("text").style("opacity",1))}if(C.text((function(t){return t})),!u||"left"!==r.orient()&&"right"!==r.orient()||(y.selectAll("g").each((function(t,e){d3.select(this).select("text").attr("opacity",1),(i(t)<i.range()[1]+10||i(t)>i.range()[0]-10)&&((t>1e-10||-1e-10>t)&&d3.select(this).attr("opacity",0),d3.select(this).select("text").attr("opacity",0))})),i.domain()[0]==i.domain()[1]&&0==i.domain()[0]&&m.selectAll("g.nv-axisMaxMin").style("opacity",(function(t,e){return e?0:1}))),u&&("top"===r.orient()||"bottom"===r.orient())){var D=[];m.selectAll("g.nv-axisMaxMin").each((function(t,e){try{e?D.push(i(t)-this.getBoundingClientRect().width-4):D.push(i(t)+this.getBoundingClientRect().width+4)}catch(n){e?D.push(i(t)-4):D.push(i(t)+4)}})),y.selectAll("g").each((function(t,e){(i(t)<D[0]||i(t)>D[1])&&(t>1e-10||-1e-10>t?d3.select(this).remove():d3.select(this).select("text").remove())}))}y.selectAll(".tick").filter((function(t){return!parseFloat(Math.round(1e5*t)/1e6)&&void 0!==t})).classed("zero",!0),x=i.copy()})),b.renderEnd("axis immediate"),e}var n,r=d3.svg.axis(),i=d3.scale.linear(),o={top:0,right:0,bottom:0,left:0},a=75,s=60,l=null,u=!0,c=0,d=!0,f=!1,p=!1,h=null,g=0,v=void 0,m=250,y=d3.dispatch("renderEnd");r.scale(i).orient("bottom").tickFormat((function(t){return t}));var x,b=t.utils.renderWatch(y,m);return e.axis=r,e.dispatch=y,e.options=t.utils.optionsFunc.bind(e),e._options=Object.create({},{axisLabelDistance:{get:function(){return g},set:function(t){g=t}},staggerLabels:{get:function(){return f},set:function(t){f=t}},rotateLabels:{get:function(){return c},set:function(t){c=t}},rotateYLabel:{get:function(){return d},set:function(t){d=t}},showMaxMin:{get:function(){return u},set:function(t){u=t}},axisLabel:{get:function(){return l},set:function(t){l=t}},height:{get:function(){return s},set:function(t){s=t}},ticks:{get:function(){return h},set:function(t){h=t}},width:{get:function(){return a},set:function(t){a=t}},fontSize:{get:function(){return v},set:function(t){v=t}},tickFormatMaxMin:{get:function(){return n},set:function(t){n=t}},margin:{get:function(){return o},set:function(t){o.top=void 0!==t.top?t.top:o.top,o.right=void 0!==t.right?t.right:o.right,o.bottom=void 0!==t.bottom?t.bottom:o.bottom,o.left=void 0!==t.left?t.left:o.left}},duration:{get:function(){return m},set:function(t){m=t,b.reset(m)}},scale:{get:function(){return i},set:function(n){i=n,r.scale(i),p="function"==typeof i.rangeBands,t.utils.inheritOptionsD3(e,i,["domain","range","rangeBand","rangeBands"])}}}),t.utils.initOptions(e),t.utils.inheritOptionsD3(e,r,["orient","tickValues","tickSubdivide","tickSize","tickPadding","tickFormat"]),t.utils.inheritOptionsD3(e,i,["domain","range","rangeBand","rangeBands"]),e},t.models.boxPlot=function(){"use strict";function e(d){return N.reset(),d.each((function(e){var d=u-l.left-l.right,D=c-l.top-l.bottom;S=d3.select(this),t.utils.initSVG(S),f.domain(n||e.map((function(t,e){return h(t,e)}))).rangeBands(r||[0,d],.1);var O=[];if(!i){var _=[];e.forEach((function(t,e){var n=g(t),r=m(t),i=y(t),o=x(t),a=k(t);a&&a.forEach((function(t,e){_.push(w(t,e,void 0))})),i&&_.push(i),n&&_.push(n),r&&_.push(r),o&&_.push(o)})),O=[d3.min(_),d3.max(_)]}p.domain(i||O),p.range(o||[D,0]),a=a||f,s=s||p.copy().range([p(0),p(0)]);var L=S.selectAll("g.nv-wrap").data([e]);L.enter().append("g").attr("class","nvd3 nv-wrap"),L.attr("transform","translate("+l.left+","+l.top+")");var B=L.selectAll(".nv-boxplot").data((function(t){return t})),P=B.enter().append("g").style("stroke-opacity",1e-6).style("fill-opacity",1e-6);B.attr("class","nv-boxplot").attr("transform",(function(t,e,n){return"translate("+(f(h(t,e))+.05*f.rangeBand())+", 0)"})).classed("hover",(function(t){return t.hover})),B.watchTransition(N,"nv-boxplot: boxplots").style("stroke-opacity",1).style("fill-opacity",.75).delay((function(t,n){return n*E/e.length})).attr("transform",(function(t,e){return"translate("+(f(h(t,e))+.05*f.rangeBand())+", 0)"})),B.exit().remove(),P.each((function(t,e){var n=d3.select(this);[y,x].forEach((function(r){if(void 0!==r(t)&&null!==r(t)){var i=r===y?"low":"high";n.append("line").style("stroke",b(t)||C(t,e)).attr("class","nv-boxplot-whisker nv-boxplot-"+i),n.append("line").style("stroke",b(t)||C(t,e)).attr("class","nv-boxplot-tick nv-boxplot-"+i)}}))}));var T=function(){return null===F?.9*f.rangeBand():Math.min(75,.9*f.rangeBand())},I=function(){return.45*f.rangeBand()-T()/2},z=function(){return.45*f.rangeBand()+T()/2};[y,x].forEach((function(t){var e=t===y?"low":"high",n=t===y?g:m;B.select("line.nv-boxplot-whisker.nv-boxplot-"+e).watchTransition(N,"nv-boxplot: boxplots").attr("x1",.45*f.rangeBand()).attr("y1",(function(e,n){return p(t(e))})).attr("x2",.45*f.rangeBand()).attr("y2",(function(t,e){return p(n(t))})),B.select("line.nv-boxplot-tick.nv-boxplot-"+e).watchTransition(N,"nv-boxplot: boxplots").attr("x1",I).attr("y1",(function(e,n){return p(t(e))})).attr("x2",z).attr("y2",(function(e,n){return p(t(e))}))})),[y,x].forEach((function(t){var e=t===y?"low":"high";P.selectAll(".nv-boxplot-"+e).on("mouseover",(function(e,n,r){d3.select(this).classed("hover",!0),W.elementMouseover({series:{key:t(e),color:b(e)||C(e,r)},e:d3.event})})).on("mouseout",(function(e,n,r){d3.select(this).classed("hover",!1),W.elementMouseout({series:{key:t(e),color:b(e)||C(e,r)},e:d3.event})})).on("mousemove",(function(t,e){W.elementMousemove({e:d3.event})}))})),P.append("rect").attr("class","nv-boxplot-box").on("mouseover",(function(t,e){d3.select(this).classed("hover",!0),W.elementMouseover({key:h(t),value:h(t),series:[{key:"Q3",value:m(t),color:b(t)||C(t,e)},{key:"Q2",value:v(t),color:b(t)||C(t,e)},{key:"Q1",value:g(t),color:b(t)||C(t,e)}],data:t,index:e,e:d3.event})})).on("mouseout",(function(t,e){d3.select(this).classed("hover",!1),W.elementMouseout({key:h(t),value:h(t),series:[{key:"Q3",value:m(t),color:b(t)||C(t,e)},{key:"Q2",value:v(t),color:b(t)||C(t,e)},{key:"Q1",value:g(t),color:b(t)||C(t,e)}],data:t,index:e,e:d3.event})})).on("mousemove",(function(t,e){W.elementMousemove({e:d3.event})})),B.select("rect.nv-boxplot-box").watchTransition(N,"nv-boxplot: boxes").attr("y",(function(t,e){return p(m(t))})).attr("width",T).attr("x",I).attr("height",(function(t,e){return Math.abs(p(m(t))-p(g(t)))||1})).style("fill",(function(t,e){return b(t)||C(t,e)})).style("stroke",(function(t,e){return b(t)||C(t,e)})),P.append("line").attr("class","nv-boxplot-median"),B.select("line.nv-boxplot-median").watchTransition(N,"nv-boxplot: boxplots line").attr("x1",I).attr("y1",(function(t,e){return p(v(t))})).attr("x2",z).attr("y2",(function(t,e){return p(v(t))}));var V=B.selectAll(".nv-boxplot-outlier").data((function(t){return k(t)||[]}));V.enter().append("circle").style("fill",(function(t,e,n){return A(t,e,n)||C(t,n)})).style("stroke",(function(t,e,n){return A(t,e,n)||C(t,n)})).style("z-index",9e3).on("mouseover",(function(t,e,n){d3.select(this).classed("hover",!0),W.elementMouseover({series:{key:M(t,e,n),color:A(t,e,n)||C(t,n)},e:d3.event})})).on("mouseout",(function(t,e,n){d3.select(this).classed("hover",!1),W.elementMouseout({series:{key:M(t,e,n),color:A(t,e,n)||C(t,n)},e:d3.event})})).on("mousemove",(function(t,e){W.elementMousemove({e:d3.event})})),V.attr("class","nv-boxplot-outlier"),V.watchTransition(N,"nv-boxplot: nv-boxplot-outlier").attr("cx",.45*f.rangeBand()).attr("cy",(function(t,e,n){return p(w(t,e,n))})).attr("r","3"),V.exit().remove(),a=f.copy(),s=p.copy()})),N.renderEnd("nv-boxplot immediate"),e}var n,r,i,o,a,s,l={top:0,right:0,bottom:0,left:0},u=960,c=500,d=Math.floor(1e4*Math.random()),f=d3.scale.ordinal(),p=d3.scale.linear(),h=function(t){return t.label},g=function(t){return t.values.Q1},v=function(t){return t.values.Q2},m=function(t){return t.values.Q3},y=function(t){return t.values.whisker_low},x=function(t){return t.values.whisker_high},b=function(t){return t.color},k=function(t){return t.values.outliers},w=function(t,e,n){return t},M=function(t,e,n){return t},A=function(t,e,n){},C=t.utils.defaultColor(),S=null,W=d3.dispatch("elementMouseover","elementMouseout","elementMousemove","renderEnd"),E=250,F=null,N=t.utils.renderWatch(W,E);return e.dispatch=W,e.options=t.utils.optionsFunc.bind(e),e._options=Object.create({},{width:{get:function(){return u},set:function(t){u=t}},height:{get:function(){return c},set:function(t){c=t}},maxBoxWidth:{get:function(){return F},set:function(t){F=t}},x:{get:function(){return h},set:function(t){h=t}},q1:{get:function(){return g},set:function(t){g=t}},q2:{get:function(){return v},set:function(t){v=t}},q3:{get:function(){return m},set:function(t){m=t}},wl:{get:function(){return y},set:function(t){y=t}},wh:{get:function(){return x},set:function(t){x=t}},itemColor:{get:function(){return b},set:function(t){b=t}},outliers:{get:function(){return k},set:function(t){k=t}},outlierValue:{get:function(){return w},set:function(t){w=t}},outlierLabel:{get:function(){return M},set:function(t){M=t}},outlierColor:{get:function(){return A},set:function(t){A=t}},xScale:{get:function(){return f},set:function(t){f=t}},yScale:{get:function(){return p},set:function(t){p=t}},xDomain:{get:function(){return n},set:function(t){n=t}},yDomain:{get:function(){return i},set:function(t){i=t}},xRange:{get:function(){return r},set:function(t){r=t}},yRange:{get:function(){return o},set:function(t){o=t}},id:{get:function(){return d},set:function(t){d=t}},y:{get:function(){return console.warn("BoxPlot 'y' chart option is deprecated. Please use model overrides instead."),{}},set:function(t){console.warn("BoxPlot 'y' chart option is deprecated. Please use model overrides instead.")}},margin:{get:function(){return l},set:function(t){l.top=void 0!==t.top?t.top:l.top,l.right=void 0!==t.right?t.right:l.right,l.bottom=void 0!==t.bottom?t.bottom:l.bottom,l.left=void 0!==t.left?t.left:l.left}},color:{get:function(){return C},set:function(e){C=t.utils.getColor(e)}},duration:{get:function(){return E},set:function(t){E=t,N.reset(E)}}}),t.utils.initOptions(e),e},t.models.boxPlotChart=function(){"use strict";function e(c){return x.reset(),x.models(i),d&&x.models(o),f&&x.models(a),c.each((function(c){var g=d3.select(this);t.utils.initSVG(g);var x=(l||parseInt(g.style("width"))||960)-s.left-s.right,b=(u||parseInt(g.style("height"))||400)-s.top-s.bottom;if(e.update=function(){m.beforeUpdate(),g.transition().duration(y).call(e)},e.container=this,!c||!c.length){var k=g.selectAll(".nv-noData").data([v]);return k.enter().append("text").attr("class","nvd3 nv-noData").attr("dy","-.7em").style("text-anchor","middle"),k.attr("x",s.left+x/2).attr("y",s.top+b/2).text((function(t){return t})),e}g.selectAll(".nv-noData").remove(),n=i.xScale(),r=i.yScale().clamp(!0);var w=g.selectAll("g.nv-wrap.nv-boxPlotWithAxes").data([c]),M=w.enter().append("g").attr("class","nvd3 nv-wrap nv-boxPlotWithAxes").append("g"),A=M.append("defs"),C=w.select("g");M.append("g").attr("class","nv-x nv-axis"),M.append("g").attr("class","nv-y nv-axis").append("g").attr("class","nv-zeroLine").append("line"),M.append("g").attr("class","nv-barsWrap"),C.attr("transform","translate("+s.left+","+s.top+")"),p&&C.select(".nv-y.nv-axis").attr("transform","translate("+x+",0)"),i.width(x).height(b);var S=C.select(".nv-barsWrap").datum(c.filter((function(t){return!t.disabled})));if(S.transition().call(i),A.append("clipPath").attr("id","nv-x-label-clip-"+i.id()).append("rect"),C.select("#nv-x-label-clip-"+i.id()+" rect").attr("width",n.rangeBand()*(h?2:1)).attr("height",16).attr("x",-n.rangeBand()/(h?1:2)),d){o.scale(n).ticks(t.utils.calcTicksX(x/100,c)).tickSize(-b,0),C.select(".nv-x.nv-axis").attr("transform","translate(0,"+r.range()[0]+")"),C.select(".nv-x.nv-axis").call(o);var W=C.select(".nv-x.nv-axis").selectAll("g");h&&W.selectAll("text").attr("transform",(function(t,e,n){return"translate(0,"+(n%2==0?"5":"17")+")"}))}f&&(a.scale(r).ticks(Math.floor(b/36)).tickSize(-x,0),C.select(".nv-y.nv-axis").call(a)),C.select(".nv-zeroLine line").attr("x1",0).attr("x2",x).attr("y1",r(0)).attr("y2",r(0))})),x.renderEnd("nv-boxplot chart immediate"),e}var n,r,i=t.models.boxPlot(),o=t.models.axis(),a=t.models.axis(),s={top:15,right:10,bottom:50,left:60},l=null,u=null,c=t.utils.getColor(),d=!0,f=!0,p=!1,h=!1,g=t.models.tooltip(),v="No Data Available.",m=d3.dispatch("beforeUpdate","renderEnd"),y=250;o.orient("bottom").showMaxMin(!1).tickFormat((function(t){return t})),a.orient(p?"right":"left").tickFormat(d3.format(",.1f")),g.duration(0);var x=t.utils.renderWatch(m,y);return i.dispatch.on("elementMouseover.tooltip",(function(t){g.data(t).hidden(!1)})),i.dispatch.on("elementMouseout.tooltip",(function(t){g.data(t).hidden(!0)})),i.dispatch.on("elementMousemove.tooltip",(function(t){g()})),e.dispatch=m,e.boxplot=i,e.xAxis=o,e.yAxis=a,e.tooltip=g,e.options=t.utils.optionsFunc.bind(e),e._options=Object.create({},{width:{get:function(){return l},set:function(t){l=t}},height:{get:function(){return u},set:function(t){u=t}},staggerLabels:{get:function(){return h},set:function(t){h=t}},showXAxis:{get:function(){return d},set:function(t){d=t}},showYAxis:{get:function(){return f},set:function(t){f=t}},tooltipContent:{get:function(){return g},set:function(t){g=t}},noData:{get:function(){return v},set:function(t){v=t}},margin:{get:function(){return s},set:function(t){s.top=void 0!==t.top?t.top:s.top,s.right=void 0!==t.right?t.right:s.right,s.bottom=void 0!==t.bottom?t.bottom:s.bottom,s.left=void 0!==t.left?t.left:s.left}},duration:{get:function(){return y},set:function(t){y=t,x.reset(y),i.duration(y),o.duration(y),a.duration(y)}},color:{get:function(){return c},set:function(e){c=t.utils.getColor(e),i.color(c)}},rightAlignYAxis:{get:function(){return p},set:function(t){p=t,a.orient(t?"right":"left")}}}),t.utils.inheritOptions(e,i),t.utils.initOptions(e),e},t.models.bullet=function(){"use strict";function e(t,e){var n=t.slice();t.sort((function(t,r){var i=n.indexOf(t),o=n.indexOf(r);return d3.descending(e[i],e[o])}))}function n(i){return i.each((function(n,i){var y=g-r.left-r.right,A=v-r.top-r.bottom;m=d3.select(this),t.utils.initSVG(m);var C=a.call(this,n,i).slice(),S=s.call(this,n,i).slice(),W=l.call(this,n,i).slice(),E=u.call(this,n,i).slice(),F=c.call(this,n,i).slice(),N=d.call(this,n,i).slice(),D=f.call(this,n,i).slice(),O=p.call(this,n,i).slice();e(F,C),e(N,S),e(D,W),e(O,E),C.sort(d3.descending),S.sort(d3.descending),W.sort(d3.descending),E.sort(d3.descending);var _=d3.scale.linear().domain(d3.extent(d3.merge([h,C]))).range(o?[y,0]:[0,y]);this.__chart__||d3.scale.linear().domain([0,1/0]).range(_.range()),this.__chart__=_;for(var L=(d3.min(C),d3.max(C),C[1],m.selectAll("g.nv-wrap.nv-bullet").data([n])),B=L.enter().append("g").attr("class","nvd3 nv-wrap nv-bullet").append("g"),P=L.select("g"),T=(i=0,C.length);T>i;i++){var I="nv-range nv-range"+i;2>=i&&(I=I+" nv-range"+w[i]),B.append("rect").attr("class",I)}B.append("rect").attr("class","nv-measure"),L.attr("transform","translate("+r.left+","+r.top+")");var z=function(t){return Math.abs(_(t)-_(0))},V=function(t){return _(0>t?t:0)};for(i=0,T=C.length;T>i;i++){var H=C[i];P.select("rect.nv-range"+i).datum(H).attr("height",A).transition().duration(M).attr("width",z(H)).attr("x",V(H))}P.select("rect.nv-measure").style("fill",x).attr("height",A/3).attr("y",A/3).on("mouseover",(function(){b.elementMouseover({value:E[0],label:O[0]||"Current",color:d3.select(this).style("fill")})})).on("mousemove",(function(){b.elementMousemove({value:E[0],label:O[0]||"Current",color:d3.select(this).style("fill")})})).on("mouseout",(function(){b.elementMouseout({value:E[0],label:O[0]||"Current",color:d3.select(this).style("fill")})})).transition().duration(M).attr("width",0>E?_(0)-_(E[0]):_(E[0])-_(0)).attr("x",V(E));var Y=A/6,G=S.map((function(t,e){return{value:t,label:N[e]}}));B.selectAll("path.nv-markerTriangle").data(G).enter().append("path").attr("class","nv-markerTriangle").attr("d","M0,"+Y+"L"+Y+","+-Y+" "+-Y+","+-Y+"Z").on("mouseover",(function(t){b.elementMouseover({value:t.value,label:t.label||"Previous",color:d3.select(this).style("fill"),pos:[_(t.value),A/2]})})).on("mousemove",(function(t){b.elementMousemove({value:t.value,label:t.label||"Previous",color:d3.select(this).style("fill")})})).on("mouseout",(function(t,e){b.elementMouseout({value:t.value,label:t.label||"Previous",color:d3.select(this).style("fill")})})),P.selectAll("path.nv-markerTriangle").data(G).transition().duration(M).attr("transform",(function(t){return"translate("+_(t.value)+","+A/2+")"}));var X=W.map((function(t,e){return{value:t,label:D[e]}}));B.selectAll("line.nv-markerLine").data(X).enter().append("line").attr("cursor","").attr("class","nv-markerLine").attr("x1",(function(t){return _(t.value)})).attr("y1","2").attr("x2",(function(t){return _(t.value)})).attr("y2",A-2).on("mouseover",(function(t){b.elementMouseover({value:t.value,label:t.label||"Previous",color:d3.select(this).style("fill"),pos:[_(t.value),A/2]})})).on("mousemove",(function(t){b.elementMousemove({value:t.value,label:t.label||"Previous",color:d3.select(this).style("fill")})})).on("mouseout",(function(t,e){b.elementMouseout({value:t.value,label:t.label||"Previous",color:d3.select(this).style("fill")})})),P.selectAll("line.nv-markerLine").data(X).transition().duration(M).attr("x1",(function(t){return _(t.value)})).attr("x2",(function(t){return _(t.value)})),L.selectAll(".nv-range").on("mouseover",(function(t,e){var n=F[e]||k[e];b.elementMouseover({value:t,label:n,color:d3.select(this).style("fill")})})).on("mousemove",(function(){b.elementMousemove({value:E[0],label:O[0]||"Previous",color:d3.select(this).style("fill")})})).on("mouseout",(function(t,e){var n=F[e]||k[e];b.elementMouseout({value:t,label:n,color:d3.select(this).style("fill")})}))})),n}var r={top:0,right:0,bottom:0,left:0},i="left",o=!1,a=function(t){return t.ranges},s=function(t){return t.markers?t.markers:[]},l=function(t){return t.markerLines?t.markerLines:[0]},u=function(t){return t.measures},c=function(t){return t.rangeLabels?t.rangeLabels:[]},d=function(t){return t.markerLabels?t.markerLabels:[]},f=function(t){return t.markerLineLabels?t.markerLineLabels:[]},p=function(t){return t.measureLabels?t.measureLabels:[]},h=[0],g=380,v=30,m=null,y=null,x=t.utils.getColor(["#1f77b4"]),b=d3.dispatch("elementMouseover","elementMouseout","elementMousemove"),k=["Maximum","Mean","Minimum"],w=["Max","Avg","Min"],M=1e3;return n.dispatch=b,n.options=t.utils.optionsFunc.bind(n),n._options=Object.create({},{ranges:{get:function(){return a},set:function(t){a=t}},markers:{get:function(){return s},set:function(t){s=t}},measures:{get:function(){return u},set:function(t){u=t}},forceX:{get:function(){return h},set:function(t){h=t}},width:{get:function(){return g},set:function(t){g=t}},height:{get:function(){return v},set:function(t){v=t}},tickFormat:{get:function(){return y},set:function(t){y=t}},duration:{get:function(){return M},set:function(t){M=t}},margin:{get:function(){return r},set:function(t){r.top=void 0!==t.top?t.top:r.top,r.right=void 0!==t.right?t.right:r.right,r.bottom=void 0!==t.bottom?t.bottom:r.bottom,r.left=void 0!==t.left?t.left:r.left}},orient:{get:function(){return i},set:function(t){o="right"==(i=t)||"bottom"==i}},color:{get:function(){return x},set:function(e){x=t.utils.getColor(e)}}}),t.utils.initOptions(n),n},t.models.bulletChart=function(){"use strict";function e(r){return r.each((function(i,h){var g=d3.select(this);t.utils.initSVG(g);var v=t.utils.availableWidth(c,g,a),m=d-a.top-a.bottom;if(e.update=function(){e(r)},e.container=this,!i||!s.call(this,i,h))return t.utils.noData(e,g),e;g.selectAll(".nv-noData").remove();var y=s.call(this,i,h).slice().sort(d3.descending),x=l.call(this,i,h).slice().sort(d3.descending),b=u.call(this,i,h).slice().sort(d3.descending),k=g.selectAll("g.nv-wrap.nv-bulletChart").data([i]),w=k.enter().append("g").attr("class","nvd3 nv-wrap nv-bulletChart").append("g"),M=k.select("g");w.append("g").attr("class","nv-bulletWrap"),w.append("g").attr("class","nv-titles"),k.attr("transform","translate("+a.left+","+a.top+")");var A=d3.scale.linear().domain([0,Math.max(y[0],x[0]||0,b[0])]).range(o?[v,0]:[0,v]),C=this.__chart__||d3.scale.linear().domain([0,1/0]).range(A.range());this.__chart__=A;var S=w.select(".nv-titles").append("g").attr("text-anchor","end").attr("transform","translate(-6,"+(d-a.top-a.bottom)/2+")");S.append("text").attr("class","nv-title").text((function(t){return t.title})),S.append("text").attr("class","nv-subtitle").attr("dy","1em").text((function(t){return t.subtitle})),n.width(v).height(m);var W=M.select(".nv-bulletWrap");d3.transition(W).call(n);var E=f||A.tickFormat(v/100),F=M.selectAll("g.nv-tick").data(A.ticks(p||v/50),(function(t){return this.textContent||E(t)})),N=F.enter().append("g").attr("class","nv-tick").attr("transform",(function(t){return"translate("+C(t)+",0)"})).style("opacity",1e-6);N.append("line").attr("y1",m).attr("y2",7*m/6),N.append("text").attr("text-anchor","middle").attr("dy","1em").attr("y",7*m/6).text(E);var D=d3.transition(F).transition().duration(n.duration()).attr("transform",(function(t){return"translate("+A(t)+",0)"})).style("opacity",1);D.select("line").attr("y1",m).attr("y2",7*m/6),D.select("text").attr("y",7*m/6),d3.transition(F.exit()).transition().duration(n.duration()).attr("transform",(function(t){return"translate("+A(t)+",0)"})).style("opacity",1e-6).remove()})),d3.timer.flush(),e}var n=t.models.bullet(),r=t.models.tooltip(),i="left",o=!1,a={top:5,right:40,bottom:20,left:120},s=function(t){return t.ranges},l=function(t){return t.markers?t.markers:[]},u=function(t){return t.measures},c=null,d=55,f=null,p=null,h=null,g=d3.dispatch();return r.duration(0).headerEnabled(!1),n.dispatch.on("elementMouseover.tooltip",(function(t){t.series={key:t.label,value:t.value,color:t.color},r.data(t).hidden(!1)})),n.dispatch.on("elementMouseout.tooltip",(function(t){r.hidden(!0)})),n.dispatch.on("elementMousemove.tooltip",(function(t){r()})),e.bullet=n,e.dispatch=g,e.tooltip=r,e.options=t.utils.optionsFunc.bind(e),e._options=Object.create({},{ranges:{get:function(){return s},set:function(t){s=t}},markers:{get:function(){return l},set:function(t){l=t}},measures:{get:function(){return u},set:function(t){u=t}},width:{get:function(){return c},set:function(t){c=t}},height:{get:function(){return d},set:function(t){d=t}},tickFormat:{get:function(){return f},set:function(t){f=t}},ticks:{get:function(){return p},set:function(t){p=t}},noData:{get:function(){return h},set:function(t){h=t}},margin:{get:function(){return a},set:function(t){a.top=void 0!==t.top?t.top:a.top,a.right=void 0!==t.right?t.right:a.right,a.bottom=void 0!==t.bottom?t.bottom:a.bottom,a.left=void 0!==t.left?t.left:a.left}},orient:{get:function(){return i},set:function(t){o="right"==(i=t)||"bottom"==i}}}),t.utils.inheritOptions(e,n),t.utils.initOptions(e),e},t.models.candlestickBar=function(){"use strict";function e(M){return M.each((function(e){n=d3.select(this);var M=t.utils.availableWidth(l,n,s),A=t.utils.availableHeight(u,n,s);t.utils.initSVG(n);var S=M/e[0].values.length*.45;d.domain(r||d3.extent(e[0].values.map(p).concat(x))),k?d.range(o||[.5*M/e[0].values.length,M*(e[0].values.length-.5)/e[0].values.length]):d.range(o||[5+S/2,M-S/2-5]),f.domain(i||[d3.min(e[0].values.map(y).concat(b)),d3.max(e[0].values.map(m).concat(b))]).range(a||[A,0]),d.domain()[0]===d.domain()[1]&&(d.domain()[0]?d.domain([d.domain()[0]-.01*d.domain()[0],d.domain()[1]+.01*d.domain()[1]]):d.domain([-1,1])),f.domain()[0]===f.domain()[1]&&(f.domain()[0]?f.domain([f.domain()[0]+.01*f.domain()[0],f.domain()[1]-.01*f.domain()[1]]):f.domain([-1,1]));var W=d3.select(this).selectAll("g.nv-wrap.nv-candlestickBar").data([e[0].values]),E=W.enter().append("g").attr("class","nvd3 nv-wrap nv-candlestickBar"),F=E.append("defs"),N=E.append("g"),D=W.select("g");N.append("g").attr("class","nv-ticks"),W.attr("transform","translate("+s.left+","+s.top+")"),n.on("click",(function(t,e){C.chartClick({data:t,index:e,pos:d3.event,id:c})})),F.append("clipPath").attr("id","nv-chart-clip-path-"+c).append("rect"),W.select("#nv-chart-clip-path-"+c+" rect").attr("width",M).attr("height",A),D.attr("clip-path",w?"url(#nv-chart-clip-path-"+c+")":"");var O=W.select(".nv-ticks").selectAll(".nv-tick").data((function(t){return t}));O.exit().remove();var _=O.enter().append("g");O.attr("class",(function(t,e,n){return(g(t,e)>v(t,e)?"nv-tick negative":"nv-tick positive")+" nv-tick-"+n+"-"+e})),_.append("line").attr("class","nv-candlestick-lines").attr("transform",(function(t,e){return"translate("+d(p(t,e))+",0)"})).attr("x1",0).attr("y1",(function(t,e){return f(m(t,e))})).attr("x2",0).attr("y2",(function(t,e){return f(y(t,e))})),_.append("rect").attr("class","nv-candlestick-rects nv-bars").attr("transform",(function(t,e){return"translate("+(d(p(t,e))-S/2)+","+(f(h(t,e))-(g(t,e)>v(t,e)?f(v(t,e))-f(g(t,e)):0))+")"})).attr("x",0).attr("y",0).attr("width",S).attr("height",(function(t,e){var n=g(t,e),r=v(t,e);return n>r?f(r)-f(n):f(n)-f(r)})),O.select(".nv-candlestick-lines").transition().attr("transform",(function(t,e){return"translate("+d(p(t,e))+",0)"})).attr("x1",0).attr("y1",(function(t,e){return f(m(t,e))})).attr("x2",0).attr("y2",(function(t,e){return f(y(t,e))})),O.select(".nv-candlestick-rects").transition().attr("transform",(function(t,e){return"translate("+(d(p(t,e))-S/2)+","+(f(h(t,e))-(g(t,e)>v(t,e)?f(v(t,e))-f(g(t,e)):0))+")"})).attr("x",0).attr("y",0).attr("width",S).attr("height",(function(t,e){var n=g(t,e),r=v(t,e);return n>r?f(r)-f(n):f(n)-f(r)}))})),e}var n,r,i,o,a,s={top:0,right:0,bottom:0,left:0},l=null,u=null,c=Math.floor(1e4*Math.random()),d=d3.scale.linear(),f=d3.scale.linear(),p=function(t){return t.x},h=function(t){return t.y},g=function(t){return t.open},v=function(t){return t.close},m=function(t){return t.high},y=function(t){return t.low},x=[],b=[],k=!1,w=!0,M=t.utils.defaultColor(),A=!1,C=d3.dispatch("stateChange","changeState","renderEnd","chartClick","elementClick","elementDblClick","elementMouseover","elementMouseout","elementMousemove");return e.highlightPoint=function(t,r){e.clearHighlights(),n.select(".nv-candlestickBar .nv-tick-0-"+t).classed("hover",r)},e.clearHighlights=function(){n.select(".nv-candlestickBar .nv-tick.hover").classed("hover",!1)},e.dispatch=C,e.options=t.utils.optionsFunc.bind(e),e._options=Object.create({},{width:{get:function(){return l},set:function(t){l=t}},height:{get:function(){return u},set:function(t){u=t}},xScale:{get:function(){return d},set:function(t){d=t}},yScale:{get:function(){return f},set:function(t){f=t}},xDomain:{get:function(){return r},set:function(t){r=t}},yDomain:{get:function(){return i},set:function(t){i=t}},xRange:{get:function(){return o},set:function(t){o=t}},yRange:{get:function(){return a},set:function(t){a=t}},forceX:{get:function(){return x},set:function(t){x=t}},forceY:{get:function(){return b},set:function(t){b=t}},padData:{get:function(){return k},set:function(t){k=t}},clipEdge:{get:function(){return w},set:function(t){w=t}},id:{get:function(){return c},set:function(t){c=t}},interactive:{get:function(){return A},set:function(t){A=t}},x:{get:function(){return p},set:function(t){p=t}},y:{get:function(){return h},set:function(t){h=t}},open:{get:function(){return g()},set:function(t){g=t}},close:{get:function(){return v()},set:function(t){v=t}},high:{get:function(){return m},set:function(t){m=t}},low:{get:function(){return y},set:function(t){y=t}},margin:{get:function(){return s},set:function(t){s.top=null!=t.top?t.top:s.top,s.right=null!=t.right?t.right:s.right,s.bottom=null!=t.bottom?t.bottom:s.bottom,s.left=null!=t.left?t.left:s.left}},color:{get:function(){return M},set:function(e){M=t.utils.getColor(e)}}}),t.utils.initOptions(e),e},t.models.cumulativeLineChart=function(){"use strict";function e(f){return P.reset(),P.models(a),x&&P.models(s),b&&P.models(l),f.each((function(f){function E(){J.data([B]);var t=e.duration();e.duration(0),e.update(),e.duration(t)}var O=d3.select(this);t.utils.initSVG(O),O.classed("nv-chart-"+C,!0);var P,z=t.utils.availableWidth(v,O,p),V=t.utils.availableHeight(m,O,p);if(e.update=function(){0===D?O.call(e):O.transition().duration(D).call(e)},e.container=this,S.setter(I(f),e.update).getter(T(f)).update(),S.disabled=f.map((function(t){return!!t.disabled})),!W)for(P in W={},S)S[P]instanceof Array?W[P]=S[P].slice(0):W[P]=S[P];var H=d3.behavior.drag().on("dragstart",(function(t,n){d3.select(e.container).style("cursor","ew-resize")})).on("drag",(function(t,e){B.x=d3.event.x,B.i=Math.round(L.invert(B.x)),E()})).on("dragend",(function(t,n){d3.select(e.container).style("cursor","auto"),S.index=B.i,N.stateChange(S)}));if(!(f&&f.length&&f.filter((function(t){return t.values.length})).length))return t.utils.noData(e,O),e;O.selectAll(".nv-noData").remove(),i=a.xScale(),o=a.yScale(),L.domain([0,f[0].values.length-1]).range([0,z]).clamp(!0);f=n(B.i,f);void 0===_&&(_=r(f)),A?a.yDomain(null):(a.yDomain(_),a.clipEdge(!0));var Y=M?"none":"all",G=O.selectAll("g.nv-wrap.nv-cumulativeLine").data([f]),X=G.enter().append("g").attr("class","nvd3 nv-wrap nv-cumulativeLine").append("g"),j=G.select("g");if(X.append("g").attr("class","nv-interactive"),X.append("g").attr("class","nv-x nv-axis").style("pointer-events","none"),X.append("g").attr("class","nv-y nv-axis"),X.append("g").attr("class","nv-background"),X.append("g").attr("class","nv-linesWrap").style("pointer-events",Y),X.append("g").attr("class","nv-avgLinesWrap").style("pointer-events","none"),X.append("g").attr("class","nv-legendWrap"),X.append("g").attr("class","nv-controlsWrap"),y?(u.width(z),j.select(".nv-legendWrap").datum(f).call(u),h||u.height()===p.top||(p.top=u.height(),V=t.utils.availableHeight(m,O,p)),j.select(".nv-legendWrap").attr("transform","translate(0,"+-p.top+")")):j.select(".nv-legendWrap").selectAll("*").remove(),w){var R=[{key:"Re-scale y-axis",disabled:!A}];c.width(140).color(["#444","#444","#444"]).rightAlign(!1).margin({top:5,right:0,bottom:5,left:20}),j.select(".nv-controlsWrap").datum(R).attr("transform","translate(0,"+-p.top+")").call(c)}else j.select(".nv-controlsWrap").selectAll("*").remove();G.attr("transform","translate("+p.left+","+p.top+")"),k&&j.select(".nv-y.nv-axis").attr("transform","translate("+z+",0)");var Z=f.filter((function(t){return t.tempDisabled}));G.select(".tempDisabled").remove(),Z.length&&G.append("text").attr("class","tempDisabled").attr("x",z/2).attr("y","-.71em").style("text-anchor","end").text(Z.map((function(t){return t.key})).join(", ")+" values cannot be calculated for this time period."),M&&(d.width(z).height(V).margin({left:p.left,top:p.top}).svgContainer(O).xScale(i),G.select(".nv-interactive").call(d)),X.select(".nv-background").append("rect"),j.select(".nv-background rect").attr("width",z).attr("height",V),a.y((function(t){return t.display.y})).width(z).height(V).color(f.map((function(t,e){return t.color||g(t,e)})).filter((function(t,e){return!f[e].disabled&&!f[e].tempDisabled})));var q=j.select(".nv-linesWrap").datum(f.filter((function(t){return!t.disabled&&!t.tempDisabled})));q.call(a),f.forEach((function(t,e){t.seriesIndex=e}));var K=f.filter((function(t){return!t.disabled&&!!F(t)})),U=j.select(".nv-avgLinesWrap").selectAll("line").data(K,(function(t){return t.key})),Q=function(t){var e=o(F(t));return 0>e?0:e>V?V:e};U.enter().append("line").style("stroke-width",2).style("stroke-dasharray","10,10").style("stroke",(function(t,e){return a.color()(t,t.seriesIndex)})).attr("x1",0).attr("x2",z).attr("y1",Q).attr("y2",Q),U.style("stroke-opacity",(function(t){var e=o(F(t));return 0>e||e>V?0:1})).attr("x1",0).attr("x2",z).attr("y1",Q).attr("y2",Q),U.exit().remove();var J=q.selectAll(".nv-indexLine").data([B]);J.enter().append("rect").attr("class","nv-indexLine").attr("width",3).attr("x",-2).attr("fill","red").attr("fill-opacity",.5).style("pointer-events","all").call(H),J.attr("transform",(function(t){return"translate("+L(t.i)+",0)"})).attr("height",V),x&&(s.scale(i)._ticks(t.utils.calcTicksX(z/70,f)).tickSize(-V,0),j.select(".nv-x.nv-axis").attr("transform","translate(0,"+o.range()[0]+")"),j.select(".nv-x.nv-axis").call(s)),b&&(l.scale(o)._ticks(t.utils.calcTicksY(V/36,f)).tickSize(-z,0),j.select(".nv-y.nv-axis").call(l)),j.select(".nv-background rect").on("click",(function(){B.x=d3.mouse(this)[0],B.i=Math.round(L.invert(B.x)),S.index=B.i,N.stateChange(S),E()})),a.dispatch.on("elementClick",(function(t){B.i=t.pointIndex,B.x=L(B.i),S.index=B.i,N.stateChange(S),E()})),c.dispatch.on("legendClick",(function(t,n){t.disabled=!t.disabled,A=!t.disabled,S.rescaleY=A,A||(_=r(f)),N.stateChange(S),e.update()})),u.dispatch.on("stateChange",(function(t){for(var n in t)S[n]=t[n];N.stateChange(S),e.update()})),d.dispatch.on("elementMousemove",(function(n){a.clearHighlights();var r,i,o,u=[];if(f.filter((function(t,e){return t.seriesIndex=e,!(t.disabled||t.tempDisabled)})).forEach((function(s,l){i=t.interactiveBisect(s.values,n.pointXValue,e.x()),a.highlightPoint(l,i,!0);var c=s.values[i];void 0!==c&&(void 0===r&&(r=c),void 0===o&&(o=e.xScale()(e.x()(c,i))),u.push({key:s.key,value:e.y()(c,i),color:g(s,s.seriesIndex)}))})),u.length>2){var c=e.yScale().invert(n.mouseY),p=.03*Math.abs(e.yScale().domain()[0]-e.yScale().domain()[1]),h=t.nearestValueIndex(u.map((function(t){return t.value})),c,p);null!==h&&(u[h].highlight=!0)}var v=s.tickFormat()(e.x()(r,i),i);d.tooltip.valueFormatter((function(t,e){return l.tickFormat()(t)})).data({value:v,series:u})(),d.renderGuideLine(o)})),d.dispatch.on("elementMouseout",(function(t){a.clearHighlights()})),N.on("changeState",(function(t){void 0!==t.disabled&&(f.forEach((function(e,n){e.disabled=t.disabled[n]})),S.disabled=t.disabled),void 0!==t.index&&(B.i=t.index,B.x=L(B.i),S.index=t.index,J.data([B])),void 0!==t.rescaleY&&(A=t.rescaleY),e.update()}))})),P.renderEnd("cumulativeLineChart immediate"),e}function n(t,e){return z||(z=a.y()),e.map((function(e,n){if(!e.values)return e;var r=e.values[t];if(null==r)return e;var i=z(r,t);return Math.abs(i)<1e-5&&!O?(e.tempDisabled=!0,e):(e.tempDisabled=!1,e.values=e.values.map((function(t,e){return t.display={y:(z(t,e)-i)/i},t})),e)}))}function r(t){var e=t.filter((function(t){return!(t.disabled||t.tempDisabled)})).map((function(t,e){return d3.extent(t.values,(function(t){return t.display.y}))}));return[d3.min(e,(function(t){return t[0]})),d3.max(e,(function(t){return t[1]}))]}var i,o,a=t.models.line(),s=t.models.axis(),l=t.models.axis(),u=t.models.legend(),c=t.models.legend(),d=t.interactiveGuideline(),f=t.models.tooltip(),p={top:30,right:30,bottom:50,left:60},h=null,g=t.utils.defaultColor(),v=null,m=null,y=!0,x=!0,b=!0,k=!1,w=!0,M=!1,A=!0,C=a.id(),S=t.utils.state(),W=null,E=null,F=function(t){return t.average},N=d3.dispatch("stateChange","changeState","renderEnd"),D=250,O=!1;S.index=0,S.rescaleY=A,s.orient("bottom").tickPadding(7),l.orient(k?"right":"left"),f.valueFormatter((function(t,e){return l.tickFormat()(t,e)})).headerFormatter((function(t,e){return s.tickFormat()(t,e)})),c.updateState(!1);var _,L=d3.scale.linear(),B={i:0,x:0},P=t.utils.renderWatch(N,D),T=function(t){return function(){return{active:t.map((function(t){return!t.disabled})),index:B.i,rescaleY:A}}},I=function(t){return function(e){void 0!==e.index&&(B.i=e.index),void 0!==e.rescaleY&&(A=e.rescaleY),void 0!==e.active&&t.forEach((function(t,n){t.disabled=!e.active[n]}))}};a.dispatch.on("elementMouseover.tooltip",(function(t){var n={x:e.x()(t.point),y:e.y()(t.point),color:t.point.color};t.point=n,f.data(t).hidden(!1)})),a.dispatch.on("elementMouseout.tooltip",(function(t){f.hidden(!0)}));var z=null;return e.dispatch=N,e.lines=a,e.legend=u,e.controls=c,e.xAxis=s,e.yAxis=l,e.interactiveLayer=d,e.state=S,e.tooltip=f,e.options=t.utils.optionsFunc.bind(e),e._options=Object.create({},{width:{get:function(){return v},set:function(t){v=t}},height:{get:function(){return m},set:function(t){m=t}},showControls:{get:function(){return w},set:function(t){w=t}},showLegend:{get:function(){return y},set:function(t){y=t}},average:{get:function(){return F},set:function(t){F=t}},defaultState:{get:function(){return W},set:function(t){W=t}},noData:{get:function(){return E},set:function(t){E=t}},showXAxis:{get:function(){return x},set:function(t){x=t}},showYAxis:{get:function(){return b},set:function(t){b=t}},noErrorCheck:{get:function(){return O},set:function(t){O=t}},rescaleY:{get:function(){return A},set:function(t){A=t,e.state.rescaleY=t}},margin:{get:function(){return p},set:function(t){void 0!==t.top&&(p.top=t.top,h=t.top),p.right=void 0!==t.right?t.right:p.right,p.bottom=void 0!==t.bottom?t.bottom:p.bottom,p.left=void 0!==t.left?t.left:p.left}},color:{get:function(){return g},set:function(e){g=t.utils.getColor(e),u.color(g)}},useInteractiveGuideline:{get:function(){return M},set:function(t){M=t,!0===t&&(e.interactive(!1),e.useVoronoi(!1))}},rightAlignYAxis:{get:function(){return k},set:function(t){k=t,l.orient(t?"right":"left")}},duration:{get:function(){return D},set:function(t){D=t,a.duration(D),s.duration(D),l.duration(D),P.reset(D)}}}),t.utils.inheritOptions(e,a),t.utils.initOptions(e),e},t.models.discreteBar=function(){"use strict";function e(f){return A.reset(),f.each((function(e){var f=c-u.left-u.right,M=d-u.top-u.bottom;n=d3.select(this),t.utils.initSVG(n),e.forEach((function(t,e){t.values.forEach((function(t){t.series=e}))}));var C=r&&i?[]:e.map((function(t){return t.values.map((function(t,e){return{x:g(t,e),y:v(t,e),y0:t.y0}}))}));p.domain(r||d3.merge(C).map((function(t){return t.x}))).rangeBands(o||[0,f],.1),h.domain(i||d3.extent(d3.merge(C).map((function(t){return t.y})).concat(m))),x?h.range(a||[M-(h.domain()[0]<0?12:0),h.domain()[1]>0?12:0]):h.range(a||[M,0]),s=s||p,l=l||h.copy().range([h(0),h(0)]);var S=n.selectAll("g.nv-wrap.nv-discretebar").data([e]),W=S.enter().append("g").attr("class","nvd3 nv-wrap nv-discretebar").append("g");S.select("g"),W.append("g").attr("class","nv-groups"),S.attr("transform","translate("+u.left+","+u.top+")");var E=S.select(".nv-groups").selectAll(".nv-group").data((function(t){return t}),(function(t){return t.key}));E.enter().append("g").style("stroke-opacity",1e-6).style("fill-opacity",1e-6),E.exit().watchTransition(A,"discreteBar: exit groups").style("stroke-opacity",1e-6).style("fill-opacity",1e-6).remove(),E.attr("class",(function(t,e){return"nv-group nv-series-"+e})).classed("hover",(function(t){return t.hover})),E.watchTransition(A,"discreteBar: groups").style("stroke-opacity",1).style("fill-opacity",.75);var F=E.selectAll("g.nv-bar").data((function(t){return t.values}));F.exit().remove();var N=F.enter().append("g").attr("transform",(function(t,e,n){return"translate("+(p(g(t,e))+.05*p.rangeBand())+", "+h(0)+")"})).on("mouseover",(function(t,e){d3.select(this).classed("hover",!0),k.elementMouseover({data:t,index:e,color:d3.select(this).style("fill")})})).on("mouseout",(function(t,e){d3.select(this).classed("hover",!1),k.elementMouseout({data:t,index:e,color:d3.select(this).style("fill")})})).on("mousemove",(function(t,e){k.elementMousemove({data:t,index:e,color:d3.select(this).style("fill")})})).on("click",(function(t,e){k.elementClick({data:t,index:e,color:d3.select(this).style("fill"),event:d3.event,element:this}),d3.event.stopPropagation()})).on("dblclick",(function(t,e){k.elementDblClick({data:t,index:e,color:d3.select(this).style("fill")}),d3.event.stopPropagation()}));N.append("rect").attr("height",0).attr("width",.9*p.rangeBand()/e.length),x?(N.append("text").attr("text-anchor","middle"),F.select("text").text((function(t,e){return b(v(t,e))})).watchTransition(A,"discreteBar: bars text").attr("x",.9*p.rangeBand()/2).attr("y",(function(t,e){return v(t,e)<0?h(v(t,e))-h(0)+12:-4}))):F.selectAll("text").remove(),F.attr("class",(function(t,e){return v(t,e)<0?"nv-bar negative":"nv-bar positive"})).style("fill",(function(t,e){return t.color||y(t,e)})).style("stroke",(function(t,e){return t.color||y(t,e)})).select("rect").attr("class",w).watchTransition(A,"discreteBar: bars rect").attr("width",.9*p.rangeBand()/e.length),F.watchTransition(A,"discreteBar: bars").attr("transform",(function(t,e){return"translate("+(p(g(t,e))+.05*p.rangeBand())+", "+(v(t,e)<0?h(0):h(0)-h(v(t,e))<1?h(0)-1:h(v(t,e)))+")"})).select("rect").attr("height",(function(t,e){return Math.max(Math.abs(h(v(t,e))-h(0)),1)})),s=p.copy(),l=h.copy()})),A.renderEnd("discreteBar immediate"),e}var n,r,i,o,a,s,l,u={top:0,right:0,bottom:0,left:0},c=960,d=500,f=Math.floor(1e4*Math.random()),p=d3.scale.ordinal(),h=d3.scale.linear(),g=function(t){return t.x},v=function(t){return t.y},m=[0],y=t.utils.defaultColor(),x=!1,b=d3.format(",.2f"),k=d3.dispatch("chartClick","elementClick","elementDblClick","elementMouseover","elementMouseout","elementMousemove","renderEnd"),w="discreteBar",M=250,A=t.utils.renderWatch(k,M);return e.dispatch=k,e.options=t.utils.optionsFunc.bind(e),e._options=Object.create({},{width:{get:function(){return c},set:function(t){c=t}},height:{get:function(){return d},set:function(t){d=t}},forceY:{get:function(){return m},set:function(t){m=t}},showValues:{get:function(){return x},set:function(t){x=t}},x:{get:function(){return g},set:function(t){g=t}},y:{get:function(){return v},set:function(t){v=t}},xScale:{get:function(){return p},set:function(t){p=t}},yScale:{get:function(){return h},set:function(t){h=t}},xDomain:{get:function(){return r},set:function(t){r=t}},yDomain:{get:function(){return i},set:function(t){i=t}},xRange:{get:function(){return o},set:function(t){o=t}},yRange:{get:function(){return a},set:function(t){a=t}},valueFormat:{get:function(){return b},set:function(t){b=t}},id:{get:function(){return f},set:function(t){f=t}},rectClass:{get:function(){return w},set:function(t){w=t}},margin:{get:function(){return u},set:function(t){u.top=void 0!==t.top?t.top:u.top,u.right=void 0!==t.right?t.right:u.right,u.bottom=void 0!==t.bottom?t.bottom:u.bottom,u.left=void 0!==t.left?t.left:u.left}},color:{get:function(){return y},set:function(e){y=t.utils.getColor(e)}},duration:{get:function(){return M},set:function(t){M=t,A.reset(M)}}}),t.utils.initOptions(e),e},t.models.discreteBarChart=function(){"use strict";function e(l){return A.reset(),A.models(i),g&&A.models(o),v&&A.models(a),l.each((function(l){var p=d3.select(this);t.utils.initSVG(p);var k=t.utils.availableWidth(d,p,u),A=t.utils.availableHeight(f,p,u);if(e.update=function(){w.beforeUpdate(),p.transition().duration(M).call(e)},e.container=this,!(l&&l.length&&l.filter((function(t){return t.values.length})).length))return t.utils.noData(e,p),e;p.selectAll(".nv-noData").remove(),n=i.xScale(),r=i.yScale().clamp(!0);var C=p.selectAll("g.nv-wrap.nv-discreteBarWithAxes").data([l]),S=C.enter().append("g").attr("class","nvd3 nv-wrap nv-discreteBarWithAxes").append("g"),W=S.append("defs"),E=C.select("g");S.append("g").attr("class","nv-x nv-axis"),S.append("g").attr("class","nv-y nv-axis").append("g").attr("class","nv-zeroLine").append("line"),S.append("g").attr("class","nv-barsWrap"),S.append("g").attr("class","nv-legendWrap"),E.attr("transform","translate("+u.left+","+u.top+")"),h?(s.width(k),E.select(".nv-legendWrap").datum(l).call(s),c||s.height()===u.top||(u.top=s.height(),A=t.utils.availableHeight(f,p,u)),C.select(".nv-legendWrap").attr("transform","translate(0,"+-u.top+")")):E.select(".nv-legendWrap").selectAll("*").remove(),m&&E.select(".nv-y.nv-axis").attr("transform","translate("+k+",0)"),i.width(k).height(A);var F=E.select(".nv-barsWrap").datum(l.filter((function(t){return!t.disabled})));if(F.transition().call(i),W.append("clipPath").attr("id","nv-x-label-clip-"+i.id()).append("rect"),E.select("#nv-x-label-clip-"+i.id()+" rect").attr("width",n.rangeBand()*(y?2:1)).attr("height",16).attr("x",-n.rangeBand()/(y?1:2)),g){o.scale(n)._ticks(t.utils.calcTicksX(k/100,l)).tickSize(-A,0),E.select(".nv-x.nv-axis").attr("transform","translate(0,"+(r.range()[0]+(i.showValues()&&r.domain()[0]<0?16:0))+")"),E.select(".nv-x.nv-axis").call(o);var N=E.select(".nv-x.nv-axis").selectAll("g");y&&N.selectAll("text").attr("transform",(function(t,e,n){return"translate(0,"+(n%2==0?"5":"17")+")"})),b&&N.selectAll(".tick text").attr("transform","rotate("+b+" 0,0)").style("text-anchor",b>0?"start":"end"),x&&E.selectAll(".tick text").call(t.utils.wrapTicks,e.xAxis.rangeBand())}v&&(a.scale(r)._ticks(t.utils.calcTicksY(A/36,l)).tickSize(-k,0),E.select(".nv-y.nv-axis").call(a)),E.select(".nv-zeroLine line").attr("x1",0).attr("x2",m?-k:k).attr("y1",r(0)).attr("y2",r(0))})),A.renderEnd("discreteBar chart immediate"),e}var n,r,i=t.models.discreteBar(),o=t.models.axis(),a=t.models.axis(),s=t.models.legend(),l=t.models.tooltip(),u={top:15,right:10,bottom:50,left:60},c=null,d=null,f=null,p=t.utils.getColor(),h=!1,g=!0,v=!0,m=!1,y=!1,x=!1,b=0,k=null,w=d3.dispatch("beforeUpdate","renderEnd"),M=250;o.orient("bottom").showMaxMin(!1).tickFormat((function(t){return t})),a.orient(m?"right":"left").tickFormat(d3.format(",.1f")),l.duration(0).headerEnabled(!1).valueFormatter((function(t,e){return a.tickFormat()(t,e)})).keyFormatter((function(t,e){return o.tickFormat()(t,e)}));var A=t.utils.renderWatch(w,M);return i.dispatch.on("elementMouseover.tooltip",(function(t){t.series={key:e.x()(t.data),value:e.y()(t.data),color:t.color},l.data(t).hidden(!1)})),i.dispatch.on("elementMouseout.tooltip",(function(t){l.hidden(!0)})),i.dispatch.on("elementMousemove.tooltip",(function(t){l()})),e.dispatch=w,e.discretebar=i,e.legend=s,e.xAxis=o,e.yAxis=a,e.tooltip=l,e.options=t.utils.optionsFunc.bind(e),e._options=Object.create({},{width:{get:function(){return d},set:function(t){d=t}},height:{get:function(){return f},set:function(t){f=t}},showLegend:{get:function(){return h},set:function(t){h=t}},staggerLabels:{get:function(){return y},set:function(t){y=t}},rotateLabels:{get:function(){return b},set:function(t){b=t}},wrapLabels:{get:function(){return x},set:function(t){x=!!t}},showXAxis:{get:function(){return g},set:function(t){g=t}},showYAxis:{get:function(){return v},set:function(t){v=t}},noData:{get:function(){return k},set:function(t){k=t}},margin:{get:function(){return u},set:function(t){void 0!==t.top&&(u.top=t.top,c=t.top),u.right=void 0!==t.right?t.right:u.right,u.bottom=void 0!==t.bottom?t.bottom:u.bottom,u.left=void 0!==t.left?t.left:u.left}},duration:{get:function(){return M},set:function(t){M=t,A.reset(M),i.duration(M),o.duration(M),a.duration(M)}},color:{get:function(){return p},set:function(e){p=t.utils.getColor(e),i.color(p),s.color(p)}},rightAlignYAxis:{get:function(){return m},set:function(t){m=t,a.orient(t?"right":"left")}}}),t.utils.inheritOptions(e,i),t.utils.initOptions(e),e},t.models.distribution=function(){"use strict";function e(i){return f.reset(),i.each((function(e){var i=("x"===a?(r.left,r.right):(r.top,r.bottom),"x"==a?"y":"x"),c=d3.select(this);t.utils.initSVG(c),n=n||u;var d=c.selectAll("g.nv-distribution").data([e]),p=(d.enter().append("g").attr("class","nvd3 nv-distribution").append("g"),d.select("g"));d.attr("transform","translate("+r.left+","+r.top+")");var h=p.selectAll("g.nv-dist").data((function(t){return t}),(function(t){return t.key}));h.enter().append("g"),h.attr("class",(function(t,e){return"nv-dist nv-series-"+e})).style("stroke",(function(t,e){return l(t,e)}));var g=h.selectAll("line.nv-dist"+a).data((function(t){return t.values}));g.enter().append("line").attr(a+"1",(function(t,e){return n(s(t,e))})).attr(a+"2",(function(t,e){return n(s(t,e))})),f.transition(h.exit().selectAll("line.nv-dist"+a),"dist exit").attr(a+"1",(function(t,e){return u(s(t,e))})).attr(a+"2",(function(t,e){return u(s(t,e))})).style("stroke-opacity",0).remove(),g.attr("class",(function(t,e){return"nv-dist"+a+" nv-dist"+a+"-"+e})).attr(i+"1",0).attr(i+"2",o),f.transition(g,"dist").attr(a+"1",(function(t,e){return u(s(t,e))})).attr(a+"2",(function(t,e){return u(s(t,e))})),n=u.copy()})),f.renderEnd("distribution immediate"),e}var n,r={top:0,right:0,bottom:0,left:0},i=400,o=8,a="x",s=function(t){return t[a]},l=t.utils.defaultColor(),u=d3.scale.linear(),c=250,d=d3.dispatch("renderEnd"),f=t.utils.renderWatch(d,c);return e.options=t.utils.optionsFunc.bind(e),e.dispatch=d,e.margin=function(t){return arguments.length?(r.top=void 0!==t.top?t.top:r.top,r.right=void 0!==t.right?t.right:r.right,r.bottom=void 0!==t.bottom?t.bottom:r.bottom,r.left=void 0!==t.left?t.left:r.left,e):r},e.width=function(t){return arguments.length?(i=t,e):i},e.axis=function(t){return arguments.length?(a=t,e):a},e.size=function(t){return arguments.length?(o=t,e):o},e.getData=function(t){return arguments.length?(s=d3.functor(t),e):s},e.scale=function(t){return arguments.length?(u=t,e):u},e.color=function(n){return arguments.length?(l=t.utils.getColor(n),e):l},e.duration=function(t){return arguments.length?(c=t,f.reset(c),e):c},e},t.models.focus=function(e){"use strict";function n(b){return x.reset(),x.models(e),f&&x.models(o),p&&x.models(a),b.each((function(x){function b(t){g=s.empty()?null:s.extent();var e=s.empty()?r.domain():s.extent();m.brush({extent:e,brush:s}),s.empty()||s.extent(g),E.data([s.empty()?r.domain():g]).each((function(t,e){var n=r(t[0])-r.range()[0],i=w-r(t[1]);d3.select(this).select(".left").attr("width",0>n?0:n),d3.select(this).select(".right").attr("x",r(t[1])).attr("width",0>i?0:i)})),t&&m.onBrush(e)}var k=d3.select(this);t.utils.initSVG(k);var w=t.utils.availableWidth(c,k,l),M=d-l.top-l.bottom;n.update=function(){0===v?k.call(n):k.transition().duration(v).call(n)},n.container=this,r=e.xScale(),i=e.yScale();var A=k.selectAll("g.nv-focus").data([x]),C=A.enter().append("g").attr("class","nvd3 nv-focus").append("g"),S=A.select("g");A.attr("transform","translate("+l.left+","+l.top+")"),C.append("g").attr("class","nv-background").append("rect"),C.append("g").attr("class","nv-x nv-axis"),C.append("g").attr("class","nv-y nv-axis"),C.append("g").attr("class","nv-contentWrap"),C.append("g").attr("class","nv-brushBackground"),C.append("g").attr("class","nv-x nv-brush"),h&&S.select(".nv-y.nv-axis").attr("transform","translate("+w+",0)"),S.select(".nv-background rect").attr("width",w).attr("height",M),e.width(w).height(M).color(x.map((function(t,e){return t.color||u(t,e)})).filter((function(t,e){return!x[e].disabled})));var W=S.select(".nv-contentWrap").datum(x.filter((function(t){return!t.disabled})));d3.transition(W).call(e),s.x(r).on("brush",(function(){b(y)})),s.on("brushend",(function(){y||m.onBrush(s.empty()?r.domain():s.extent())})),g&&s.extent(g);var E=S.select(".nv-brushBackground").selectAll("g").data([g||s.extent()]),F=E.enter().append("g");F.append("rect").attr("class","left").attr("x",0).attr("y",0).attr("height",M),F.append("rect").attr("class","right").attr("x",0).attr("y",0).attr("height",M);var N=S.select(".nv-x.nv-brush").call(s);N.selectAll("rect").attr("height",M),N.selectAll(".resize").append("path").attr("d",(function(t){var e=+("e"==t),n=e?1:-1,r=M/3;return"M"+.5*n+","+r+"A6,6 0 0 "+e+" "+6.5*n+","+(r+6)+"V"+(2*r-6)+"A6,6 0 0 "+e+" "+.5*n+","+2*r+"ZM"+2.5*n+","+(r+8)+"V"+(2*r-8)+"M"+4.5*n+","+(r+8)+"V"+(2*r-8)})),b(!0),S.select(".nv-background rect").attr("width",w).attr("height",M),f&&(o.scale(r)._ticks(t.utils.calcTicksX(w/100,x)).tickSize(-M,0),S.select(".nv-x.nv-axis").attr("transform","translate(0,"+i.range()[0]+")"),d3.transition(S.select(".nv-x.nv-axis")).call(o)),p&&(a.scale(i)._ticks(t.utils.calcTicksY(M/36,x)).tickSize(-w,0),d3.transition(S.select(".nv-y.nv-axis")).call(a)),S.select(".nv-x.nv-axis").attr("transform","translate(0,"+i.range()[0]+")")})),x.renderEnd("focus immediate"),n}e=e||t.models.line();var r,i,o=t.models.axis(),a=t.models.axis(),s=d3.svg.brush(),l={top:10,right:0,bottom:30,left:0},u=t.utils.defaultColor(),c=null,d=70,f=!0,p=!1,h=!1,g=null,v=250,m=d3.dispatch("brush","onBrush","renderEnd"),y=!0;e.interactive(!1),e.pointActive((function(t){return!1}));var x=t.utils.renderWatch(m,v);return n.dispatch=m,n.content=e,n.brush=s,n.xAxis=o,n.yAxis=a,n.options=t.utils.optionsFunc.bind(n),n._options=Object.create({},{width:{get:function(){return c},set:function(t){c=t}},height:{get:function(){return d},set:function(t){d=t}},showXAxis:{get:function(){return f},set:function(t){f=t}},showYAxis:{get:function(){return p},set:function(t){p=t}},brushExtent:{get:function(){return g},set:function(t){g=t}},syncBrushing:{get:function(){return y},set:function(t){y=t}},margin:{get:function(){return l},set:function(t){l.top=void 0!==t.top?t.top:l.top,l.right=void 0!==t.right?t.right:l.right,l.bottom=void 0!==t.bottom?t.bottom:l.bottom,l.left=void 0!==t.left?t.left:l.left}},duration:{get:function(){return v},set:function(t){v=t,x.reset(v),e.duration(v),o.duration(v),a.duration(v)}},color:{get:function(){return u},set:function(n){u=t.utils.getColor(n),e.color(u)}},interpolate:{get:function(){return e.interpolate()},set:function(t){e.interpolate(t)}},xTickFormat:{get:function(){return o.tickFormat()},set:function(t){o.tickFormat(t)}},yTickFormat:{get:function(){return a.tickFormat()},set:function(t){a.tickFormat(t)}},x:{get:function(){return e.x()},set:function(t){e.x(t)}},y:{get:function(){return e.y()},set:function(t){e.y(t)}},rightAlignYAxis:{get:function(){return h},set:function(t){h=t,a.orient(h?"right":"left")}}}),t.utils.inheritOptions(n,e),t.utils.initOptions(n),n},t.models.forceDirectedGraph=function(){"use strict";function e(a){return w.reset(),a.each((function(a){o=d3.select(this),t.utils.initSVG(o);var u=t.utils.availableWidth(r,o,n),b=t.utils.availableHeight(i,o,n);if(o.attr("width",u).attr("height",b),!(a&&a.links&&a.nodes))return t.utils.noData(e,o),e;o.selectAll(".nv-noData").remove(),o.selectAll("*").remove();var k=new Set;a.nodes.forEach((function(t){Object.keys(t).forEach((function(t){k.add(t)}))}));var w=d3.layout.force().nodes(a.nodes).links(a.links).size([u,b]).linkStrength(c).friction(d).linkDistance(f).charge(p).gravity(h).theta(g).alpha(v).start(),M=o.selectAll(".link").data(a.links).enter().append("line").attr("class","nv-force-link").style("stroke-width",(function(t){return Math.sqrt(t.value)})),A=o.selectAll(".node").data(a.nodes).enter().append("g").attr("class","nv-force-node").call(w.drag);A.append("circle").attr("r",m).style("fill",(function(t){return s(t)})).on("mouseover",(function(t){o.select(".nv-series-"+t.seriesIndex+" .nv-distx-"+t.pointIndex).attr("y1",t.py),o.select(".nv-series-"+t.seriesIndex+" .nv-disty-"+t.pointIndex).attr("x2",t.px);var e=s(t);t.series=[],k.forEach((function(n){t.series.push({color:e,key:n,value:t[n]})})),l.data(t).hidden(!1)})).on("mouseout",(function(t){l.hidden(!0)})),l.headerFormatter((function(t){return"Node"})),x(M),y(A),w.on("tick",(function(){M.attr("x1",(function(t){return t.source.x})).attr("y1",(function(t){return t.source.y})).attr("x2",(function(t){return t.target.x})).attr("y2",(function(t){return t.target.y})),A.attr("transform",(function(t){return"translate("+t.x+", "+t.y+")"}))}))})),e}var n={top:2,right:0,bottom:2,left:0},r=400,i=32,o=null,a=d3.dispatch("renderEnd"),s=t.utils.getColor(["#000"]),l=t.models.tooltip(),u=null,c=.1,d=.9,f=30,p=-120,h=.1,g=.8,v=.1,m=5,y=function(t){},x=function(t){},b=d3.functor(0),k=d3.functor(0),w=t.utils.renderWatch(a);return e.options=t.utils.optionsFunc.bind(e),e._options=Object.create({},{width:{get:function(){return r},set:function(t){r=t}},height:{get:function(){return i},set:function(t){i=t}},linkStrength:{get:function(){return c},set:function(t){c=t}},friction:{get:function(){return d},set:function(t){d=t}},linkDist:{get:function(){return f},set:function(t){f=t}},charge:{get:function(){return p},set:function(t){p=t}},gravity:{get:function(){return h},set:function(t){h=t}},theta:{get:function(){return g},set:function(t){g=t}},alpha:{get:function(){return v},set:function(t){v=t}},radius:{get:function(){return m},set:function(t){m=t}},x:{get:function(){return b},set:function(t){b=d3.functor(t)}},y:{get:function(){return k},set:function(t){k=d3.functor(t)}},margin:{get:function(){return n},set:function(t){n.top=void 0!==t.top?t.top:n.top,n.right=void 0!==t.right?t.right:n.right,n.bottom=void 0!==t.bottom?t.bottom:n.bottom,n.left=void 0!==t.left?t.left:n.left}},color:{get:function(){return s},set:function(e){s=t.utils.getColor(e)}},noData:{get:function(){return u},set:function(t){u=t}},nodeExtras:{get:function(){return y},set:function(t){y=t}},linkExtras:{get:function(){return x},set:function(t){x=t}}}),e.dispatch=a,e.tooltip=l,t.utils.initOptions(e),e},t.models.furiousLegend=function(){"use strict";function e(m){function y(t,e){return"furious"!=v?"#000":h?t.disengaged?s(t,e):"#fff":h?void 0:t.disabled?s(t,e):"#fff"}function x(t,e){return h&&"furious"==v?t.disengaged?"#fff":s(t,e):t.disabled?"#fff":s(t,e)}return m.each((function(e){var m=r-n.left-n.right,b=d3.select(this);t.utils.initSVG(b);var k=b.selectAll("g.nv-legend").data([e]),w=(k.enter().append("g").attr("class","nvd3 nv-legend").append("g"),k.select("g"));k.attr("transform","translate("+n.left+","+n.top+")");var M,A=w.selectAll(".nv-series").data((function(t){return"furious"!=v?t:t.filter((function(t){return!!h||!t.disengaged}))})),C=A.enter().append("g").attr("class","nv-series");if("classic"==v)C.append("circle").style("stroke-width",2).attr("class","nv-legend-symbol").attr("r",5),M=A.select("circle");else if("furious"==v){C.append("rect").style("stroke-width",2).attr("class","nv-legend-symbol").attr("rx",3).attr("ry",3),M=A.select("rect"),C.append("g").attr("class","nv-check-box").property("innerHTML",'<path d="M0.5,5 L22.5,5 L22.5,26.5 L0.5,26.5 L0.5,5 Z" class="nv-box"></path><path d="M5.5,12.8618467 L11.9185089,19.2803556 L31,0.198864511" class="nv-check"></path>').attr("transform","translate(-10,-8)scale(0.5)"),A.select(".nv-check-box").each((function(t,e){d3.select(this).selectAll("path").attr("stroke",y(t,e))}))}C.append("text").attr("text-anchor","start").attr("class","nv-legend-text").attr("dy",".32em").attr("dx","8");var S,W=A.select("text.nv-legend-text");switch(A.on("mouseover",(function(t,e){g.legendMouseover(t,e)})).on("mouseout",(function(t,e){g.legendMouseout(t,e)})).on("click",(function(t,e){g.legendClick(t,e);var n=A.data();if(f){if("classic"==v)p?(n.forEach((function(t){t.disabled=!0})),t.disabled=!1):(t.disabled=!t.disabled,n.every((function(t){return t.disabled}))&&n.forEach((function(t){t.disabled=!1})));else if("furious"==v)if(h)t.disengaged=!t.disengaged,t.userDisabled=null==t.userDisabled?!!t.disabled:t.userDisabled,t.disabled=t.disengaged||t.userDisabled;else if(!h){t.disabled=!t.disabled,t.userDisabled=t.disabled;var r=n.filter((function(t){return!t.disengaged}));r.every((function(t){return t.userDisabled}))&&n.forEach((function(t){t.disabled=t.userDisabled=!1}))}g.stateChange({disabled:n.map((function(t){return!!t.disabled})),disengaged:n.map((function(t){return!!t.disengaged}))})}})).on("dblclick",(function(t,e){if(("furious"!=v||!h)&&(g.legendDblclick(t,e),f)){var n=A.data();n.forEach((function(t){t.disabled=!0,"furious"==v&&(t.userDisabled=t.disabled)})),t.disabled=!1,"furious"==v&&(t.userDisabled=t.disabled),g.stateChange({disabled:n.map((function(t){return!!t.disabled}))})}})),A.classed("nv-disabled",(function(t){return t.userDisabled})),A.exit().remove(),W.attr("fill",y).text((function(t){return a(o(t))})),v){case"furious":S=23;break;case"classic":S=20}if(u){var E=[];A.each((function(e,n){var r,i;if(a(o(e))&&a(o(e)).length>l){var s=a(o(e)).substring(0,l);r=d3.select(this).select("text").text(s+"..."),d3.select(this).append("svg:title").text(a(o(e)))}else r=d3.select(this).select("text");try{if(0>=(i=r.node().getComputedTextLength()))throw Error()}catch(e){i=t.utils.calcApproxTextWidth(r)}E.push(i+c)}));for(var F=0,N=0,D=[];m>N&&F<E.length;)D[F]=E[F],N+=E[F++];for(0===F&&(F=1);N>m&&F>1;){D=[],F--;for(var O=0;O<E.length;O++)E[O]>(D[O%F]||0)&&(D[O%F]=E[O]);N=D.reduce((function(t,e,n,r){return t+e}))}for(var _=[],L=0,B=0;F>L;L++)_[L]=B,B+=D[L];A.attr("transform",(function(t,e){return"translate("+_[e%F]+","+(5+Math.floor(e/F)*S)+")"})),d?w.attr("transform","translate("+(r-n.right-N)+","+n.top+")"):w.attr("transform","translate(0,"+n.top+")"),i=n.top+n.bottom+Math.ceil(E.length/F)*S}else{var P,T=5,I=5,z=0;A.attr("transform",(function(t,e){var i=d3.select(this).select("text").node().getComputedTextLength()+c;return P=I,r<n.left+n.right+P+i&&(I=P=5,T+=S),(I+=i)>z&&(z=I),"translate("+P+","+T+")"})),w.attr("transform","translate("+(r-n.right-z)+","+n.top+")"),i=n.top+n.bottom+T+15}"furious"==v&&M.attr("width",(function(t,e){return W[0][e].getComputedTextLength()+27})).attr("height",18).attr("y",-9).attr("x",-15),M.style("fill",x).style("stroke",(function(t,e){return t.color||s(t,e)}))})),e}var n={top:5,right:0,bottom:5,left:0},r=400,i=20,o=function(t){return t.key},a=function(t){return t},s=t.utils.getColor(),l=20,u=!0,c=28,d=!0,f=!0,p=!1,h=!1,g=d3.dispatch("legendClick","legendDblclick","legendMouseover","legendMouseout","stateChange"),v="classic";return e.dispatch=g,e.options=t.utils.optionsFunc.bind(e),e._options=Object.create({},{width:{get:function(){return r},set:function(t){r=t}},height:{get:function(){return i},set:function(t){i=t}},key:{get:function(){return o},set:function(t){o=t}},keyFormatter:{get:function(){return a},set:function(t){a=t}},align:{get:function(){return u},set:function(t){u=t}},rightAlign:{get:function(){return d},set:function(t){d=t}},maxKeyLength:{get:function(){return l},set:function(t){l=t}},padding:{get:function(){return c},set:function(t){c=t}},updateState:{get:function(){return f},set:function(t){f=t}},radioButtonMode:{get:function(){return p},set:function(t){p=t}},expanded:{get:function(){return h},set:function(t){h=t}},vers:{get:function(){return v},set:function(t){v=t}},margin:{get:function(){return n},set:function(t){n.top=void 0!==t.top?t.top:n.top,n.right=void 0!==t.right?t.right:n.right,n.bottom=void 0!==t.bottom?t.bottom:n.bottom,n.left=void 0!==t.left?t.left:n.left}},color:{get:function(){return s},set:function(e){s=t.utils.getColor(e)}}}),t.utils.initOptions(e),e},t.models.historicalBar=function(){"use strict";function e(M){return M.each((function(e){w.reset(),c=d3.select(this);var M=t.utils.availableWidth(s,c,a),A=t.utils.availableHeight(l,c,a);t.utils.initSVG(c),d.domain(n||d3.extent(e[0].values.map(p).concat(g))),m?d.range(i||[.5*M/e[0].values.length,M*(e[0].values.length-.5)/e[0].values.length]):d.range(i||[0,M]),f.domain(r||d3.extent(e[0].values.map(h).concat(v))).range(o||[A,0]),d.domain()[0]===d.domain()[1]&&(d.domain()[0]?d.domain([d.domain()[0]-.01*d.domain()[0],d.domain()[1]+.01*d.domain()[1]]):d.domain([-1,1])),f.domain()[0]===f.domain()[1]&&(f.domain()[0]?f.domain([f.domain()[0]+.01*f.domain()[0],f.domain()[1]-.01*f.domain()[1]]):f.domain([-1,1]));var C=c.selectAll("g.nv-wrap.nv-historicalBar-"+u).data([e[0].values]),S=C.enter().append("g").attr("class","nvd3 nv-wrap nv-historicalBar-"+u),W=S.append("defs"),E=S.append("g"),F=C.select("g");E.append("g").attr("class","nv-bars"),C.attr("transform","translate("+a.left+","+a.top+")"),c.on("click",(function(t,e){b.chartClick({data:t,index:e,pos:d3.event,id:u})})),W.append("clipPath").attr("id","nv-chart-clip-path-"+u).append("rect"),C.select("#nv-chart-clip-path-"+u+" rect").attr("width",M).attr("height",A),F.attr("clip-path",y?"url(#nv-chart-clip-path-"+u+")":"");var N=C.select(".nv-bars").selectAll(".nv-bar").data((function(t){return t}),(function(t,e){return p(t,e)}));N.exit().remove(),N.enter().append("rect").attr("x",0).attr("y",(function(e,n){return t.utils.NaNtoZero(f(Math.max(0,h(e,n))))})).attr("height",(function(e,n){return t.utils.NaNtoZero(Math.abs(f(h(e,n))-f(0)))})).attr("transform",(function(t,n){return"translate("+(d(p(t,n))-M/e[0].values.length*.45)+",0)"})).on("mouseover",(function(t,e){k&&(d3.select(this).classed("hover",!0),b.elementMouseover({data:t,index:e,color:d3.select(this).style("fill")}))})).on("mouseout",(function(t,e){k&&(d3.select(this).classed("hover",!1),b.elementMouseout({data:t,index:e,color:d3.select(this).style("fill")}))})).on("mousemove",(function(t,e){k&&b.elementMousemove({data:t,index:e,color:d3.select(this).style("fill")})})).on("click",(function(t,e){if(k){b.elementClick({data:t,index:e,color:d3.select(this).style("fill"),event:d3.event,element:this}),d3.event.stopPropagation()}})).on("dblclick",(function(t,e){k&&(b.elementDblClick({data:t,index:e,color:d3.select(this).style("fill")}),d3.event.stopPropagation())})),N.attr("fill",(function(t,e){return x(t,e)})).attr("class",(function(t,e,n){return(h(t,e)<0?"nv-bar negative":"nv-bar positive")+" nv-bar-"+n+"-"+e})).watchTransition(w,"bars").attr("transform",(function(t,n){return"translate("+(d(p(t,n))-M/e[0].values.length*.45)+",0)"})).attr("width",M/e[0].values.length*.9),N.watchTransition(w,"bars").attr("y",(function(e,n){var r=h(e,n)<0?f(0):f(0)-f(h(e,n))<1?f(0)-1:f(h(e,n));return t.utils.NaNtoZero(r)})).attr("height",(function(e,n){return t.utils.NaNtoZero(Math.max(Math.abs(f(h(e,n))-f(0)),1))}))})),w.renderEnd("historicalBar immediate"),e}var n,r,i,o,a={top:0,right:0,bottom:0,left:0},s=null,l=null,u=Math.floor(1e4*Math.random()),c=null,d=d3.scale.linear(),f=d3.scale.linear(),p=function(t){return t.x},h=function(t){return t.y},g=[],v=[0],m=!1,y=!0,x=t.utils.defaultColor(),b=d3.dispatch("chartClick","elementClick","elementDblClick","elementMouseover","elementMouseout","elementMousemove","renderEnd"),k=!0,w=t.utils.renderWatch(b,0);return e.highlightPoint=function(t,e){c.select(".nv-bars .nv-bar-0-"+t).classed("hover",e)},e.clearHighlights=function(){c.select(".nv-bars .nv-bar.hover").classed("hover",!1)},e.dispatch=b,e.options=t.utils.optionsFunc.bind(e),e._options=Object.create({},{width:{get:function(){return s},set:function(t){s=t}},height:{get:function(){return l},set:function(t){l=t}},forceX:{get:function(){return g},set:function(t){g=t}},forceY:{get:function(){return v},set:function(t){v=t}},padData:{get:function(){return m},set:function(t){m=t}},x:{get:function(){return p},set:function(t){p=t}},y:{get:function(){return h},set:function(t){h=t}},xScale:{get:function(){return d},set:function(t){d=t}},yScale:{get:function(){return f},set:function(t){f=t}},xDomain:{get:function(){return n},set:function(t){n=t}},yDomain:{get:function(){return r},set:function(t){r=t}},xRange:{get:function(){return i},set:function(t){i=t}},yRange:{get:function(){return o},set:function(t){o=t}},clipEdge:{get:function(){return y},set:function(t){y=t}},id:{get:function(){return u},set:function(t){u=t}},interactive:{get:function(){return k},set:function(t){k=t}},margin:{get:function(){return a},set:function(t){a.top=void 0!==t.top?t.top:a.top,a.right=void 0!==t.right?t.right:a.right,a.bottom=void 0!==t.bottom?t.bottom:a.bottom,a.left=void 0!==t.left?t.left:a.left}},color:{get:function(){return x},set:function(e){x=t.utils.getColor(e)}}}),t.utils.initOptions(e),e},t.models.historicalBarChart=function(e){"use strict";function n(e){return e.each((function(c){S.reset(),S.models(o),m&&S.models(a),y&&S.models(s);var M=d3.select(this);t.utils.initSVG(M);var W,E=t.utils.availableWidth(h,M,d),F=t.utils.availableHeight(g,M,d);if(n.update=function(){M.transition().duration(C).call(n)},n.container=this,k.disabled=c.map((function(t){return!!t.disabled})),!w)for(W in w={},k)k[W]instanceof Array?w[W]=k[W].slice(0):w[W]=k[W];if(!(c&&c.length&&c.filter((function(t){return t.values.length})).length))return t.utils.noData(n,M),n;M.selectAll(".nv-noData").remove(),r=o.xScale(),i=o.yScale();var N=M.selectAll("g.nv-wrap.nv-historicalBarChart").data([c]),D=N.enter().append("g").attr("class","nvd3 nv-wrap nv-historicalBarChart").append("g"),O=N.select("g");D.append("g").attr("class","nv-x nv-axis"),D.append("g").attr("class","nv-y nv-axis"),D.append("g").attr("class","nv-barsWrap"),D.append("g").attr("class","nv-legendWrap"),D.append("g").attr("class","nv-interactive"),v?(l.width(E),O.select(".nv-legendWrap").datum(c).call(l),f||l.height()===d.top||(d.top=l.height(),F=t.utils.availableHeight(g,M,d)),N.select(".nv-legendWrap").attr("transform","translate(0,"+-d.top+")")):O.select(".nv-legendWrap").selectAll("*").remove(),N.attr("transform","translate("+d.left+","+d.top+")"),x&&O.select(".nv-y.nv-axis").attr("transform","translate("+E+",0)"),b&&(u.width(E).height(F).margin({left:d.left,top:d.top}).svgContainer(M).xScale(r),N.select(".nv-interactive").call(u)),o.width(E).height(F).color(c.map((function(t,e){return t.color||p(t,e)})).filter((function(t,e){return!c[e].disabled})));var _=O.select(".nv-barsWrap").datum(c.filter((function(t){return!t.disabled})));_.transition().call(o),m&&(a.scale(r)._ticks(t.utils.calcTicksX(E/100,c)).tickSize(-F,0),O.select(".nv-x.nv-axis").attr("transform","translate(0,"+i.range()[0]+")"),O.select(".nv-x.nv-axis").transition().call(a)),y&&(s.scale(i)._ticks(t.utils.calcTicksY(F/36,c)).tickSize(-E,0),O.select(".nv-y.nv-axis").transition().call(s)),u.dispatch.on("elementMousemove",(function(e){o.clearHighlights();var r,i,l,d=[];c.filter((function(t,e){return t.seriesIndex=e,!t.disabled})).forEach((function(a,s){i=t.interactiveBisect(a.values,e.pointXValue,n.x()),o.highlightPoint(i,!0);var u=a.values[i];void 0!==u&&(void 0===r&&(r=u),void 0===l&&(l=n.xScale()(n.x()(u,i))),d.push({key:a.key,value:n.y()(u,i),color:p(a,a.seriesIndex),data:a.values[i]}))}));var f=a.tickFormat()(n.x()(r,i));u.tooltip.valueFormatter((function(t,e){return s.tickFormat()(t)})).data({value:f,index:i,series:d})(),u.renderGuideLine(l)})),u.dispatch.on("elementMouseout",(function(t){A.tooltipHide(),o.clearHighlights()})),l.dispatch.on("legendClick",(function(t,r){t.disabled=!t.disabled,c.filter((function(t){return!t.disabled})).length||c.map((function(t){return t.disabled=!1,N.selectAll(".nv-series").classed("disabled",!1),t})),k.disabled=c.map((function(t){return!!t.disabled})),A.stateChange(k),e.transition().call(n)})),l.dispatch.on("legendDblclick",(function(t){c.forEach((function(t){t.disabled=!0})),t.disabled=!1,k.disabled=c.map((function(t){return!!t.disabled})),A.stateChange(k),n.update()})),A.on("changeState",(function(t){void 0!==t.disabled&&(c.forEach((function(e,n){e.disabled=t.disabled[n]})),k.disabled=t.disabled),n.update()}))})),S.renderEnd("historicalBarChart immediate"),n}var r,i,o=e||t.models.historicalBar(),a=t.models.axis(),s=t.models.axis(),l=t.models.legend(),u=t.interactiveGuideline(),c=t.models.tooltip(),d={top:30,right:90,bottom:50,left:90},f=null,p=t.utils.defaultColor(),h=null,g=null,v=!1,m=!0,y=!0,x=!1,b=!1,k={},w=null,M=null,A=d3.dispatch("tooltipHide","stateChange","changeState","renderEnd"),C=250;a.orient("bottom").tickPadding(7),s.orient(x?"right":"left"),c.duration(0).headerEnabled(!1).valueFormatter((function(t,e){return s.tickFormat()(t,e)})).headerFormatter((function(t,e){return a.tickFormat()(t,e)}));var S=t.utils.renderWatch(A,0);return o.dispatch.on("elementMouseover.tooltip",(function(t){t.series={key:n.x()(t.data),value:n.y()(t.data),color:t.color},c.data(t).hidden(!1)})),o.dispatch.on("elementMouseout.tooltip",(function(t){c.hidden(!0)})),o.dispatch.on("elementMousemove.tooltip",(function(t){c()})),n.dispatch=A,n.bars=o,n.legend=l,n.xAxis=a,n.yAxis=s,n.interactiveLayer=u,n.tooltip=c,n.options=t.utils.optionsFunc.bind(n),n._options=Object.create({},{width:{get:function(){return h},set:function(t){h=t}},height:{get:function(){return g},set:function(t){g=t}},showLegend:{get:function(){return v},set:function(t){v=t}},showXAxis:{get:function(){return m},set:function(t){m=t}},showYAxis:{get:function(){return y},set:function(t){y=t}},defaultState:{get:function(){return w},set:function(t){w=t}},noData:{get:function(){return M},set:function(t){M=t}},margin:{get:function(){return d},set:function(t){void 0!==t.top&&(d.top=t.top,f=t.top),d.right=void 0!==t.right?t.right:d.right,d.bottom=void 0!==t.bottom?t.bottom:d.bottom,d.left=void 0!==t.left?t.left:d.left}},color:{get:function(){return p},set:function(e){p=t.utils.getColor(e),l.color(p),o.color(p)}},duration:{get:function(){return C},set:function(t){C=t,S.reset(C),s.duration(C),a.duration(C)}},rightAlignYAxis:{get:function(){return x},set:function(t){x=t,s.orient(t?"right":"left")}},useInteractiveGuideline:{get:function(){return b},set:function(t){b=t,!0===t&&n.interactive(!1)}}}),t.utils.inheritOptions(n,o),t.utils.initOptions(n),n},t.models.ohlcBarChart=function(){var e=t.models.historicalBarChart(t.models.ohlcBar());return e.useInteractiveGuideline(!0),e.interactiveLayer.tooltip.contentGenerator((function(t){var n=t.series[0].data;return'<h3 style="color: #'+(n.open<n.close?"2ca02c":"d62728")+'">'+t.value+"</h3><table><tr><td>open:</td><td>"+e.yAxis.tickFormat()(n.open)+"</td></tr><tr><td>close:</td><td>"+e.yAxis.tickFormat()(n.close)+"</td></tr><tr><td>high</td><td>"+e.yAxis.tickFormat()(n.high)+"</td></tr><tr><td>low:</td><td>"+e.yAxis.tickFormat()(n.low)+"</td></tr></table>"})),e},t.models.candlestickBarChart=function(){var e=t.models.historicalBarChart(t.models.candlestickBar());return e.useInteractiveGuideline(!0),e.interactiveLayer.tooltip.contentGenerator((function(t){var n=t.series[0].data;return'<h3 style="color: #'+(n.open<n.close?"2ca02c":"d62728")+'">'+t.value+"</h3><table><tr><td>open:</td><td>"+e.yAxis.tickFormat()(n.open)+"</td></tr><tr><td>close:</td><td>"+e.yAxis.tickFormat()(n.close)+"</td></tr><tr><td>high</td><td>"+e.yAxis.tickFormat()(n.high)+"</td></tr><tr><td>low:</td><td>"+e.yAxis.tickFormat()(n.low)+"</td></tr></table>"})),e},t.models.legend=function(){"use strict";function e(y){function x(t,e){return"furious"!=m?"#000":g?t.disengaged?"#000":"#fff":g?void 0:(t.color||(t.color=s(t,e)),t.disabled?t.color:"#fff")}function b(t,e){return g&&"furious"==m&&t.disengaged?"#eee":t.color||s(t,e)}function k(t,e){return g&&"furious"==m?1:t.disabled?0:1}return y.each((function(e){var s=r-n.left-n.right,y=d3.select(this);t.utils.initSVG(y);var w=y.selectAll("g.nv-legend").data([e]),M=w.enter().append("g").attr("class","nvd3 nv-legend").append("g"),A=w.select("g");d?w.attr("transform","translate("+-n.right+","+n.top+")"):w.attr("transform","translate("+n.left+","+n.top+")");var C,S,W=A.selectAll(".nv-series").data((function(t){return"furious"!=m?t:t.filter((function(t){return!!g||!t.disengaged}))})),E=W.enter().append("g").attr("class","nv-series");switch(m){case"furious":S=23;break;case"classic":S=20}if("classic"==m)E.append("circle").style("stroke-width",2).attr("class","nv-legend-symbol").attr("r",5),C=W.select(".nv-legend-symbol");else if("furious"==m){E.append("rect").style("stroke-width",2).attr("class","nv-legend-symbol").attr("rx",3).attr("ry",3),C=W.select(".nv-legend-symbol"),E.append("g").attr("class","nv-check-box").property("innerHTML",'<path d="M0.5,5 L22.5,5 L22.5,26.5 L0.5,26.5 L0.5,5 Z" class="nv-box"></path><path d="M5.5,12.8618467 L11.9185089,19.2803556 L31,0.198864511" class="nv-check"></path>').attr("transform","translate(-10,-8)scale(0.5)"),W.select(".nv-check-box").each((function(t,e){d3.select(this).selectAll("path").attr("stroke",x(t,e))}))}E.append("text").attr("text-anchor","start").attr("class","nv-legend-text").attr("dy",".32em").attr("dx","8");var F=W.select("text.nv-legend-text");W.on("mouseover",(function(t,e){v.legendMouseover(t,e)})).on("mouseout",(function(t,e){v.legendMouseout(t,e)})).on("click",(function(t,e){v.legendClick(t,e);var n=W.data();if(f){if("classic"==m)h?(n.forEach((function(t){t.disabled=!0})),t.disabled=!1):(t.disabled=!t.disabled,n.every((function(t){return t.disabled}))&&n.forEach((function(t){t.disabled=!1})));else if("furious"==m)if(g)t.disengaged=!t.disengaged,t.userDisabled=null==t.userDisabled?!!t.disabled:t.userDisabled,t.disabled=t.disengaged||t.userDisabled;else if(!g){t.disabled=!t.disabled,t.userDisabled=t.disabled;var r=n.filter((function(t){return!t.disengaged}));r.every((function(t){return t.userDisabled}))&&n.forEach((function(t){t.disabled=t.userDisabled=!1}))}v.stateChange({disabled:n.map((function(t){return!!t.disabled})),disengaged:n.map((function(t){return!!t.disengaged}))})}})).on("dblclick",(function(t,e){if(p){if("furious"==m&&g)return;if(v.legendDblclick(t,e),f){var n=W.data();n.forEach((function(t){t.disabled=!0,"furious"==m&&(t.userDisabled=t.disabled)})),t.disabled=!1,"furious"==m&&(t.userDisabled=t.disabled),v.stateChange({disabled:n.map((function(t){return!!t.disabled}))})}}})),W.classed("nv-disabled",(function(t){return t.userDisabled})),W.exit().remove(),F.attr("fill",x).text((function(t){return a(o(t))}));var N=0;if(u){var D=[];W.each((function(e,n){var r,i;if(a(o(e))&&a(o(e)).length>l){var s=a(o(e)).substring(0,l);r=d3.select(this).select("text").text(s+"..."),d3.select(this).append("svg:title").text(a(o(e)))}else r=d3.select(this).select("text");try{if(0>=(i=r.node().getComputedTextLength()))throw Error()}catch(e){i=t.utils.calcApproxTextWidth(r)}D.push(i+c)}));var O=0,_=[];for(N=0;s>N&&O<D.length;)_[O]=D[O],N+=D[O++];for(0===O&&(O=1);N>s&&O>1;){_=[],O--;for(var L=0;L<D.length;L++)D[L]>(_[L%O]||0)&&(_[L%O]=D[L]);N=_.reduce((function(t,e,n,r){return t+e}))}for(var B=[],P=0,T=0;O>P;P++)B[P]=T,T+=_[P];W.attr("transform",(function(t,e){return"translate("+B[e%O]+","+(5+Math.floor(e/O)*S)+")"})),d?A.attr("transform","translate("+(r-n.right-N)+","+n.top+")"):A.attr("transform","translate(0,"+n.top+")"),i=n.top+n.bottom+Math.ceil(D.length/O)*S}else{var I,z=5,V=5,H=0;W.attr("transform",(function(t,e){var i=d3.select(this).select("text").node().getComputedTextLength()+c;return I=V,r<n.left+n.right+I+i&&(V=I=5,z+=S),(V+=i)>H&&(H=V),I+H>N&&(N=I+H),"translate("+I+","+z+")"})),A.attr("transform","translate("+(r-n.right-H)+","+n.top+")"),i=n.top+n.bottom+z+15}"furious"==m&&(C.attr("width",(function(t,e){return F[0][e].getComputedTextLength()+27})).attr("height",18).attr("y",-9).attr("x",-15),M.insert("rect",":first-child").attr("class","nv-legend-bg").attr("fill","#eee").attr("opacity",0),A.select(".nv-legend-bg").transition().duration(300).attr("x",-S).attr("width",N+S-12).attr("height",i+10).attr("y",-n.top-10).attr("opacity",g?1:0));C.style("fill",b).style("fill-opacity",k).style("stroke",b)})),e}var n={top:5,right:0,bottom:5,left:0},r=400,i=20,o=function(t){return t.key},a=function(t){return t},s=t.utils.getColor(),l=20,u=!0,c=32,d=!0,f=!0,p=!0,h=!1,g=!1,v=d3.dispatch("legendClick","legendDblclick","legendMouseover","legendMouseout","stateChange"),m="classic";return e.dispatch=v,e.options=t.utils.optionsFunc.bind(e),e._options=Object.create({},{width:{get:function(){return r},set:function(t){r=t}},height:{get:function(){return i},set:function(t){i=t}},key:{get:function(){return o},set:function(t){o=t}},keyFormatter:{get:function(){return a},set:function(t){a=t}},align:{get:function(){return u},set:function(t){u=t}},maxKeyLength:{get:function(){return l},set:function(t){l=t}},rightAlign:{get:function(){return d},set:function(t){d=t}},padding:{get:function(){return c},set:function(t){c=t}},updateState:{get:function(){return f},set:function(t){f=t}},enableDoubleClick:{get:function(){return p},set:function(t){p=t}},radioButtonMode:{get:function(){return h},set:function(t){h=t}},expanded:{get:function(){return g},set:function(t){g=t}},vers:{get:function(){return m},set:function(t){m=t}},margin:{get:function(){return n},set:function(t){n.top=void 0!==t.top?t.top:n.top,n.right=void 0!==t.right?t.right:n.right,n.bottom=void 0!==t.bottom?t.bottom:n.bottom,n.left=void 0!==t.left?t.left:n.left}},color:{get:function(){return s},set:function(e){s=t.utils.getColor(e)}}}),t.utils.initOptions(e),e},t.models.line=function(){"use strict";function e(m){return k.reset(),k.models(i),m.each((function(e){l=d3.select(this);var m=t.utils.availableWidth(a,l,o),y=t.utils.availableHeight(s,l,o);t.utils.initSVG(l),n=i.xScale(),r=i.yScale(),x=x||n,b=b||r;var w=l.selectAll("g.nv-wrap.nv-line").data([e]),M=w.enter().append("g").attr("class","nvd3 nv-wrap nv-line"),A=M.append("defs"),C=M.append("g"),S=w.select("g");C.append("g").attr("class","nv-groups"),C.append("g").attr("class","nv-scatterWrap"),w.attr("transform","translate("+o.left+","+o.top+")"),i.width(m).height(y);var W=w.select(".nv-scatterWrap");W.call(i),A.append("clipPath").attr("id","nv-edge-clip-"+i.id()).append("rect"),w.select("#nv-edge-clip-"+i.id()+" rect").attr("width",m).attr("height",y>0?y:0),S.attr("clip-path",g?"url(#nv-edge-clip-"+i.id()+")":""),W.attr("clip-path",g?"url(#nv-edge-clip-"+i.id()+")":"");var E=w.select(".nv-groups").selectAll(".nv-group").data((function(t){return t}),(function(t){return t.key}));E.enter().append("g").style("stroke-opacity",1e-6).style("stroke-width",(function(t){return t.strokeWidth||u})).style("fill-opacity",1e-6),E.exit().remove(),E.attr("class",(function(t,e){return(t.classed||"")+" nv-group nv-series-"+e})).classed("hover",(function(t){return t.hover})).style("fill",(function(t,e){return c(t,e)})).style("stroke",(function(t,e){return c(t,e)})),E.watchTransition(k,"line: groups").style("stroke-opacity",1).style("fill-opacity",(function(t){return t.fillOpacity||.5}));var F=E.selectAll("path.nv-area").data((function(t){return h(t)?[t]:[]}));F.enter().append("path").attr("class","nv-area").attr("d",(function(e){return d3.svg.area().interpolate(v).defined(p).x((function(e,n){return t.utils.NaNtoZero(x(d(e,n)))})).y0((function(e,n){return t.utils.NaNtoZero(b(f(e,n)))})).y1((function(t,e){return b(r.domain()[0]<=0?r.domain()[1]>=0?0:r.domain()[1]:r.domain()[0])})).apply(this,[e.values])})),E.exit().selectAll("path.nv-area").remove(),F.watchTransition(k,"line: areaPaths").attr("d",(function(e){return d3.svg.area().interpolate(v).defined(p).x((function(e,r){return t.utils.NaNtoZero(n(d(e,r)))})).y0((function(e,n){return t.utils.NaNtoZero(r(f(e,n)))})).y1((function(t,e){return r(r.domain()[0]<=0?r.domain()[1]>=0?0:r.domain()[1]:r.domain()[0])})).apply(this,[e.values])}));var N=E.selectAll("path.nv-line").data((function(t){return[t.values]}));N.enter().append("path").attr("class","nv-line").attr("d",d3.svg.line().interpolate(v).defined(p).x((function(e,n){return t.utils.NaNtoZero(x(d(e,n)))})).y((function(e,n){return t.utils.NaNtoZero(b(f(e,n)))}))),N.watchTransition(k,"line: linePaths").attr("d",d3.svg.line().interpolate(v).defined(p).x((function(e,r){return t.utils.NaNtoZero(n(d(e,r)))})).y((function(e,n){return t.utils.NaNtoZero(r(f(e,n)))}))),x=n.copy(),b=r.copy()})),k.renderEnd("line immediate"),e}var n,r,i=t.models.scatter(),o={top:0,right:0,bottom:0,left:0},a=960,s=500,l=null,u=1.5,c=t.utils.defaultColor(),d=function(t){return t.x},f=function(t){return t.y},p=function(t,e){return!isNaN(f(t,e))&&null!==f(t,e)},h=function(t){return t.area},g=!1,v="linear",m=250,y=d3.dispatch("elementClick","elementMouseover","elementMouseout","renderEnd");i.pointSize(16).pointDomain([16,256]);var x,b,k=t.utils.renderWatch(y,m);return e.dispatch=y,e.scatter=i,i.dispatch.on("elementClick",(function(){y.elementClick.apply(this,arguments)})),i.dispatch.on("elementMouseover",(function(){y.elementMouseover.apply(this,arguments)})),i.dispatch.on("elementMouseout",(function(){y.elementMouseout.apply(this,arguments)})),e.options=t.utils.optionsFunc.bind(e),e._options=Object.create({},{width:{get:function(){return a},set:function(t){a=t}},height:{get:function(){return s},set:function(t){s=t}},defined:{get:function(){return p},set:function(t){p=t}},interpolate:{get:function(){return v},set:function(t){v=t}},clipEdge:{get:function(){return g},set:function(t){g=t}},margin:{get:function(){return o},set:function(t){o.top=void 0!==t.top?t.top:o.top,o.right=void 0!==t.right?t.right:o.right,o.bottom=void 0!==t.bottom?t.bottom:o.bottom,o.left=void 0!==t.left?t.left:o.left}},duration:{get:function(){return m},set:function(t){m=t,k.reset(m),i.duration(m)}},isArea:{get:function(){return h},set:function(t){h=d3.functor(t)}},x:{get:function(){return d},set:function(t){d=t,i.x(t)}},y:{get:function(){return f},set:function(t){f=t,i.y(t)}},color:{get:function(){return c},set:function(e){c=t.utils.getColor(e),i.color(c)}}}),t.utils.inheritOptions(e,i),t.utils.initOptions(e),e},t.models.lineChart=function(){"use strict";function e(u){return E.reset(),E.models(i),y&&E.models(o),x&&E.models(a),u.each((function(u){function C(){y&&I.select(".nv-focus .nv-x.nv-axis").transition().duration(W).call(o)}function E(){x&&I.select(".nv-focus .nv-y.nv-axis").transition().duration(W).call(a)}function D(t){var e=I.select(".nv-focus .nv-linesWrap").datum(u.filter((function(t){return!t.disabled})).map((function(e,n){return{key:e.key,area:e.area,classed:e.classed,values:e.values.filter((function(e,n){return i.x()(e,n)>=t[0]&&i.x()(e,n)<=t[1]})),disableTooltip:e.disableTooltip}})));e.transition().duration(W).call(i),C(),E()}var O=d3.select(this);t.utils.initSVG(O);var _,L=t.utils.availableWidth(h,O,d),B=t.utils.availableHeight(g,O,d)-(w?c.height():0);if(e.update=function(){0===W?O.call(e):O.transition().duration(W).call(e)},e.container=this,M.setter(N(u),e.update).getter(F(u)).update(),M.disabled=u.map((function(t){return!!t.disabled})),!A)for(_ in A={},M)M[_]instanceof Array?A[_]=M[_].slice(0):A[_]=M[_];if(!(u&&u.length&&u.filter((function(t){return t.values.length})).length))return t.utils.noData(e,O),e;O.selectAll(".nv-noData").remove(),c.dispatch.on("onBrush",(function(t){D(t)})),n=i.xScale(),r=i.yScale();var P=O.selectAll("g.nv-wrap.nv-lineChart").data([u]),T=P.enter().append("g").attr("class","nvd3 nv-wrap nv-lineChart").append("g"),I=P.select("g");T.append("g").attr("class","nv-legendWrap");var z=T.append("g").attr("class","nv-focus");z.append("g").attr("class","nv-background").append("rect"),z.append("g").attr("class","nv-x nv-axis"),z.append("g").attr("class","nv-y nv-axis"),z.append("g").attr("class","nv-linesWrap"),z.append("g").attr("class","nv-interactive"),T.append("g").attr("class","nv-focusWrap"),v?(s.width(L),I.select(".nv-legendWrap").datum(u).call(s),"bottom"===m?(d.bottom=o.height()+s.height(),B=t.utils.availableHeight(g,O,d),I.select(".nv-legendWrap").attr("transform","translate(0,"+(B+o.height())+")")):"top"===m&&(f||s.height()===d.top||(d.top=s.height(),B=t.utils.availableHeight(g,O,d)-(w?c.height():0)),P.select(".nv-legendWrap").attr("transform","translate(0,"+-d.top+")"))):I.select(".nv-legendWrap").selectAll("*").remove(),P.attr("transform","translate("+d.left+","+d.top+")"),b&&I.select(".nv-y.nv-axis").attr("transform","translate("+L+",0)"),k&&(l.width(L).height(B).margin({left:d.left,top:d.top}).svgContainer(O).xScale(n),P.select(".nv-interactive").call(l)),I.select(".nv-focus .nv-background rect").attr("width",L).attr("height",B),i.width(L).height(B).color(u.map((function(t,e){return t.color||p(t,e)})).filter((function(t,e){return!u[e].disabled})));var V=I.select(".nv-linesWrap").datum(u.filter((function(t){return!t.disabled})));if(y&&o.scale(n)._ticks(t.utils.calcTicksX(L/100,u)).tickSize(-B,0),x&&a.scale(r)._ticks(t.utils.calcTicksY(B/36,u)).tickSize(-L,0),I.select(".nv-focus .nv-x.nv-axis").attr("transform","translate(0,"+B+")"),w||null!==c.brush.extent()){c.width(L),I.select(".nv-focusWrap").style("display",w?"initial":"none").attr("transform","translate(0,"+(B+d.bottom+c.margin().top)+")").call(c);var H=c.brush.empty()?c.xDomain():c.brush.extent();null!==H&&D(H)}else V.call(i),C(),E();s.dispatch.on("stateChange",(function(t){for(var n in t)M[n]=t[n];S.stateChange(M),e.update()})),l.dispatch.on("elementMousemove",(function(r){i.clearHighlights();var o,s,d,f=[];if(u.filter((function(t,e){return t.seriesIndex=e,!t.disabled&&!t.disableTooltip})).forEach((function(a,l){var u=null!==c.brush.extent()?c.brush.empty()?c.xScale().domain():c.brush.extent():n.domain(),h=a.values.filter((function(t,e){return u[0]<=u[1]?i.x()(t,e)>=u[0]&&i.x()(t,e)<=u[1]:i.x()(t,e)>=u[1]&&i.x()(t,e)<=u[0]})),g=h[s=t.interactiveBisect(h,r.pointXValue,i.x())],v=e.y()(g,s);null!==v&&i.highlightPoint(l,s,!0),void 0!==g&&(void 0===o&&(o=g),void 0===d&&(d=e.xScale()(e.x()(g,s))),f.push({key:a.key,value:v,color:p(a,a.seriesIndex),data:g}))})),f.length>2){var h=e.yScale().invert(r.mouseY),g=.03*Math.abs(e.yScale().domain()[0]-e.yScale().domain()[1]),v=t.nearestValueIndex(f.map((function(t){return t.value})),h,g);null!==v&&(f[v].highlight=!0)}l.tooltip.valueFormatter(l.tooltip.valueFormatter()||function(t,e){return null==t?"N/A":a.tickFormat()(t)}).data({value:e.x()(o,s),index:s,series:f})(),l.renderGuideLine(d)})),l.dispatch.on("elementClick",(function(n){var r,o=[];u.filter((function(t,e){return t.seriesIndex=e,!t.disabled})).forEach((function(i){var a=t.interactiveBisect(i.values,n.pointXValue,e.x()),s=i.values[a];if(void 0!==s){void 0===r&&(r=e.xScale()(e.x()(s,a)));var l=e.yScale()(e.y()(s,a));o.push({point:s,pointIndex:a,pos:[r,l],seriesIndex:i.seriesIndex,series:i})}})),i.dispatch.elementClick(o)})),l.dispatch.on("elementMouseout",(function(t){i.clearHighlights()})),S.on("changeState",(function(t){void 0!==t.disabled&&u.length===t.disabled.length&&(u.forEach((function(e,n){e.disabled=t.disabled[n]})),M.disabled=t.disabled),e.update()}))})),E.renderEnd("lineChart immediate"),e}var n,r,i=t.models.line(),o=t.models.axis(),a=t.models.axis(),s=t.models.legend(),l=t.interactiveGuideline(),u=t.models.tooltip(),c=t.models.focus(t.models.line()),d={top:30,right:20,bottom:50,left:60},f=null,p=t.utils.defaultColor(),h=null,g=null,v=!0,m="top",y=!0,x=!0,b=!1,k=!1,w=!1,M=t.utils.state(),A=null,C=null,S=d3.dispatch("stateChange","changeState","renderEnd"),W=250;o.orient("bottom").tickPadding(7),a.orient(b?"right":"left"),i.clipEdge(!0).duration(0),u.valueFormatter((function(t,e){return a.tickFormat()(t,e)})).headerFormatter((function(t,e){return o.tickFormat()(t,e)})),l.tooltip.valueFormatter((function(t,e){return a.tickFormat()(t,e)})).headerFormatter((function(t,e){return o.tickFormat()(t,e)}));var E=t.utils.renderWatch(S,W),F=function(t){return function(){return{active:t.map((function(t){return!t.disabled}))}}},N=function(t){return function(e){void 0!==e.active&&t.forEach((function(t,n){t.disabled=!e.active[n]}))}};return i.dispatch.on("elementMouseover.tooltip",(function(t){t.series.disableTooltip||u.data(t).hidden(!1)})),i.dispatch.on("elementMouseout.tooltip",(function(t){u.hidden(!0)})),e.dispatch=S,e.lines=i,e.legend=s,e.focus=c,e.xAxis=o,e.x2Axis=c.xAxis,e.yAxis=a,e.y2Axis=c.yAxis,e.interactiveLayer=l,e.tooltip=u,e.state=M,e.dispatch=S,e.options=t.utils.optionsFunc.bind(e),e._options=Object.create({},{width:{get:function(){return h},set:function(t){h=t}},height:{get:function(){return g},set:function(t){g=t}},showLegend:{get:function(){return v},set:function(t){v=t}},legendPosition:{get:function(){return m},set:function(t){m=t}},showXAxis:{get:function(){return y},set:function(t){y=t}},showYAxis:{get:function(){return x},set:function(t){x=t}},defaultState:{get:function(){return A},set:function(t){A=t}},noData:{get:function(){return C},set:function(t){C=t}},focusEnable:{get:function(){return w},set:function(t){w=t}},focusHeight:{get:function(){return c.height()},set:function(t){c.height(t)}},focusShowAxisX:{get:function(){return c.showXAxis()},set:function(t){c.showXAxis(t)}},focusShowAxisY:{get:function(){return c.showYAxis()},set:function(t){c.showYAxis(t)}},brushExtent:{get:function(){return c.brushExtent()},set:function(t){c.brushExtent(t)}},focusMargin:{get:function(){return c.margin},set:function(t){void 0!==t.top&&(d.top=t.top,f=t.top),c.margin.right=void 0!==t.right?t.right:c.margin.right,c.margin.bottom=void 0!==t.bottom?t.bottom:c.margin.bottom,c.margin.left=void 0!==t.left?t.left:c.margin.left}},margin:{get:function(){return d},set:function(t){d.top=void 0!==t.top?t.top:d.top,d.right=void 0!==t.right?t.right:d.right,d.bottom=void 0!==t.bottom?t.bottom:d.bottom,d.left=void 0!==t.left?t.left:d.left}},duration:{get:function(){return W},set:function(t){W=t,E.reset(W),i.duration(W),c.duration(W),o.duration(W),a.duration(W)}},color:{get:function(){return p},set:function(e){p=t.utils.getColor(e),s.color(p),i.color(p),c.color(p)}},interpolate:{get:function(){return i.interpolate()},set:function(t){i.interpolate(t),c.interpolate(t)}},xTickFormat:{get:function(){return o.tickFormat()},set:function(t){o.tickFormat(t),c.xTickFormat(t)}},yTickFormat:{get:function(){return a.tickFormat()},set:function(t){a.tickFormat(t),c.yTickFormat(t)}},x:{get:function(){return i.x()},set:function(t){i.x(t),c.x(t)}},y:{get:function(){return i.y()},set:function(t){i.y(t),c.y(t)}},rightAlignYAxis:{get:function(){return b},set:function(t){b=t,a.orient(b?"right":"left")}},useInteractiveGuideline:{get:function(){return k},set:function(t){(k=t)&&(i.interactive(!1),i.useVoronoi(!1))}}}),t.utils.inheritOptions(e,i),t.utils.initOptions(e),e},t.models.lineWithFocusChart=function(){return t.models.lineChart().margin({bottom:30}).focusEnable(!0)},t.models.linePlusBarChart=function(){"use strict";function e(k){return k.each((function(k){function P(){B=b.empty()?null:b.extent(),n=b.empty()?i.domain():b.extent(),T.brush({extent:n,brush:b}),b.empty()||b.extent(B),dt.data([b.empty()?i.domain():B]).each((function(t,e){var n=i(t[0])-i.range()[0],r=i.range()[1]-i(t[1]);d3.select(this).select(".left").attr("width",0>n?0:n),d3.select(this).select(".right").attr("x",i(t[1])).attr("width",0>r?0:r)})),d.width(K).height(U).color(k.map((function(t,e){return t.color||F(t,e)})).filter((function(t,e){return!k[e].disabled&&k[e].bar}))),u.width(K).height(U).color(k.map((function(t,e){return t.color||F(t,e)})).filter((function(t,e){return!k[e].disabled&&!k[e].bar})));var e=it.select(".nv-focus .nv-barsWrap").datum(J.length?J.map((function(t,e){return{key:t.key,values:t.values.filter((function(t,e){return d.x()(t,e)>=n[0]&&d.x()(t,e)<=n[1]}))}})):[{values:[]}]),s=it.select(".nv-focus .nv-linesWrap").datum(R($)?[{values:[]}]:$.filter((function(t){return!t.disabled})).map((function(t,e){return{area:t.area,fillOpacity:t.fillOpacity,strokeWidth:t.strokeWidth,key:t.key,values:t.values.filter((function(t,e){return u.x()(t,e)>=n[0]&&u.x()(t,e)<=n[1]}))}})));r=J.length&&!G?d.xScale():u.xScale(),p.scale(r)._ticks(t.utils.calcTicksX(K/100,k)).tickSize(-U,0),p.domain([Math.ceil(n[0]),Math.floor(n[1])]),it.select(".nv-x.nv-axis").transition().duration(I).call(p),e.transition().duration(I).call(d),s.transition().duration(I).call(u),it.select(".nv-focus .nv-x.nv-axis").attr("transform","translate(0,"+o.range()[0]+")"),g.scale(o)._ticks(t.utils.calcTicksY(U/36,k)).tickSize(-K,0),v.scale(a)._ticks(t.utils.calcTicksY(U/36,k)),G?v.tickSize($.length?0:-K,0):v.tickSize(J.length?0:-K,0);var l=J.length?1:0,c=$.length&&!R($)?1:0,f=G?c:l,h=G?l:c;it.select(".nv-focus .nv-y1.nv-axis").style("opacity",f),it.select(".nv-focus .nv-y2.nv-axis").style("opacity",h).attr("transform","translate("+r.range()[1]+",0)"),it.select(".nv-focus .nv-y1.nv-axis").transition().duration(I).call(g),it.select(".nv-focus .nv-y2.nv-axis").transition().duration(I).call(v)}var Z=d3.select(this);t.utils.initSVG(Z);var q,K=t.utils.availableWidth(C,Z,w),U=t.utils.availableHeight(S,Z,w)-(D?L:0),Q=L-A.top-A.bottom;if(e.update=function(){Z.transition().duration(I).call(e)},e.container=this,z.setter(j(k),e.update).getter(X(k)).update(),z.disabled=k.map((function(t){return!!t.disabled})),!V)for(q in V={},z)z[q]instanceof Array?V[q]=z[q].slice(0):V[q]=z[q];if(!(k&&k.length&&k.filter((function(t){return t.values.length})).length))return t.utils.noData(e,Z),e;Z.selectAll(".nv-noData").remove();var J=k.filter((function(t){return!t.disabled&&t.bar})),$=k.filter((function(t){return!t.bar}));r=J.length&&!G?d.xScale():u.xScale(),i=h.scale(),o=G?u.yScale():d.yScale(),a=G?d.yScale():u.yScale(),s=G?c.yScale():f.yScale(),l=G?f.yScale():c.yScale();var tt=k.filter((function(t){return!t.disabled&&(G?!t.bar:t.bar)})).map((function(t){return t.values.map((function(t,e){return{x:W(t,e),y:E(t,e)}}))})),et=k.filter((function(t){return!t.disabled&&(G?t.bar:!t.bar)})).map((function(t){return t.values.map((function(t,e){return{x:W(t,e),y:E(t,e)}}))}));r.range([0,K]),i.domain(d3.extent(d3.merge(tt.concat(et)),(function(t){return t.x}))).range([0,K]);var nt=Z.selectAll("g.nv-wrap.nv-linePlusBar").data([k]),rt=nt.enter().append("g").attr("class","nvd3 nv-wrap nv-linePlusBar").append("g"),it=nt.select("g");rt.append("g").attr("class","nv-legendWrap");var ot=rt.append("g").attr("class","nv-focus");ot.append("g").attr("class","nv-x nv-axis"),ot.append("g").attr("class","nv-y1 nv-axis"),ot.append("g").attr("class","nv-y2 nv-axis"),ot.append("g").attr("class","nv-barsWrap"),ot.append("g").attr("class","nv-linesWrap");var at=rt.append("g").attr("class","nv-context");if(at.append("g").attr("class","nv-x nv-axis"),at.append("g").attr("class","nv-y1 nv-axis"),at.append("g").attr("class","nv-y2 nv-axis"),at.append("g").attr("class","nv-barsWrap"),at.append("g").attr("class","nv-linesWrap"),at.append("g").attr("class","nv-brushBackground"),at.append("g").attr("class","nv-x nv-brush"),N){var st=x.align()?K/2:K,lt=x.align()?st:0;x.width(st),it.select(".nv-legendWrap").datum(k.map((function(t){return t.originalKey=void 0===t.originalKey?t.key:t.originalKey,t.key=G?t.originalKey+(t.bar?Y:H):t.originalKey+(t.bar?H:Y),t}))).call(x),M||x.height()===w.top||(w.top=x.height(),U=t.utils.availableHeight(S,Z,w)-L),it.select(".nv-legendWrap").attr("transform","translate("+lt+","+-w.top+")")}else it.select(".nv-legendWrap").selectAll("*").remove();nt.attr("transform","translate("+w.left+","+w.top+")"),it.select(".nv-context").style("display",D?"initial":"none"),f.width(K).height(Q).color(k.map((function(t,e){return t.color||F(t,e)})).filter((function(t,e){return!k[e].disabled&&k[e].bar}))),c.width(K).height(Q).color(k.map((function(t,e){return t.color||F(t,e)})).filter((function(t,e){return!k[e].disabled&&!k[e].bar})));var ut=it.select(".nv-context .nv-barsWrap").datum(J.length?J:[{values:[]}]),ct=it.select(".nv-context .nv-linesWrap").datum(R($)?[{values:[]}]:$.filter((function(t){return!t.disabled})));it.select(".nv-context").attr("transform","translate(0,"+(U+w.bottom+A.top)+")"),ut.transition().call(f),ct.transition().call(c),_&&(h._ticks(t.utils.calcTicksX(K/100,k)).tickSize(-Q,0),it.select(".nv-context .nv-x.nv-axis").attr("transform","translate(0,"+s.range()[0]+")"),it.select(".nv-context .nv-x.nv-axis").transition().call(h)),O&&(m.scale(s)._ticks(Q/36).tickSize(-K,0),y.scale(l)._ticks(Q/36).tickSize(J.length?0:-K,0),it.select(".nv-context .nv-y3.nv-axis").style("opacity",J.length?1:0).attr("transform","translate(0,"+i.range()[0]+")"),it.select(".nv-context .nv-y2.nv-axis").style("opacity",$.length?1:0).attr("transform","translate("+i.range()[1]+",0)"),it.select(".nv-context .nv-y1.nv-axis").transition().call(m),it.select(".nv-context .nv-y2.nv-axis").transition().call(y)),b.x(i).on("brush",P),B&&b.extent(B);var dt=it.select(".nv-brushBackground").selectAll("g").data([B||b.extent()]),ft=dt.enter().append("g");ft.append("rect").attr("class","left").attr("x",0).attr("y",0).attr("height",Q),ft.append("rect").attr("class","right").attr("x",0).attr("y",0).attr("height",Q);var pt=it.select(".nv-x.nv-brush").call(b);pt.selectAll("rect").attr("height",Q),pt.selectAll(".resize").append("path").attr("d",(function(t){var e=+("e"==t),n=e?1:-1,r=Q/3;return"M"+.5*n+","+r+"A6,6 0 0 "+e+" "+6.5*n+","+(r+6)+"V"+(2*r-6)+"A6,6 0 0 "+e+" "+.5*n+","+2*r+"ZM"+2.5*n+","+(r+8)+"V"+(2*r-8)+"M"+4.5*n+","+(r+8)+"V"+(2*r-8)})),x.dispatch.on("stateChange",(function(t){for(var n in t)z[n]=t[n];T.stateChange(z),e.update()})),T.on("changeState",(function(t){void 0!==t.disabled&&(k.forEach((function(e,n){e.disabled=t.disabled[n]})),z.disabled=t.disabled),e.update()})),P()})),e}var n,r,i,o,a,s,l,u=t.models.line(),c=t.models.line(),d=t.models.historicalBar(),f=t.models.historicalBar(),p=t.models.axis(),h=t.models.axis(),g=t.models.axis(),v=t.models.axis(),m=t.models.axis(),y=t.models.axis(),x=t.models.legend(),b=d3.svg.brush(),k=t.models.tooltip(),w={top:30,right:30,bottom:30,left:60},M=null,A={top:0,right:30,bottom:20,left:60},C=null,S=null,W=function(t){return t.x},E=function(t){return t.y},F=t.utils.defaultColor(),N=!0,D=!0,O=!1,_=!0,L=50,B=null,P=null,T=d3.dispatch("brush","stateChange","changeState"),I=0,z=t.utils.state(),V=null,H=" (left axis)",Y=" (right axis)",G=!1;u.clipEdge(!0),c.interactive(!1),c.pointActive((function(t){return!1})),p.orient("bottom").tickPadding(5),g.orient("left"),v.orient("right"),h.orient("bottom").tickPadding(5),m.orient("left"),y.orient("right"),k.headerEnabled(!0).headerFormatter((function(t,e){return p.tickFormat()(t,e)}));var X=function(t){return function(){return{active:t.map((function(t){return!t.disabled}))}}},j=function(t){return function(e){void 0!==e.active&&t.forEach((function(t,n){t.disabled=!e.active[n]}))}},R=function(t){return t.every((function(t){return t.disabled}))};return u.dispatch.on("elementMouseover.tooltip",(function(t){k.duration(100).valueFormatter((function(t,e){return(G?{main:g,focus:m}:{main:v,focus:y}).main.tickFormat()(t,e)})).data(t).hidden(!1)})),u.dispatch.on("elementMouseout.tooltip",(function(t){k.hidden(!0)})),d.dispatch.on("elementMouseover.tooltip",(function(t){t.value=e.x()(t.data),t.series={value:e.y()(t.data),color:t.color},k.duration(0).valueFormatter((function(t,e){return(G?{main:v,focus:y}:{main:g,focus:m}).main.tickFormat()(t,e)})).data(t).hidden(!1)})),d.dispatch.on("elementMouseout.tooltip",(function(t){k.hidden(!0)})),d.dispatch.on("elementMousemove.tooltip",(function(t){k()})),e.dispatch=T,e.legend=x,e.lines=u,e.lines2=c,e.bars=d,e.bars2=f,e.xAxis=p,e.x2Axis=h,e.y1Axis=g,e.y2Axis=v,e.y3Axis=m,e.y4Axis=y,e.tooltip=k,e.options=t.utils.optionsFunc.bind(e),e._options=Object.create({},{width:{get:function(){return C},set:function(t){C=t}},height:{get:function(){return S},set:function(t){S=t}},showLegend:{get:function(){return N},set:function(t){N=t}},brushExtent:{get:function(){return B},set:function(t){B=t}},noData:{get:function(){return P},set:function(t){P=t}},focusEnable:{get:function(){return D},set:function(t){D=t}},focusHeight:{get:function(){return L},set:function(t){L=t}},focusShowAxisX:{get:function(){return _},set:function(t){_=t}},focusShowAxisY:{get:function(){return O},set:function(t){O=t}},legendLeftAxisHint:{get:function(){return H},set:function(t){H=t}},legendRightAxisHint:{get:function(){return Y},set:function(t){Y=t}},margin:{get:function(){return w},set:function(t){void 0!==t.top&&(w.top=t.top,M=t.top),w.right=void 0!==t.right?t.right:w.right,w.bottom=void 0!==t.bottom?t.bottom:w.bottom,w.left=void 0!==t.left?t.left:w.left}},focusMargin:{get:function(){return A},set:function(t){A.top=void 0!==t.top?t.top:A.top,A.right=void 0!==t.right?t.right:A.right,A.bottom=void 0!==t.bottom?t.bottom:A.bottom,A.left=void 0!==t.left?t.left:A.left}},duration:{get:function(){return I},set:function(t){I=t}},color:{get:function(){return F},set:function(e){F=t.utils.getColor(e),x.color(F)}},x:{get:function(){return W},set:function(t){W=t,u.x(t),c.x(t),d.x(t),f.x(t)}},y:{get:function(){return E},set:function(t){E=t,u.y(t),c.y(t),d.y(t),f.y(t)}},switchYAxisOrder:{get:function(){return G},set:function(t){if(G!==t){var e=g;g=v,v=e;var n=m;m=y,y=n}G=t,g.orient("left"),v.orient("right"),m.orient("left"),y.orient("right")}}}),t.utils.inheritOptions(e,u),t.utils.initOptions(e),e},t.models.multiBar=function(){"use strict";function e(D){return F.reset(),D.each((function(e){var D=c-u.left-u.right,O=d-u.top-u.bottom;g=d3.select(this),t.utils.initSVG(g);var _=0;if(M&&e.length&&(M=[{values:e[0].values.map((function(t){return{x:t.x,y:0,series:t.series,size:.01}}))}]),b){var L=d3.layout.stack().offset(k).values((function(t){return t.values})).y(m)(!e.length&&M?M:e);L.forEach((function(t,n){t.nonStackable?(e[n].nonStackableSeries=_++,L[n]=e[n]):n>0&&L[n-1].nonStackable&&L[n].values.map((function(t,e){t.y0-=L[n-1].values[e].y,t.y1=t.y0+t.y}))})),e=L}e.forEach((function(t,e){t.values.forEach((function(n){n.series=e,n.key=t.key}))})),b&&e.length>0&&e[0].values.map((function(t,n){var r=0,i=0;e.map((function(t,o){if(!e[o].nonStackable){var a=t.values[n];a.size=Math.abs(a.y),a.y<0?(a.y1=i,i-=a.size):(a.y1=a.size+r,r+=a.size)}}))}));var B=r&&i?[]:e.map((function(t,e){return t.values.map((function(t,n){return{x:v(t,n),y:m(t,n),y0:t.y0,y1:t.y1,idx:e}}))}));f.domain(r||d3.merge(B).map((function(t){return t.x}))).rangeBands(o||[0,D],S),p.domain(i||d3.extent(d3.merge(B).map((function(t){var n=t.y;return b&&!e[t.idx].nonStackable&&(n=t.y>0?t.y1:t.y1+t.y),n})).concat(y))).range(a||[O,0]),f.domain()[0]===f.domain()[1]&&(f.domain()[0]?f.domain([f.domain()[0]-.01*f.domain()[0],f.domain()[1]+.01*f.domain()[1]]):f.domain([-1,1])),p.domain()[0]===p.domain()[1]&&(p.domain()[0]?p.domain([p.domain()[0]+.01*p.domain()[0],p.domain()[1]-.01*p.domain()[1]]):p.domain([-1,1])),s=s||f,l=l||p;var P=g.selectAll("g.nv-wrap.nv-multibar").data([e]),T=P.enter().append("g").attr("class","nvd3 nv-wrap nv-multibar"),I=T.append("defs"),z=T.append("g"),V=P.select("g");z.append("g").attr("class","nv-groups"),P.attr("transform","translate("+u.left+","+u.top+")"),I.append("clipPath").attr("id","nv-edge-clip-"+h).append("rect"),P.select("#nv-edge-clip-"+h+" rect").attr("width",D).attr("height",O),V.attr("clip-path",x?"url(#nv-edge-clip-"+h+")":"");var H=P.select(".nv-groups").selectAll(".nv-group").data((function(t){return t}),(function(t,e){return e}));H.enter().append("g").style("stroke-opacity",1e-6).style("fill-opacity",1e-6);var Y=F.transition(H.exit().selectAll("rect.nv-bar"),"multibarExit",Math.min(100,C)).attr("y",(function(t,n,r){var i=l(0)||0;return b&&e[t.series]&&!e[t.series].nonStackable&&(i=l(t.y0)),i})).attr("height",0).remove();Y.delay&&Y.delay((function(t,e){return e*(C/(N+1))-e})),H.attr("class",(function(t,e){return"nv-group nv-series-"+e})).classed("hover",(function(t){return t.hover})).style("fill",(function(t,e){return w(t,e)})).style("stroke",(function(t,e){return w(t,e)})),H.style("stroke-opacity",1).style("fill-opacity",W);var G=H.selectAll("rect.nv-bar").data((function(t){return M&&!e.length?M.values:t.values}));G.exit().remove(),G.enter().append("rect").attr("class",(function(t,e){return m(t,e)<0?"nv-bar negative":"nv-bar positive"})).attr("x",(function(t,n,r){return b&&!e[r].nonStackable?0:r*f.rangeBand()/e.length})).attr("y",(function(t,n,r){return l(b&&!e[r].nonStackable?t.y0:0)||0})).attr("height",0).attr("width",(function(t,n,r){return f.rangeBand()/(b&&!e[r].nonStackable?1:e.length)})).attr("transform",(function(t,e){return"translate("+f(v(t,e))+",0)"})),G.style("fill",(function(t,e,n){return w(t,n,e)})).style("stroke",(function(t,e,n){return w(t,n,e)})).on("mouseover",(function(t,n,r){d3.select(this).classed("hover",!0),E.elementMouseover({data:t,index:n,series:e[r],color:d3.select(this).style("fill")})})).on("mouseout",(function(t,n,r){d3.select(this).classed("hover",!1),E.elementMouseout({data:t,index:n,series:e[r],color:d3.select(this).style("fill")})})).on("mousemove",(function(t,n,r){E.elementMousemove({data:t,index:n,series:e[r],color:d3.select(this).style("fill")})})).on("click",(function(t,n,r){E.elementClick({data:t,index:n,series:e[r],color:d3.select(this).style("fill"),event:d3.event,element:this}),d3.event.stopPropagation()})).on("dblclick",(function(t,n,r){E.elementDblClick({data:t,index:n,series:e[r],color:d3.select(this).style("fill")}),d3.event.stopPropagation()})),G.attr("class",(function(t,e){return m(t,e)<0?"nv-bar negative":"nv-bar positive"})).attr("transform",(function(t,e){return"translate("+f(v(t,e))+",0)"})),A&&(n||(n=e.map((function(){return!0}))),G.style("fill",(function(t,e,r){return d3.rgb(A(t,e)).darker(n.map((function(t,e){return e})).filter((function(t,e){return!n[e]}))[r]).toString()})).style("stroke",(function(t,e,r){return d3.rgb(A(t,e)).darker(n.map((function(t,e){return e})).filter((function(t,e){return!n[e]}))[r]).toString()})));var X=G.watchTransition(F,"multibar",Math.min(250,C)).delay((function(t,n){return n*C/e[0].values.length}));b?X.attr("y",(function(t,n,r){return e[r].nonStackable?m(t,n)<0?p(0):p(0)-p(m(t,n))<-1?p(0)-1:p(m(t,n))||0:p(t.y1)})).attr("height",(function(t,n,r){return e[r].nonStackable?Math.max(Math.abs(p(m(t,n))-p(0)),0)||0:Math.max(Math.abs(p(t.y+t.y0)-p(t.y0)),0)})).attr("x",(function(t,n,r){var i=0;return e[r].nonStackable&&(i=t.series*f.rangeBand()/e.length,e.length!==_&&(i=e[r].nonStackableSeries*f.rangeBand()/(2*_))),i})).attr("width",(function(t,n,r){if(e[r].nonStackable){var i=f.rangeBand()/_;return e.length!==_&&(i=f.rangeBand()/(2*_)),i}return f.rangeBand()})):X.attr("x",(function(t,n){return t.series*f.rangeBand()/e.length})).attr("width",f.rangeBand()/e.length).attr("y",(function(t,e){return m(t,e)<0?p(0):p(0)-p(m(t,e))<1?p(0)-1:p(m(t,e))||0})).attr("height",(function(t,e){return Math.max(Math.abs(p(m(t,e))-p(0)),1)||0})),s=f.copy(),l=p.copy(),e[0]&&e[0].values&&(N=e[0].values.length)})),F.renderEnd("multibar immediate"),e}var n,r,i,o,a,s,l,u={top:0,right:0,bottom:0,left:0},c=960,d=500,f=d3.scale.ordinal(),p=d3.scale.linear(),h=Math.floor(1e4*Math.random()),g=null,v=function(t){return t.x},m=function(t){return t.y},y=[0],x=!0,b=!1,k="zero",w=t.utils.defaultColor(),M=!1,A=null,C=500,S=.1,W=.75,E=d3.dispatch("chartClick","elementClick","elementDblClick","elementMouseover","elementMouseout","elementMousemove","renderEnd"),F=t.utils.renderWatch(E,C),N=0;return e.dispatch=E,e.options=t.utils.optionsFunc.bind(e),e._options=Object.create({},{width:{get:function(){return c},set:function(t){c=t}},height:{get:function(){return d},set:function(t){d=t}},x:{get:function(){return v},set:function(t){v=t}},y:{get:function(){return m},set:function(t){m=t}},xScale:{get:function(){return f},set:function(t){f=t}},yScale:{get:function(){return p},set:function(t){p=t}},xDomain:{get:function(){return r},set:function(t){r=t}},yDomain:{get:function(){return i},set:function(t){i=t}},xRange:{get:function(){return o},set:function(t){o=t}},yRange:{get:function(){return a},set:function(t){a=t}},forceY:{get:function(){return y},set:function(t){y=t}},stacked:{get:function(){return b},set:function(t){b=t}},stackOffset:{get:function(){return k},set:function(t){k=t}},clipEdge:{get:function(){return x},set:function(t){x=t}},disabled:{get:function(){return n},set:function(t){n=t}},id:{get:function(){return h},set:function(t){h=t}},hideable:{get:function(){return M},set:function(t){M=t}},groupSpacing:{get:function(){return S},set:function(t){S=t}},fillOpacity:{get:function(){return W},set:function(t){W=t}},margin:{get:function(){return u},set:function(t){u.top=void 0!==t.top?t.top:u.top,u.right=void 0!==t.right?t.right:u.right,u.bottom=void 0!==t.bottom?t.bottom:u.bottom,u.left=void 0!==t.left?t.left:u.left}},duration:{get:function(){return C},set:function(t){C=t,F.reset(C)}},color:{get:function(){return w},set:function(e){w=t.utils.getColor(e)}},barColor:{get:function(){return A},set:function(e){A=e?t.utils.getColor(e):null}}}),t.utils.initOptions(e),e},t.models.multiBarChart=function(){"use strict";function e(F){return L.reset(),L.models(i),b&&L.models(o),k&&L.models(a),F.each((function(F){var L=d3.select(this);t.utils.initSVG(L);var I,z=t.utils.availableWidth(p,L,d),V=t.utils.availableHeight(h,L,d);if(e.update=function(){0===O?L.call(e):L.transition().duration(O).call(e)},e.container=this,W.setter(T(F),e.update).getter(P(F)).update(),W.disabled=F.map((function(t){return!!t.disabled})),!E)for(I in E={},W)W[I]instanceof Array?E[I]=W[I].slice(0):E[I]=W[I];if(!(F&&F.length&&F.filter((function(t){return t.values.length})).length))return t.utils.noData(e,L),e;L.selectAll(".nv-noData").remove(),n=i.xScale(),r=i.yScale();var H=L.selectAll("g.nv-wrap.nv-multiBarWithLegend").data([F]),Y=H.enter().append("g").attr("class","nvd3 nv-wrap nv-multiBarWithLegend").append("g"),G=H.select("g");if(Y.append("g").attr("class","nv-x nv-axis"),Y.append("g").attr("class","nv-y nv-axis"),Y.append("g").attr("class","nv-barsWrap"),Y.append("g").attr("class","nv-legendWrap"),Y.append("g").attr("class","nv-controlsWrap"),Y.append("g").attr("class","nv-interactive"),y?"bottom"===x?(l.width(z-d.right),G.select(".nv-legendWrap").datum(F).call(l),d.bottom=o.height()+l.height(),V=t.utils.availableHeight(h,L,d),G.select(".nv-legendWrap").attr("transform","translate(0,"+(V+o.height())+")")):(l.width(z-D()),G.select(".nv-legendWrap").datum(F).call(l),f||l.height()===d.top||(d.top=l.height(),V=t.utils.availableHeight(h,L,d)),G.select(".nv-legendWrap").attr("transform","translate("+D()+","+-d.top+")")):G.select(".nv-legendWrap").selectAll("*").remove(),v){var X=[{key:m.grouped||"Grouped",disabled:i.stacked()},{key:m.stacked||"Stacked",disabled:!i.stacked()}];u.width(D()).color(["#444","#444","#444"]),G.select(".nv-controlsWrap").datum(X).attr("transform","translate(0,"+-d.top+")").call(u)}else G.select(".nv-controlsWrap").selectAll("*").remove();H.attr("transform","translate("+d.left+","+d.top+")"),w&&G.select(".nv-y.nv-axis").attr("transform","translate("+z+",0)"),i.disabled(F.map((function(t){return t.disabled}))).width(z).height(V).color(F.map((function(t,e){return t.color||g(t,e)})).filter((function(t,e){return!F[e].disabled})));var j=G.select(".nv-barsWrap").datum(F.filter((function(t){return!t.disabled})));if(j.call(i),b){o.scale(n)._ticks(t.utils.calcTicksX(z/100,F)).tickSize(-V,0),G.select(".nv-x.nv-axis").attr("transform","translate(0,"+r.range()[0]+")"),G.select(".nv-x.nv-axis").call(o);var R=G.select(".nv-x.nv-axis > g").selectAll("g");if(R.selectAll("line, text").style("opacity",1),A){var Z=function(t,e){return"translate("+t+","+e+")"};R.selectAll("text").attr("transform",(function(t,e,n){return Z(0,n%2==0?5:17)}));var q=d3.selectAll(".nv-x.nv-axis .nv-wrap g g text")[0].length;G.selectAll(".nv-x.nv-axis .nv-axisMaxMin text").attr("transform",(function(t,e){return Z(0,0===e||q%2!=0?17:5)}))}C&&G.selectAll(".tick text").call(t.utils.wrapTicks,e.xAxis.rangeBand()),M&&R.filter((function(t,e){return e%Math.ceil(F[0].values.length/(z/100))!=0})).selectAll("text, line").style("opacity",0),S&&R.selectAll(".tick text").attr("transform","rotate("+S+" 0,0)").style("text-anchor",S>0?"start":"end"),G.select(".nv-x.nv-axis").selectAll("g.nv-axisMaxMin text").style("opacity",1)}k&&(a.scale(r)._ticks(t.utils.calcTicksY(V/36,F)).tickSize(-z,0),G.select(".nv-y.nv-axis").call(a)),_&&(s.width(z).height(V).margin({left:d.left,top:d.top}).svgContainer(L).xScale(n),H.select(".nv-interactive").call(s)),l.dispatch.on("stateChange",(function(t){for(var n in t)W[n]=t[n];N.stateChange(W),e.update()})),u.dispatch.on("legendClick",(function(t,n){if(t.disabled){switch(X=X.map((function(t){return t.disabled=!0,t})),t.disabled=!1,t.key){case"Grouped":case m.grouped:i.stacked(!1);break;case"Stacked":case m.stacked:i.stacked(!0)}W.stacked=i.stacked(),N.stateChange(W),e.update()}})),N.on("changeState",(function(t){void 0!==t.disabled&&(F.forEach((function(e,n){e.disabled=t.disabled[n]})),W.disabled=t.disabled),void 0!==t.stacked&&(i.stacked(t.stacked),W.stacked=t.stacked,B=t.stacked),e.update()})),_?(s.dispatch.on("elementMousemove",(function(t){if(null!=t.pointXValue){var r,i,o,a,l=[];F.filter((function(t,e){return t.seriesIndex=e,!t.disabled})).forEach((function(s,u){i=n.domain().indexOf(t.pointXValue);var c=s.values[i];void 0!==c&&(a=c.x,void 0===r&&(r=c),void 0===o&&(o=t.mouseX),l.push({key:s.key,value:e.y()(c,i),color:g(s,s.seriesIndex),data:s.values[i]}))})),s.tooltip.data({value:a,index:i,series:l})(),s.renderGuideLine(o)}})),s.dispatch.on("elementMouseout",(function(t){s.tooltip.hidden(!0)}))):(i.dispatch.on("elementMouseover.tooltip",(function(t){t.value=e.x()(t.data),t.series={key:t.data.key,value:e.y()(t.data),color:t.color},c.data(t).hidden(!1)})),i.dispatch.on("elementMouseout.tooltip",(function(t){c.hidden(!0)})),i.dispatch.on("elementMousemove.tooltip",(function(t){c()})))})),L.renderEnd("multibarchart immediate"),e}var n,r,i=t.models.multiBar(),o=t.models.axis(),a=t.models.axis(),s=t.interactiveGuideline(),l=t.models.legend(),u=t.models.legend(),c=t.models.tooltip(),d={top:30,right:20,bottom:50,left:60},f=null,p=null,h=null,g=t.utils.defaultColor(),v=!0,m={},y=!0,x=null,b=!0,k=!0,w=!1,M=!0,A=!1,C=!1,S=0,W=t.utils.state(),E=null,F=null,N=d3.dispatch("stateChange","changeState","renderEnd"),D=function(){return v?180:0},O=250,_=!1;W.stacked=!1,i.stacked(!1),o.orient("bottom").tickPadding(7).showMaxMin(!1).tickFormat((function(t){return t})),a.orient(w?"right":"left").tickFormat(d3.format(",.1f")),c.duration(0).valueFormatter((function(t,e){return a.tickFormat()(t,e)})).headerFormatter((function(t,e){return o.tickFormat()(t,e)})),s.tooltip.valueFormatter((function(t,e){return null==t?"N/A":a.tickFormat()(t,e)})).headerFormatter((function(t,e){return o.tickFormat()(t,e)})),s.tooltip.valueFormatter((function(t,e){return null==t?"N/A":a.tickFormat()(t,e)})).headerFormatter((function(t,e){return o.tickFormat()(t,e)})),s.tooltip.duration(0).valueFormatter((function(t,e){return a.tickFormat()(t,e)})).headerFormatter((function(t,e){return o.tickFormat()(t,e)})),u.updateState(!1);var L=t.utils.renderWatch(N),B=!1,P=function(t){return function(){return{active:t.map((function(t){return!t.disabled})),stacked:B}}},T=function(t){return function(e){void 0!==e.stacked&&(B=e.stacked),void 0!==e.active&&t.forEach((function(t,n){t.disabled=!e.active[n]}))}};return e.dispatch=N,e.multibar=i,e.legend=l,e.controls=u,e.xAxis=o,e.yAxis=a,e.state=W,e.tooltip=c,e.interactiveLayer=s,e.options=t.utils.optionsFunc.bind(e),e._options=Object.create({},{width:{get:function(){return p},set:function(t){p=t}},height:{get:function(){return h},set:function(t){h=t}},showLegend:{get:function(){return y},set:function(t){y=t}},legendPosition:{get:function(){return x},set:function(t){x=t}},showControls:{get:function(){return v},set:function(t){v=t}},controlLabels:{get:function(){return m},set:function(t){m=t}},showXAxis:{get:function(){return b},set:function(t){b=t}},showYAxis:{get:function(){return k},set:function(t){k=t}},defaultState:{get:function(){return E},set:function(t){E=t}},noData:{get:function(){return F},set:function(t){F=t}},reduceXTicks:{get:function(){return M},set:function(t){M=t}},rotateLabels:{get:function(){return S},set:function(t){S=t}},staggerLabels:{get:function(){return A},set:function(t){A=t}},wrapLabels:{get:function(){return C},set:function(t){C=!!t}},margin:{get:function(){return d},set:function(t){void 0!==t.top&&(d.top=t.top,f=t.top),d.right=void 0!==t.right?t.right:d.right,d.bottom=void 0!==t.bottom?t.bottom:d.bottom,d.left=void 0!==t.left?t.left:d.left}},duration:{get:function(){return O},set:function(t){O=t,i.duration(O),o.duration(O),a.duration(O),L.reset(O)}},color:{get:function(){return g},set:function(e){g=t.utils.getColor(e),l.color(g)}},rightAlignYAxis:{get:function(){return w},set:function(t){w=t,a.orient(w?"right":"left")}},useInteractiveGuideline:{get:function(){return _},set:function(t){_=t}},barColor:{get:function(){return i.barColor},set:function(t){i.barColor(t),l.color((function(t,e){return d3.rgb("#ccc").darker(1.5*e).toString()}))}}}),t.utils.inheritOptions(e,i),t.utils.initOptions(e),e},t.models.multiBarHorizontal=function(){"use strict";function e(f){return D.reset(),f.each((function(e){var f=c-u.left-u.right,F=d-u.top-u.bottom;p=d3.select(this),t.utils.initSVG(p),w&&(e=d3.layout.stack().offset("zero").values((function(t){return t.values})).y(m)(e)),e.forEach((function(t,e){t.values.forEach((function(n){n.series=e,n.key=t.key}))})),w&&e[0].values.map((function(t,n){var r=0,i=0;e.map((function(t){var e=t.values[n];e.size=Math.abs(e.y),e.y<0?(e.y1=i-e.size,i-=e.size):(e.y1=r,r+=e.size)}))}));var O=r&&i?[]:e.map((function(t){return t.values.map((function(t,e){return{x:v(t,e),y:m(t,e),y0:t.y0,y1:t.y1}}))}));h.domain(r||d3.merge(O).map((function(t){return t.x}))).rangeBands(o||[0,F],S),g.domain(i||d3.extent(d3.merge(O).map((function(t){return w?t.y>0?t.y1+t.y:t.y1:t.y})).concat(x))),M&&!w?g.range(a||[g.domain()[0]<0?C:0,f-(g.domain()[1]>0?C:0)]):g.range(a||[0,f]),s=s||h,l=l||d3.scale.linear().domain(g.domain()).range([g(0),g(0)]);var _=d3.select(this).selectAll("g.nv-wrap.nv-multibarHorizontal").data([e]),L=_.enter().append("g").attr("class","nvd3 nv-wrap nv-multibarHorizontal"),B=(L.append("defs"),L.append("g"));_.select("g"),B.append("g").attr("class","nv-groups"),_.attr("transform","translate("+u.left+","+u.top+")");var P=_.select(".nv-groups").selectAll(".nv-group").data((function(t){return t}),(function(t,e){return e}));P.enter().append("g").style("stroke-opacity",1e-6).style("fill-opacity",1e-6),P.exit().watchTransition(D,"multibarhorizontal: exit groups").style("stroke-opacity",1e-6).style("fill-opacity",1e-6).remove(),P.attr("class",(function(t,e){return"nv-group nv-series-"+e})).classed("hover",(function(t){return t.hover})).style("fill",(function(t,e){return b(t,e)})).style("stroke",(function(t,e){return b(t,e)})),P.watchTransition(D,"multibarhorizontal: groups").style("stroke-opacity",1).style("fill-opacity",W);var T=P.selectAll("g.nv-bar").data((function(t){return t.values}));T.exit().remove();var I=T.enter().append("g").attr("transform",(function(t,n,r){return"translate("+l(w?t.y0:0)+","+(w?0:r*h.rangeBand()/e.length+h(v(t,n)))+")"}));I.append("rect").attr("width",0).attr("height",h.rangeBand()/(w?1:e.length)),T.on("mouseover",(function(t,e){d3.select(this).classed("hover",!0),N.elementMouseover({data:t,index:e,color:d3.select(this).style("fill")})})).on("mouseout",(function(t,e){d3.select(this).classed("hover",!1),N.elementMouseout({data:t,index:e,color:d3.select(this).style("fill")})})).on("mouseout",(function(t,e){N.elementMouseout({data:t,index:e,color:d3.select(this).style("fill")})})).on("mousemove",(function(t,e){N.elementMousemove({data:t,index:e,color:d3.select(this).style("fill")})})).on("click",(function(t,e){N.elementClick({data:t,index:e,color:d3.select(this).style("fill"),event:d3.event,element:this}),d3.event.stopPropagation()})).on("dblclick",(function(t,e){N.elementDblClick({data:t,index:e,color:d3.select(this).style("fill")}),d3.event.stopPropagation()})),y(e[0],0)&&(I.append("polyline"),T.select("polyline").attr("fill","none").attr("points",(function(t,n){var r=y(t,n),i=.8*h.rangeBand()/(2*(w?1:e.length));return r=(r=r.length?r:[-Math.abs(r),Math.abs(r)]).map((function(e){return g(e+(m(t,n)<0?0:m(t,n)))-g(0)})),[[r[0],-i],[r[0],i],[r[0],0],[r[1],0],[r[1],-i],[r[1],i]].map((function(t){return t.join(",")})).join(" ")})).attr("transform",(function(t,n){return"translate(0, "+h.rangeBand()/(2*(w?1:e.length))+")"}))),I.append("text"),M&&!w?(T.select("text").attr("text-anchor",(function(t,e){return m(t,e)<0?"end":"start"})).attr("y",h.rangeBand()/(2*e.length)).attr("dy",".32em").text((function(t,e){var n=E(m(t,e)),r=y(t,e);return void 0===r?n:r.length?n+"+"+E(Math.abs(r[1]))+"-"+E(Math.abs(r[0])):n+"±"+E(Math.abs(r))})),T.watchTransition(D,"multibarhorizontal: bars").select("text").attr("x",(function(t,e){return m(t,e)<0?-4:g(m(t,e))-g(0)+4}))):T.selectAll("text").text(""),A&&!w?(I.append("text").classed("nv-bar-label",!0),T.select("text.nv-bar-label").attr("text-anchor",(function(t,e){return m(t,e)<0?"start":"end"})).attr("y",h.rangeBand()/(2*e.length)).attr("dy",".32em").text((function(t,e){return v(t,e)})),T.watchTransition(D,"multibarhorizontal: bars").select("text.nv-bar-label").attr("x",(function(t,e){return m(t,e)<0?g(0)-g(m(t,e))+4:-4}))):T.selectAll("text.nv-bar-label").text(""),T.attr("class",(function(t,e){return m(t,e)<0?"nv-bar negative":"nv-bar positive"})),k&&(n||(n=e.map((function(){return!0}))),T.style("fill",(function(t,e,r){return d3.rgb(k(t,e)).darker(n.map((function(t,e){return e})).filter((function(t,e){return!n[e]}))[r]).toString()})).style("stroke",(function(t,e,r){return d3.rgb(k(t,e)).darker(n.map((function(t,e){return e})).filter((function(t,e){return!n[e]}))[r]).toString()}))),w?T.watchTransition(D,"multibarhorizontal: bars").attr("transform",(function(t,e){return"translate("+g(t.y1)+","+h(v(t,e))+")"})).select("rect").attr("width",(function(t,e){return Math.abs(g(m(t,e)+t.y0)-g(t.y0))||0})).attr("height",h.rangeBand()):T.watchTransition(D,"multibarhorizontal: bars").attr("transform",(function(t,n){return"translate("+g(m(t,n)<0?m(t,n):0)+","+(t.series*h.rangeBand()/e.length+h(v(t,n)))+")"})).select("rect").attr("height",h.rangeBand()/e.length).attr("width",(function(t,e){return Math.max(Math.abs(g(m(t,e))-g(0)),1)||0})),s=h.copy(),l=g.copy()})),D.renderEnd("multibarHorizontal immediate"),e}var n,r,i,o,a,s,l,u={top:0,right:0,bottom:0,left:0},c=960,d=500,f=Math.floor(1e4*Math.random()),p=null,h=d3.scale.ordinal(),g=d3.scale.linear(),v=function(t){return t.x},m=function(t){return t.y},y=function(t){return t.yErr},x=[0],b=t.utils.defaultColor(),k=null,w=!1,M=!1,A=!1,C=60,S=.1,W=.75,E=d3.format(",.2f"),F=250,N=d3.dispatch("chartClick","elementClick","elementDblClick","elementMouseover","elementMouseout","elementMousemove","renderEnd"),D=t.utils.renderWatch(N,F);return e.dispatch=N,e.options=t.utils.optionsFunc.bind(e),e._options=Object.create({},{width:{get:function(){return c},set:function(t){c=t}},height:{get:function(){return d},set:function(t){d=t}},x:{get:function(){return v},set:function(t){v=t}},y:{get:function(){return m},set:function(t){m=t}},yErr:{get:function(){return y},set:function(t){y=t}},xScale:{get:function(){return h},set:function(t){h=t}},yScale:{get:function(){return g},set:function(t){g=t}},xDomain:{get:function(){return r},set:function(t){r=t}},yDomain:{get:function(){return i},set:function(t){i=t}},xRange:{get:function(){return o},set:function(t){o=t}},yRange:{get:function(){return a},set:function(t){a=t}},forceY:{get:function(){return x},set:function(t){x=t}},stacked:{get:function(){return w},set:function(t){w=t}},showValues:{get:function(){return M},set:function(t){M=t}},disabled:{get:function(){return n},set:function(t){n=t}},id:{get:function(){return f},set:function(t){f=t}},valueFormat:{get:function(){return E},set:function(t){E=t}},valuePadding:{get:function(){return C},set:function(t){C=t}},groupSpacing:{get:function(){return S},set:function(t){S=t}},fillOpacity:{get:function(){return W},set:function(t){W=t}},margin:{get:function(){return u},set:function(t){u.top=void 0!==t.top?t.top:u.top,u.right=void 0!==t.right?t.right:u.right,u.bottom=void 0!==t.bottom?t.bottom:u.bottom,u.left=void 0!==t.left?t.left:u.left}},duration:{get:function(){return F},set:function(t){F=t,D.reset(F)}},color:{get:function(){return b},set:function(e){b=t.utils.getColor(e)}},barColor:{get:function(){return k},set:function(e){k=e?t.utils.getColor(e):null}}}),t.utils.initOptions(e),e},t.models.multiBarHorizontalChart=function(){"use strict";function e(u){return D.reset(),D.models(i),b&&D.models(o),k&&D.models(a),u.each((function(u){var C=d3.select(this);t.utils.initSVG(C);var D,O=t.utils.availableWidth(f,C,c),_=t.utils.availableHeight(p,C,c);if(e.update=function(){C.transition().duration(E).call(e)},e.container=this,w=i.stacked(),M.setter(N(u),e.update).getter(F(u)).update(),M.disabled=u.map((function(t){return!!t.disabled})),!A)for(D in A={},M)M[D]instanceof Array?A[D]=M[D].slice(0):A[D]=M[D];if(!(u&&u.length&&u.filter((function(t){return t.values.length})).length))return t.utils.noData(e,C),e;C.selectAll(".nv-noData").remove(),n=i.xScale(),r=i.yScale().clamp(!0);var L=C.selectAll("g.nv-wrap.nv-multiBarHorizontalChart").data([u]),B=L.enter().append("g").attr("class","nvd3 nv-wrap nv-multiBarHorizontalChart").append("g"),P=L.select("g");if(B.append("g").attr("class","nv-x nv-axis"),B.append("g").attr("class","nv-y nv-axis").append("g").attr("class","nv-zeroLine").append("line"),B.append("g").attr("class","nv-barsWrap"),B.append("g").attr("class","nv-legendWrap"),B.append("g").attr("class","nv-controlsWrap"),y?(s.width(O-W()),P.select(".nv-legendWrap").datum(u).call(s),"bottom"===x?(c.bottom=o.height()+s.height(),_=t.utils.availableHeight(p,C,c),P.select(".nv-legendWrap").attr("transform","translate("+W()+","+(_+o.height())+")")):"top"===x&&(d||s.height()===c.top||(c.top=s.height(),_=t.utils.availableHeight(p,C,c)),P.select(".nv-legendWrap").attr("transform","translate("+W()+","+-c.top+")"))):P.select(".nv-legendWrap").selectAll("*").remove(),g){var T=[{key:m.grouped||"Grouped",disabled:i.stacked()},{key:m.stacked||"Stacked",disabled:!i.stacked()}];l.width(W()).color(["#444","#444","#444"]),"bottom"===v?(c.bottom=o.height()+s.height(),_=t.utils.availableHeight(p,C,c),P.select(".nv-controlsWrap").datum(T).attr("transform","translate(0,"+(_+o.height())+")").call(l)):"top"===v&&P.select(".nv-controlsWrap").datum(T).attr("transform","translate(0,"+-c.top+")").call(l)}else P.select(".nv-controlsWrap").selectAll("*").remove();L.attr("transform","translate("+c.left+","+c.top+")"),i.disabled(u.map((function(t){return t.disabled}))).width(O).height(_).color(u.map((function(t,e){return t.color||h(t,e)})).filter((function(t,e){return!u[e].disabled})));var I=P.select(".nv-barsWrap").datum(u.filter((function(t){return!t.disabled})));(I.transition().call(i),b)&&(o.scale(n)._ticks(t.utils.calcTicksY(_/24,u)).tickSize(-O,0),P.select(".nv-x.nv-axis").call(o),P.select(".nv-x.nv-axis").selectAll("g").selectAll("line, text"));k&&(a.scale(r)._ticks(t.utils.calcTicksX(O/100,u)).tickSize(-_,0),P.select(".nv-y.nv-axis").attr("transform","translate(0,"+_+")"),P.select(".nv-y.nv-axis").call(a)),P.select(".nv-zeroLine line").attr("x1",r(0)).attr("x2",r(0)).attr("y1",0).attr("y2",-_),s.dispatch.on("stateChange",(function(t){for(var n in t)M[n]=t[n];S.stateChange(M),e.update()})),l.dispatch.on("legendClick",(function(t,n){if(t.disabled){switch(T=T.map((function(t){return t.disabled=!0,t})),t.disabled=!1,t.key){case"Grouped":case m.grouped:i.stacked(!1);break;case"Stacked":case m.stacked:i.stacked(!0)}M.stacked=i.stacked(),S.stateChange(M),w=i.stacked(),e.update()}})),S.on("changeState",(function(t){void 0!==t.disabled&&(u.forEach((function(e,n){e.disabled=t.disabled[n]})),M.disabled=t.disabled),void 0!==t.stacked&&(i.stacked(t.stacked),M.stacked=t.stacked,w=t.stacked),e.update()}))})),D.renderEnd("multibar horizontal chart immediate"),e}var n,r,i=t.models.multiBarHorizontal(),o=t.models.axis(),a=t.models.axis(),s=t.models.legend().height(30),l=t.models.legend().height(30),u=t.models.tooltip(),c={top:30,right:20,bottom:50,left:60},d=null,f=null,p=null,h=t.utils.defaultColor(),g=!0,v="top",m={},y=!0,x="top",b=!0,k=!0,w=!1,M=t.utils.state(),A=null,C=null,S=d3.dispatch("stateChange","changeState","renderEnd"),W=function(){return g?180:0},E=250;M.stacked=!1,i.stacked(w),o.orient("left").tickPadding(5).showMaxMin(!1).tickFormat((function(t){return t})),a.orient("bottom").tickFormat(d3.format(",.1f")),u.duration(0).valueFormatter((function(t,e){return a.tickFormat()(t,e)})).headerFormatter((function(t,e){return o.tickFormat()(t,e)})),l.updateState(!1);var F=function(t){return function(){return{active:t.map((function(t){return!t.disabled})),stacked:w}}},N=function(t){return function(e){void 0!==e.stacked&&(w=e.stacked),void 0!==e.active&&t.forEach((function(t,n){t.disabled=!e.active[n]}))}},D=t.utils.renderWatch(S,E);return i.dispatch.on("elementMouseover.tooltip",(function(t){t.value=e.x()(t.data),t.series={key:t.data.key,value:e.y()(t.data),color:t.color},u.data(t).hidden(!1)})),i.dispatch.on("elementMouseout.tooltip",(function(t){u.hidden(!0)})),i.dispatch.on("elementMousemove.tooltip",(function(t){u()})),e.dispatch=S,e.multibar=i,e.legend=s,e.controls=l,e.xAxis=o,e.yAxis=a,e.state=M,e.tooltip=u,e.options=t.utils.optionsFunc.bind(e),e._options=Object.create({},{width:{get:function(){return f},set:function(t){f=t}},height:{get:function(){return p},set:function(t){p=t}},showLegend:{get:function(){return y},set:function(t){y=t}},legendPosition:{get:function(){return x},set:function(t){x=t}},controlsPosition:{get:function(){return v},set:function(t){v=t}},showControls:{get:function(){return g},set:function(t){g=t}},controlLabels:{get:function(){return m},set:function(t){m=t}},showXAxis:{get:function(){return b},set:function(t){b=t}},showYAxis:{get:function(){return k},set:function(t){k=t}},defaultState:{get:function(){return A},set:function(t){A=t}},noData:{get:function(){return C},set:function(t){C=t}},margin:{get:function(){return c},set:function(t){void 0!==t.top&&(c.top=t.top,d=t.top),c.right=void 0!==t.right?t.right:c.right,c.bottom=void 0!==t.bottom?t.bottom:c.bottom,c.left=void 0!==t.left?t.left:c.left}},duration:{get:function(){return E},set:function(t){E=t,D.reset(E),i.duration(E),o.duration(E),a.duration(E)}},color:{get:function(){return h},set:function(e){h=t.utils.getColor(e),s.color(h)}},barColor:{get:function(){return i.barColor},set:function(t){i.barColor(t),s.color((function(t,e){return d3.rgb("#ccc").darker(1.5*e).toString()}))}}}),t.utils.inheritOptions(e,i),t.utils.initOptions(e),e},t.models.multiChart=function(){"use strict";function e(c){return c.each((function(c){function h(t){var e=2===t.series.yAxis?O:D;t.value=t.point.x,t.series={value:t.point.y,color:t.point.color,key:t.series.key},L.duration(0).headerFormatter((function(t,e){return N.tickFormat()(t,e)})).valueFormatter((function(t,n){return e.tickFormat()(t,n)})).data(t).hidden(!1)}function y(t){var e=2===t.series.yAxis?O:D;t.value=t.point.x,t.series={value:t.point.y,color:t.point.color,key:t.series.key},L.duration(100).headerFormatter((function(t,e){return N.tickFormat()(t,e)})).valueFormatter((function(t,n){return e.tickFormat()(t,n)})).data(t).hidden(!1)}function B(t){var e=2===t.series.yAxis?O:D;t.point.x=E.x()(t.point),t.point.y=E.y()(t.point),L.duration(0).headerFormatter((function(t,e){return N.tickFormat()(t,e)})).valueFormatter((function(t,n){return e.tickFormat()(t,n)})).data(t).hidden(!1)}function T(t){var e=2===t.series.yAxis?O:D;t.value=S.x()(t.data),t.series={value:S.y()(t.data),color:t.color,key:t.data.key},L.duration(0).headerFormatter((function(t,e){return N.tickFormat()(t,e)})).valueFormatter((function(t,n){return e.tickFormat()(t,n)})).data(t).hidden(!1)}function I(){for(var t=0,e=P.length;e>t;t++){var n=P[t];try{n.clearHighlights()}catch(t){}}}var z=d3.select(this);t.utils.initSVG(z),e.update=function(){z.transition().call(e)},e.container=this;var V=t.utils.availableWidth(s,z,i),H=t.utils.availableHeight(l,z,i),Y=c.filter((function(t){return"line"==t.type&&1==t.yAxis})),G=c.filter((function(t){return"line"==t.type&&2==t.yAxis})),X=c.filter((function(t){return"scatter"==t.type&&1==t.yAxis})),j=c.filter((function(t){return"scatter"==t.type&&2==t.yAxis})),R=c.filter((function(t){return"bar"==t.type&&1==t.yAxis})),Z=c.filter((function(t){return"bar"==t.type&&2==t.yAxis})),q=c.filter((function(t){return"area"==t.type&&1==t.yAxis})),K=c.filter((function(t){return"area"==t.type&&2==t.yAxis}));if(!(c&&c.length&&c.filter((function(t){return t.values.length})).length))return t.utils.noData(e,z),e;z.selectAll(".nv-noData").remove();var U=c.filter((function(t){return!t.disabled&&1==t.yAxis})).map((function(t){return t.values.map((function(t,e){return{x:d(t),y:f(t)}}))})),Q=c.filter((function(t){return!t.disabled&&2==t.yAxis})).map((function(t){return t.values.map((function(t,e){return{x:d(t),y:f(t)}}))}));x.domain(d3.extent(d3.merge(U.concat(Q)),(function(t){return t.x}))).range([0,V]);var J=z.selectAll("g.wrap.multiChart").data([c]),$=J.enter().append("g").attr("class","wrap nvd3 multiChart").append("g");$.append("g").attr("class","nv-x nv-axis"),$.append("g").attr("class","nv-y1 nv-axis"),$.append("g").attr("class","nv-y2 nv-axis"),$.append("g").attr("class","stack1Wrap"),$.append("g").attr("class","stack2Wrap"),$.append("g").attr("class","bars1Wrap"),$.append("g").attr("class","bars2Wrap"),$.append("g").attr("class","scatters1Wrap"),$.append("g").attr("class","scatters2Wrap"),$.append("g").attr("class","lines1Wrap"),$.append("g").attr("class","lines2Wrap"),$.append("g").attr("class","legendWrap"),$.append("g").attr("class","nv-interactive");var tt=J.select("g"),et=c.map((function(t,e){return c[e].color||a(t,e)}));if(u){var nt=_.align()?V/2:V,rt=_.align()?nt:0;_.width(nt),_.color(et),tt.select(".legendWrap").datum(c.map((function(t){return t.originalKey=void 0===t.originalKey?t.key:t.originalKey,t.key=t.originalKey+(1==t.yAxis?"":m),t}))).call(_),o||_.height()===i.top||(i.top=_.height(),H=t.utils.availableHeight(l,z,i)),tt.select(".legendWrap").attr("transform","translate("+rt+","+-i.top+")")}else tt.select(".legendWrap").selectAll("*").remove();w.width(V).height(H).interpolate(p).color(et.filter((function(t,e){return!c[e].disabled&&1==c[e].yAxis&&"line"==c[e].type}))),M.width(V).height(H).interpolate(p).color(et.filter((function(t,e){return!c[e].disabled&&2==c[e].yAxis&&"line"==c[e].type}))),A.width(V).height(H).color(et.filter((function(t,e){return!c[e].disabled&&1==c[e].yAxis&&"scatter"==c[e].type}))),C.width(V).height(H).color(et.filter((function(t,e){return!c[e].disabled&&2==c[e].yAxis&&"scatter"==c[e].type}))),S.width(V).height(H).color(et.filter((function(t,e){return!c[e].disabled&&1==c[e].yAxis&&"bar"==c[e].type}))),W.width(V).height(H).color(et.filter((function(t,e){return!c[e].disabled&&2==c[e].yAxis&&"bar"==c[e].type}))),E.width(V).height(H).interpolate(p).color(et.filter((function(t,e){return!c[e].disabled&&1==c[e].yAxis&&"area"==c[e].type}))),F.width(V).height(H).interpolate(p).color(et.filter((function(t,e){return!c[e].disabled&&2==c[e].yAxis&&"area"==c[e].type}))),tt.attr("transform","translate("+i.left+","+i.top+")");var it=tt.select(".lines1Wrap").datum(Y.filter((function(t){return!t.disabled}))),ot=tt.select(".scatters1Wrap").datum(X.filter((function(t){return!t.disabled}))),at=tt.select(".bars1Wrap").datum(R.filter((function(t){return!t.disabled}))),st=tt.select(".stack1Wrap").datum(q.filter((function(t){return!t.disabled}))),lt=tt.select(".lines2Wrap").datum(G.filter((function(t){return!t.disabled}))),ut=tt.select(".scatters2Wrap").datum(j.filter((function(t){return!t.disabled}))),ct=tt.select(".bars2Wrap").datum(Z.filter((function(t){return!t.disabled}))),dt=tt.select(".stack2Wrap").datum(K.filter((function(t){return!t.disabled}))),ft=[];if(S.stacked()&&R.length){ft=R.filter((function(t){return!t.disabled})).map((function(t){return t.values}));ft.length>0&&(ft=ft.reduce((function(t,e){return t.map((function(t,n){return{x:t.x,y:t.y+e[n].y}}))})))}R.length&&ft.push({x:0,y:0});var pt=[];if(W.stacked()&&Z.length){pt=Z.filter((function(t){return!t.disabled})).map((function(t){return t.values}));pt.length>0&&(pt=pt.reduce((function(t,e){return t.map((function(t,n){return{x:t.x,y:t.y+e[n].y}}))})))}Z.length&&pt.push({x:0,y:0}),b.domain(n||d3.extent(d3.merge(U).concat(ft),(function(t){return t.y}))).range([0,H]),k.domain(r||d3.extent(d3.merge(Q).concat(pt),(function(t){return t.y}))).range([0,H]),w.yDomain(b.domain()),A.yDomain(b.domain()),S.yDomain(b.domain()),E.yDomain(b.domain()),M.yDomain(k.domain()),C.yDomain(k.domain()),W.yDomain(k.domain()),F.yDomain(k.domain()),q.length&&d3.transition(st).call(E),K.length&&d3.transition(dt).call(F),R.length&&d3.transition(at).call(S),Z.length&&d3.transition(ct).call(W),Y.length&&d3.transition(it).call(w),G.length&&d3.transition(lt).call(M),X.length&&d3.transition(ot).call(A),j.length&&d3.transition(ut).call(C),N._ticks(t.utils.calcTicksX(V/100,c)).tickSize(-H,0),tt.select(".nv-x.nv-axis").attr("transform","translate(0,"+H+")"),d3.transition(tt.select(".nv-x.nv-axis")).call(N),D._ticks(t.utils.calcTicksY(H/36,c)).tickSize(-V,0),d3.transition(tt.select(".nv-y1.nv-axis")).call(D),O._ticks(t.utils.calcTicksY(H/36,c)).tickSize(-V,0),d3.transition(tt.select(".nv-y2.nv-axis")).call(O),tt.select(".nv-y1.nv-axis").classed("nv-disabled",!U.length).attr("transform","translate("+x.range()[0]+",0)"),tt.select(".nv-y2.nv-axis").classed("nv-disabled",!Q.length).attr("transform","translate("+x.range()[1]+",0)"),_.dispatch.on("stateChange",(function(t){e.update()})),v&&(g.width(V).height(H).margin({left:i.left,top:i.top}).svgContainer(z).xScale(x),J.select(".nv-interactive").call(g)),v?(g.dispatch.on("elementMousemove",(function(n){I();var r,i,o,s=[];c.filter((function(t,e){return t.seriesIndex=e,!t.disabled})).forEach((function(l,u){var c=x.domain(),d=l.values.filter((function(t,n){return e.x()(t,n)>=c[0]&&e.x()(t,n)<=c[1]})),f=d[i=t.interactiveBisect(d,n.pointXValue,e.x())],p=e.y()(f,i);null!==p&&function(t,e,n){for(var r=0,i=P.length;i>r;r++){var o=P[r];try{o.highlightPoint(t,e,n)}catch(t){}}}(u,i,!0),void 0!==f&&(void 0===r&&(r=f),void 0===o&&(o=x(e.x()(f,i))),s.push({key:l.key,value:p,color:a(l,l.seriesIndex),data:f,yAxis:2==l.yAxis?O:D}))}));g.tooltip.headerFormatter((function(t,e){return N.tickFormat()(t,e)})).valueFormatter(g.tooltip.valueFormatter()||function(t,e){var n=s[e].yAxis;return null==t?"N/A":n.tickFormat()(t)}).data({value:e.x()(r,i),index:i,series:s})(),g.renderGuideLine(o)})),g.dispatch.on("elementMouseout",(function(t){I()}))):(w.dispatch.on("elementMouseover.tooltip",h),M.dispatch.on("elementMouseover.tooltip",h),w.dispatch.on("elementMouseout.tooltip",(function(t){L.hidden(!0)})),M.dispatch.on("elementMouseout.tooltip",(function(t){L.hidden(!0)})),A.dispatch.on("elementMouseover.tooltip",y),C.dispatch.on("elementMouseover.tooltip",y),A.dispatch.on("elementMouseout.tooltip",(function(t){L.hidden(!0)})),C.dispatch.on("elementMouseout.tooltip",(function(t){L.hidden(!0)})),E.dispatch.on("elementMouseover.tooltip",B),F.dispatch.on("elementMouseover.tooltip",B),E.dispatch.on("elementMouseout.tooltip",(function(t){L.hidden(!0)})),F.dispatch.on("elementMouseout.tooltip",(function(t){L.hidden(!0)})),S.dispatch.on("elementMouseover.tooltip",T),W.dispatch.on("elementMouseover.tooltip",T),S.dispatch.on("elementMouseout.tooltip",(function(t){L.hidden(!0)})),W.dispatch.on("elementMouseout.tooltip",(function(t){L.hidden(!0)})),S.dispatch.on("elementMousemove.tooltip",(function(t){L()})),W.dispatch.on("elementMousemove.tooltip",(function(t){L()})))})),e}var n,r,i={top:30,right:20,bottom:50,left:60},o=null,a=t.utils.defaultColor(),s=null,l=null,u=!0,c=null,d=function(t){return t.x},f=function(t){return t.y},p="linear",h=!0,g=t.interactiveGuideline(),v=!1,m=" (right axis)",y=250,x=d3.scale.linear(),b=d3.scale.linear(),k=d3.scale.linear(),w=t.models.line().yScale(b).duration(y),M=t.models.line().yScale(k).duration(y),A=t.models.scatter().yScale(b).duration(y),C=t.models.scatter().yScale(k).duration(y),S=t.models.multiBar().stacked(!1).yScale(b).duration(y),W=t.models.multiBar().stacked(!1).yScale(k).duration(y),E=t.models.stackedArea().yScale(b).duration(y),F=t.models.stackedArea().yScale(k).duration(y),N=t.models.axis().scale(x).orient("bottom").tickPadding(5).duration(y),D=t.models.axis().scale(b).orient("left").duration(y),O=t.models.axis().scale(k).orient("right").duration(y),_=t.models.legend().height(30),L=t.models.tooltip(),B=d3.dispatch(),P=[w,M,A,C,S,W,E,F];return e.dispatch=B,e.legend=_,e.lines1=w,e.lines2=M,e.scatters1=A,e.scatters2=C,e.bars1=S,e.bars2=W,e.stack1=E,e.stack2=F,e.xAxis=N,e.yAxis1=D,e.yAxis2=O,e.tooltip=L,e.interactiveLayer=g,e.options=t.utils.optionsFunc.bind(e),e._options=Object.create({},{width:{get:function(){return s},set:function(t){s=t}},height:{get:function(){return l},set:function(t){l=t}},showLegend:{get:function(){return u},set:function(t){u=t}},yDomain1:{get:function(){return n},set:function(t){n=t}},yDomain2:{get:function(){return r},set:function(t){r=t}},noData:{get:function(){return c},set:function(t){c=t}},interpolate:{get:function(){return p},set:function(t){p=t}},legendRightAxisHint:{get:function(){return m},set:function(t){m=t}},margin:{get:function(){return i},set:function(t){void 0!==t.top&&(i.top=t.top,o=t.top),i.right=void 0!==t.right?t.right:i.right,i.bottom=void 0!==t.bottom?t.bottom:i.bottom,i.left=void 0!==t.left?t.left:i.left}},color:{get:function(){return a},set:function(e){a=t.utils.getColor(e)}},x:{get:function(){return d},set:function(t){d=t,w.x(t),M.x(t),A.x(t),C.x(t),S.x(t),W.x(t),E.x(t),F.x(t)}},y:{get:function(){return f},set:function(t){f=t,w.y(t),M.y(t),A.y(t),C.y(t),E.y(t),F.y(t),S.y(t),W.y(t)}},useVoronoi:{get:function(){return h},set:function(t){h=t,w.useVoronoi(t),M.useVoronoi(t),E.useVoronoi(t),F.useVoronoi(t)}},useInteractiveGuideline:{get:function(){return v},set:function(t){(v=t)&&(w.interactive(!1),w.useVoronoi(!1),M.interactive(!1),M.useVoronoi(!1),E.interactive(!1),E.useVoronoi(!1),F.interactive(!1),F.useVoronoi(!1),A.interactive(!1),C.interactive(!1))}},duration:{get:function(){return y},set:function(t){y=t,[w,M,E,F,A,C,N,D,O].forEach((function(t){t.duration(y)}))}}}),t.utils.initOptions(e),e},t.models.ohlcBar=function(){"use strict";function e(A){return A.each((function(e){c=d3.select(this);var A=t.utils.availableWidth(s,c,a),S=t.utils.availableHeight(l,c,a);t.utils.initSVG(c);var W=A/e[0].values.length*.9;d.domain(n||d3.extent(e[0].values.map(p).concat(x))),k?d.range(i||[.5*A/e[0].values.length,A*(e[0].values.length-.5)/e[0].values.length]):d.range(i||[5+W/2,A-W/2-5]),f.domain(r||[d3.min(e[0].values.map(y).concat(b)),d3.max(e[0].values.map(m).concat(b))]).range(o||[S,0]),d.domain()[0]===d.domain()[1]&&(d.domain()[0]?d.domain([d.domain()[0]-.01*d.domain()[0],d.domain()[1]+.01*d.domain()[1]]):d.domain([-1,1])),f.domain()[0]===f.domain()[1]&&(f.domain()[0]?f.domain([f.domain()[0]+.01*f.domain()[0],f.domain()[1]-.01*f.domain()[1]]):f.domain([-1,1]));var E=d3.select(this).selectAll("g.nv-wrap.nv-ohlcBar").data([e[0].values]),F=E.enter().append("g").attr("class","nvd3 nv-wrap nv-ohlcBar"),N=F.append("defs"),D=F.append("g"),O=E.select("g");D.append("g").attr("class","nv-ticks"),E.attr("transform","translate("+a.left+","+a.top+")"),c.on("click",(function(t,e){C.chartClick({data:t,index:e,pos:d3.event,id:u})})),N.append("clipPath").attr("id","nv-chart-clip-path-"+u).append("rect"),E.select("#nv-chart-clip-path-"+u+" rect").attr("width",A).attr("height",S),O.attr("clip-path",w?"url(#nv-chart-clip-path-"+u+")":"");var _=E.select(".nv-ticks").selectAll(".nv-tick").data((function(t){return t}));_.exit().remove(),_.enter().append("path").attr("class",(function(t,e,n){return(g(t,e)>v(t,e)?"nv-tick negative":"nv-tick positive")+" nv-tick-"+n+"-"+e})).attr("d",(function(t,e){return"m0,0l0,"+(f(g(t,e))-f(m(t,e)))+"l"+-W/2+",0l"+W/2+",0l0,"+(f(y(t,e))-f(g(t,e)))+"l0,"+(f(v(t,e))-f(y(t,e)))+"l"+W/2+",0l"+-W/2+",0z"})).attr("transform",(function(t,e){return"translate("+d(p(t,e))+","+f(m(t,e))+")"})).attr("fill",(function(t,e){return M[0]})).attr("stroke",(function(t,e){return M[0]})).attr("x",0).attr("y",(function(t,e){return f(Math.max(0,h(t,e)))})).attr("height",(function(t,e){return Math.abs(f(h(t,e))-f(0))})),_.attr("class",(function(t,e,n){return(g(t,e)>v(t,e)?"nv-tick negative":"nv-tick positive")+" nv-tick-"+n+"-"+e})),d3.transition(_).attr("transform",(function(t,e){return"translate("+d(p(t,e))+","+f(m(t,e))+")"})).attr("d",(function(t,n){var r=A/e[0].values.length*.9;return"m0,0l0,"+(f(g(t,n))-f(m(t,n)))+"l"+-r/2+",0l"+r/2+",0l0,"+(f(y(t,n))-f(g(t,n)))+"l0,"+(f(v(t,n))-f(y(t,n)))+"l"+r/2+",0l"+-r/2+",0z"}))})),e}var n,r,i,o,a={top:0,right:0,bottom:0,left:0},s=null,l=null,u=Math.floor(1e4*Math.random()),c=null,d=d3.scale.linear(),f=d3.scale.linear(),p=function(t){return t.x},h=function(t){return t.y},g=function(t){return t.open},v=function(t){return t.close},m=function(t){return t.high},y=function(t){return t.low},x=[],b=[],k=!1,w=!0,M=t.utils.defaultColor(),A=!1,C=d3.dispatch("stateChange","changeState","renderEnd","chartClick","elementClick","elementDblClick","elementMouseover","elementMouseout","elementMousemove");return e.highlightPoint=function(t,n){e.clearHighlights(),c.select(".nv-ohlcBar .nv-tick-0-"+t).classed("hover",n)},e.clearHighlights=function(){c.select(".nv-ohlcBar .nv-tick.hover").classed("hover",!1)},e.dispatch=C,e.options=t.utils.optionsFunc.bind(e),e._options=Object.create({},{width:{get:function(){return s},set:function(t){s=t}},height:{get:function(){return l},set:function(t){l=t}},xScale:{get:function(){return d},set:function(t){d=t}},yScale:{get:function(){return f},set:function(t){f=t}},xDomain:{get:function(){return n},set:function(t){n=t}},yDomain:{get:function(){return r},set:function(t){r=t}},xRange:{get:function(){return i},set:function(t){i=t}},yRange:{get:function(){return o},set:function(t){o=t}},forceX:{get:function(){return x},set:function(t){x=t}},forceY:{get:function(){return b},set:function(t){b=t}},padData:{get:function(){return k},set:function(t){k=t}},clipEdge:{get:function(){return w},set:function(t){w=t}},id:{get:function(){return u},set:function(t){u=t}},interactive:{get:function(){return A},set:function(t){A=t}},x:{get:function(){return p},set:function(t){p=t}},y:{get:function(){return h},set:function(t){h=t}},open:{get:function(){return g()},set:function(t){g=t}},close:{get:function(){return v()},set:function(t){v=t}},high:{get:function(){return m},set:function(t){m=t}},low:{get:function(){return y},set:function(t){y=t}},margin:{get:function(){return a},set:function(t){a.top=null!=t.top?t.top:a.top,a.right=null!=t.right?t.right:a.right,a.bottom=null!=t.bottom?t.bottom:a.bottom,a.left=null!=t.left?t.left:a.left}},color:{get:function(){return M},set:function(e){M=t.utils.getColor(e)}}}),t.utils.initOptions(e),e},t.models.parallelCoordinates=function(){"use strict";function e(W){return S.reset(),W.each((function(e){function S(t){return M(h.map((function(e){if(isNaN(t.values[e.key])||isNaN(parseFloat(t.values[e.key]))||T){var n=d[e.key].domain(),r=d[e.key].range(),i=n[0]-(n[1]-n[0])/9;if(k.indexOf(e.key)<0){var o=d3.scale.linear().domain([i,n[1]]).range([u-12,r[1]]);d[e.key].brush.y(o),k.push(e.key)}if(isNaN(t.values[e.key])||isNaN(parseFloat(t.values[e.key])))return[c(e.key),d[e.key](i)]}return void 0!==Y&&(k.length>0||T?(Y.style("display","inline"),G.style("display","inline")):(Y.style("display","none"),G.style("display","none"))),[c(e.key),d[e.key](t.values[e.key])]})))}function W(t){y.forEach((function(e){var n=d[e.dimension].brush.y().domain();e.hasOnlyNaN&&(e.extent[1]=(d[e.dimension].domain()[1]-n[0])*(e.extent[1]-e.extent[0])/(P[e.dimension]-e.extent[0])+n[0]),e.hasNaN&&(e.extent[0]=n[0]),t&&d[e.dimension].brush.extent(e.extent)})),i.select(".nv-brushBackground").each((function(t){d3.select(this).call(d[t.key].brush)})).selectAll("rect").attr("x",-8).attr("width",16),D()}function E(){!1===v&&(v=!0,W(!0))}function F(){q=g.filter((function(t){return!d[t].brush.empty()})),K=q.map((function(t){return d[t].brush.extent()})),y=[],q.forEach((function(t,e){y[e]={dimension:t,extent:K[e],hasNaN:!1,hasOnlyNaN:!1}})),x=[],n.style("display",(function(t){var e=q.every((function(e,n){return!(!isNaN(t.values[e])&&!isNaN(parseFloat(t.values[e]))||K[n][0]!=d[e].brush.y().domain()[0])||K[n][0]<=t.values[e]&&t.values[e]<=K[n][1]&&!isNaN(parseFloat(t.values[e]))}));return e&&x.push(t),e?null:"none"})),D(),C.brush({filters:y,active:x})}function N(){var t=q.length>0;y.forEach((function(t){t.extent[0]===d[t.dimension].brush.y().domain()[0]&&k.indexOf(t.dimension)>=0&&(t.hasNaN=!0),t.extent[1]<d[t.dimension].domain()[0]&&(t.hasOnlyNaN=!0)})),C.brushEnd(x,t)}function D(){i.select(".nv-axis").each((function(t,e){var n=y.filter((function(e){return e.dimension==t.key}));I[t.key]=d[t.key].domain(),0!=n.length&&v&&(I[t.key]=[],n[0].extent[1]>d[t.key].domain()[0]&&(I[t.key]=[n[0].extent[1]]),n[0].extent[0]>=d[t.key].domain()[0]&&I[t.key].push(n[0].extent[0])),d3.select(this).call(A.scale(d[t.key]).tickFormat(t.format).tickValues(I[t.key]))}))}function O(t){var e=b[t];return null==e?c(t):e}var _=d3.select(this);if(l=t.utils.availableWidth(a,_,o),u=t.utils.availableHeight(s,_,o),t.utils.initSVG(_),void 0===e[0].values){var L=[];e.forEach((function(t){var e={};Object.keys(t).forEach((function(n){"name"!==n&&(e[n]=t[n])})),L.push({key:t.name,values:e})})),e=L}var B=e.map((function(t){return t.values}));0===x.length&&(x=e),g=p.sort((function(t,e){return t.currentPosition-e.currentPosition})).map((function(t){return t.key})),h=p.filter((function(t){return!t.disabled})),c.rangePoints([0,l],1).domain(h.map((function(t){return t.key})));var P={},T=!1,I=[];g.forEach((function(t){var e=d3.extent(B,(function(e){return+e[t]})),n=e[0],r=e[1],i=!1;(isNaN(n)||isNaN(r))&&(i=!0,n=0,r=0),n===r&&(n-=1,r+=1);var o=y.filter((function(e){return e.dimension==t}));0!==o.length&&(i?(n=d[t].domain()[0],r=d[t].domain()[1]):!o[0].hasOnlyNaN&&v?(n=n>o[0].extent[0]?o[0].extent[0]:n,r=r<o[0].extent[1]?o[0].extent[1]:r):o[0].hasNaN&&(r=r<o[0].extent[1]?o[0].extent[1]:r,P[t]=d[t].domain()[1],T=!0)),d[t]=d3.scale.linear().domain([n,r]).range([.9*(u-12),0]),k=[],d[t].brush=d3.svg.brush().y(d[t]).on("brushstart",E).on("brush",F).on("brushend",N)}));var z=_.selectAll("g.nv-wrap.nv-parallelCoordinates").data([e]),V=z.enter().append("g").attr("class","nvd3 nv-wrap nv-parallelCoordinates").append("g"),H=z.select("g");V.append("g").attr("class","nv-parallelCoordinates background"),V.append("g").attr("class","nv-parallelCoordinates foreground"),V.append("g").attr("class","nv-parallelCoordinates missingValuesline"),z.attr("transform","translate("+o.left+","+o.top+")"),M.interpolate("cardinal").tension(w),A.orient("left");var Y,G,X=d3.behavior.drag().on("dragstart",(function(t){b[t.key]=this.parentNode.__origin__=c(t.key),r.attr("visibility","hidden")})).on("drag",(function(t){b[t.key]=Math.min(l,Math.max(0,this.parentNode.__origin__+=d3.event.x)),n.attr("d",S),h.sort((function(t,e){return O(t.key)-O(e.key)})),h.forEach((function(t,e){return t.currentPosition=e})),c.domain(h.map((function(t){return t.key}))),i.attr("transform",(function(t){return"translate("+O(t.key)+")"}))})).on("dragend",(function(t,e){delete this.parentNode.__origin__,delete b[t.key],d3.select(this.parentNode).attr("transform","translate("+c(t.key)+")"),n.attr("d",S),r.attr("d",S).attr("visibility",null),C.dimensionsOrder(h)})),j=c.range()[1]-c.range()[0];if(j=isNaN(j)?c.range()[0]:j,!isNaN(j)){var R=[0+j/2,u-12,l-j/2,u-12];(Y=z.select(".missingValuesline").selectAll("line").data([R])).enter().append("line"),Y.exit().remove(),Y.attr("x1",(function(t){return t[0]})).attr("y1",(function(t){return t[1]})).attr("x2",(function(t){return t[2]})).attr("y2",(function(t){return t[3]})),(G=z.select(".missingValuesline").selectAll("text").data([f])).append("text").data([f]),G.enter().append("text"),G.exit().remove(),G.attr("y",u).attr("x",l-92-j/2).text((function(t){return t}))}(r=z.select(".background").selectAll("path").data(e)).enter().append("path"),r.exit().remove(),r.attr("d",S),(n=z.select(".foreground").selectAll("path").data(e)).enter().append("path"),n.exit().remove(),n.attr("d",S).style("stroke-width",(function(t,e){return isNaN(t.strokeWidth)&&(t.strokeWidth=1),t.strokeWidth})).attr("stroke",(function(t,e){return t.color||m(t,e)})),n.on("mouseover",(function(t,e){d3.select(this).classed("hover",!0).style("stroke-width",t.strokeWidth+2+"px").style("stroke-opacity",1),C.elementMouseover({label:t.name,color:t.color||m(t,e),values:t.values,dimensions:h})})),n.on("mouseout",(function(t,e){d3.select(this).classed("hover",!1).style("stroke-width",t.strokeWidth+"px").style("stroke-opacity",.7),C.elementMouseout({label:t.name,index:e})})),n.on("mousemove",(function(t,e){C.elementMousemove()})),n.on("click",(function(t){C.elementClick({id:t.id})}));var Z=(i=H.selectAll(".dimension").data(h)).enter().append("g").attr("class","nv-parallelCoordinates dimension");i.attr("transform",(function(t){return"translate("+c(t.key)+",0)"})),Z.append("g").attr("class","nv-axis"),Z.append("text").attr("class","nv-label").style("cursor","move").attr("dy","-1em").attr("text-anchor","middle").on("mouseover",(function(t,e){C.elementMouseover({label:t.tooltip||t.key,color:t.color})})).on("mouseout",(function(t,e){C.elementMouseout({label:t.tooltip})})).on("mousemove",(function(t,e){C.elementMousemove()})).call(X),Z.append("g").attr("class","nv-brushBackground"),i.exit().remove(),i.select(".nv-label").text((function(t){return t.key})),W(v);var q=g.filter((function(t){return!d[t].brush.empty()})),K=q.map((function(t){return d[t].brush.extent()})),U=x.slice(0);x=[],n.style("display",(function(t){var e=q.every((function(e,n){return!(!isNaN(t.values[e])&&!isNaN(parseFloat(t.values[e]))||K[n][0]!=d[e].brush.y().domain()[0])||K[n][0]<=t.values[e]&&t.values[e]<=K[n][1]&&!isNaN(parseFloat(t.values[e]))}));return e&&x.push(t),e?null:"none"})),(y.length>0||!t.utils.arrayEquals(x,U))&&C.activeChanged(x)})),e}var n,r,i,o={top:30,right:0,bottom:10,left:0},a=null,s=null,l=null,u=null,c=d3.scale.ordinal(),d={},f="undefined values",p=[],h=[],g=[],v=!0,m=t.utils.defaultColor(),y=[],x=[],b=[],k=[],w=1,M=d3.svg.line(),A=d3.svg.axis(),C=d3.dispatch("brushstart","brush","brushEnd","dimensionsOrder","stateChange","elementClick","elementMouseover","elementMouseout","elementMousemove","renderEnd","activeChanged"),S=t.utils.renderWatch(C);return e.dispatch=C,e.options=t.utils.optionsFunc.bind(e),e._options=Object.create({},{width:{get:function(){return a},set:function(t){a=t}},height:{get:function(){return s},set:function(t){s=t}},dimensionData:{get:function(){return p},set:function(t){p=t}},displayBrush:{get:function(){return v},set:function(t){v=t}},filters:{get:function(){return y},set:function(t){y=t}},active:{get:function(){return x},set:function(t){x=t}},lineTension:{get:function(){return w},set:function(t){w=t}},undefinedValuesLabel:{get:function(){return f},set:function(t){f=t}},dimensions:{get:function(){return p.map((function(t){return t.key}))},set:function(e){t.deprecated("dimensions","use dimensionData instead"),0===p.length?e.forEach((function(t){p.push({key:t})})):e.forEach((function(t,e){p[e].key=t}))}},dimensionNames:{get:function(){return p.map((function(t){return t.key}))},set:function(e){t.deprecated("dimensionNames","use dimensionData instead"),g=[],0===p.length?e.forEach((function(t){p.push({key:t})})):e.forEach((function(t,e){p[e].key=t}))}},dimensionFormats:{get:function(){return p.map((function(t){return t.format}))},set:function(e){t.deprecated("dimensionFormats","use dimensionData instead"),0===p.length?e.forEach((function(t){p.push({format:t})})):e.forEach((function(t,e){p[e].format=t}))}},margin:{get:function(){return o},set:function(t){o.top=void 0!==t.top?t.top:o.top,o.right=void 0!==t.right?t.right:o.right,o.bottom=void 0!==t.bottom?t.bottom:o.bottom,o.left=void 0!==t.left?t.left:o.left}},color:{get:function(){return m},set:function(e){m=t.utils.getColor(e)}}}),t.utils.initOptions(e),e},t.models.parallelCoordinatesChart=function(){"use strict";function e(i){return y.reset(),y.models(n),i.each((function(i){var c=d3.select(this);t.utils.initSVG(c);var g,v=t.utils.availableWidth(s,c,o),y=t.utils.availableHeight(l,c,o);if(e.update=function(){c.call(e)},e.container=this,d.setter(b(f),e.update).getter(x(f)).update(),d.disabled=f.map((function(t){return!!t.disabled})),f=f.map((function(t){return t.disabled=!!t.disabled,t})),f.forEach((function(t,e){t.originalPosition=isNaN(t.originalPosition)?e:t.originalPosition,t.currentPosition=isNaN(t.currentPosition)?e:t.currentPosition})),!h)for(g in h={},d)d[g]instanceof Array?h[g]=d[g].slice(0):h[g]=d[g];if(!i||!i.length)return t.utils.noData(e,c),e;c.selectAll(".nv-noData").remove();var k=c.selectAll("g.nv-wrap.nv-parallelCoordinatesChart").data([i]),w=k.enter().append("g").attr("class","nvd3 nv-wrap nv-parallelCoordinatesChart").append("g"),M=k.select("g");w.append("g").attr("class","nv-parallelCoordinatesWrap"),w.append("g").attr("class","nv-legendWrap"),M.select("rect").attr("width",v).attr("height",y>0?y:0),u?(r.width(v).color((function(t){return"rgb(188,190,192)"})),M.select(".nv-legendWrap").datum(f.sort((function(t,e){return t.originalPosition-e.originalPosition}))).call(r),a||r.height()===o.top||(o.top=r.height(),y=t.utils.availableHeight(l,c,o)),k.select(".nv-legendWrap").attr("transform","translate( 0 ,"+-o.top+")")):M.select(".nv-legendWrap").selectAll("*").remove(),k.attr("transform","translate("+o.left+","+o.top+")"),n.width(v).height(y).dimensionData(f).displayBrush(p),M.select(".nv-parallelCoordinatesWrap ").datum(i).transition().call(n),n.dispatch.on("brushEnd",(function(t,e){e?(p=!0,m.brushEnd(t)):p=!1})),r.dispatch.on("stateChange",(function(t){for(var n in t)d[n]=t[n];m.stateChange(d),e.update()})),n.dispatch.on("dimensionsOrder",(function(t){f.sort((function(t,e){return t.currentPosition-e.currentPosition}));var e=!1;f.forEach((function(t,n){t.currentPosition=n,t.currentPosition!==t.originalPosition&&(e=!0)})),m.dimensionsOrder(f,e)})),m.on("changeState",(function(t){void 0!==t.disabled&&(f.forEach((function(e,n){e.disabled=t.disabled[n]})),d.disabled=t.disabled),e.update()}))})),y.renderEnd("parraleleCoordinateChart immediate"),e}var n=t.models.parallelCoordinates(),r=t.models.legend(),i=t.models.tooltip(),o=(t.models.tooltip(),{top:0,right:0,bottom:0,left:0}),a=null,s=null,l=null,u=!0,c=t.utils.defaultColor(),d=t.utils.state(),f=[],p=!0,h=null,g=null,v="undefined",m=d3.dispatch("dimensionsOrder","brushEnd","stateChange","changeState","renderEnd"),y=t.utils.renderWatch(m),x=function(t){return function(){return{active:t.map((function(t){return!t.disabled}))}}},b=function(t){return function(e){void 0!==e.active&&t.forEach((function(t,n){t.disabled=!e.active[n]}))}};return i.contentGenerator((function(t){var e='<table><thead><tr><td class="legend-color-guide"><div style="background-color:'+t.color+'"></div></td><td><strong>'+t.key+"</strong></td></tr></thead>";return 0!==t.series.length&&(e+='<tbody><tr><td height ="10px"></td></tr>',t.series.forEach((function(t){e=e+'<tr><td class="legend-color-guide"><div style="background-color:'+t.color+'"></div></td><td class="key">'+t.key+'</td><td class="value">'+t.value+"</td></tr>"})),e+="</tbody>"),e+="</table>"})),n.dispatch.on("elementMouseover.tooltip",(function(t){var e={key:t.label,color:t.color,series:[]};t.values&&(Object.keys(t.values).forEach((function(n){var r,i=t.dimensions.filter((function(t){return t.key===n}))[0];i&&(r=isNaN(t.values[n])||isNaN(parseFloat(t.values[n]))?v:i.format(t.values[n]),e.series.push({idx:i.currentPosition,key:n,value:r,color:i.color}))})),e.series.sort((function(t,e){return t.idx-e.idx}))),i.data(e).hidden(!1)})),n.dispatch.on("elementMouseout.tooltip",(function(t){i.hidden(!0)})),n.dispatch.on("elementMousemove.tooltip",(function(){i()})),e.dispatch=m,e.parallelCoordinates=n,e.legend=r,e.tooltip=i,e.options=t.utils.optionsFunc.bind(e),e._options=Object.create({},{width:{get:function(){return s},set:function(t){s=t}},height:{get:function(){return l},set:function(t){l=t}},showLegend:{get:function(){return u},set:function(t){u=t}},defaultState:{get:function(){return h},set:function(t){h=t}},dimensionData:{get:function(){return f},set:function(t){f=t}},displayBrush:{get:function(){return p},set:function(t){p=t}},noData:{get:function(){return g},set:function(t){g=t}},nanValue:{get:function(){return v},set:function(t){v=t}},margin:{get:function(){return o},set:function(t){void 0!==t.top&&(o.top=t.top,a=t.top),o.right=void 0!==t.right?t.right:o.right,o.bottom=void 0!==t.bottom?t.bottom:o.bottom,o.left=void 0!==t.left?t.left:o.left}},color:{get:function(){return c},set:function(e){c=t.utils.getColor(e),r.color(c),n.color(c)}}}),t.utils.inheritOptions(e,n),t.utils.initOptions(e),e},t.models.pie=function(){"use strict";function e(O){return D.reset(),O.each((function(e){var O=r-n.left-n.right,_=i-n.top-n.bottom,L=Math.min(O,_)/2,B=[],P=[];if(l=d3.select(this),0===W.length)for(var T=L-L/10,I=C*L,z=0;z<e[0].length;z++)B.push(T),P.push(I);else y?(B=W.map((function(t){return(t.outer-t.outer/10)*L})),P=W.map((function(t){return(t.inner-t.inner/10)*L})),C=d3.min(W.map((function(t){return t.inner-t.inner/10})))):(B=W.map((function(t){return t.outer*L})),P=W.map((function(t){return t.inner*L})),C=d3.min(W.map((function(t){return t.inner}))));t.utils.initSVG(l);var V=l.selectAll(".nv-wrap.nv-pie").data(e),H=V.enter().append("g").attr("class","nvd3 nv-wrap nv-pie nv-chart-"+s).append("g"),Y=V.select("g"),G=H.append("g").attr("class","nv-pie");H.append("g").attr("class","nv-pieLabels"),V.attr("transform","translate("+n.left+","+n.top+")"),Y.select(".nv-pie").attr("transform","translate("+O/2+","+_/2+")"),Y.select(".nv-pieLabels").attr("transform","translate("+O/2+","+_/2+")"),l.on("click",(function(t,e){E.chartClick({data:t,index:e,pos:d3.event,id:s})})),F=[],N=[];for(z=0;z<e[0].length;z++){var X=d3.svg.arc().outerRadius(B[z]),j=d3.svg.arc().outerRadius(B[z]+5);!1!==k&&(X.startAngle(k),j.startAngle(k)),!1!==M&&(X.endAngle(M),j.endAngle(M)),v&&(X.innerRadius(P[z]),j.innerRadius(P[z])),X.cornerRadius&&A&&(X.cornerRadius(A),j.cornerRadius(A)),F.push(X),N.push(j)}var R=d3.layout.pie().sort(null).value((function(t){return t.disabled?0:a(t)}));R.padAngle&&w&&R.padAngle(w),v&&m&&(G.append("text").attr("class","nv-pie-title"),V.select(".nv-pie-title").style("text-anchor","middle").text((function(t){return m})).style("font-size",Math.min(O,_)*C*2/(m.length+2)+"px").attr("dy","0.35em").attr("transform",(function(t,e){return"translate(0, "+x+")"})));var Z=V.select(".nv-pie").selectAll(".nv-slice").data(R),q=V.select(".nv-pieLabels").selectAll(".nv-label").data(R);Z.exit().remove(),q.exit().remove();var K=Z.enter().append("g");if(K.attr("class","nv-slice"),K.on("mouseover",(function(t,e){d3.select(this).classed("hover",!0),y&&d3.select(this).select("path").transition().duration(70).attr("d",N[e]),E.elementMouseover({data:t.data,index:e,color:d3.select(this).style("fill"),percent:(t.endAngle-t.startAngle)/(2*Math.PI)})})),K.on("mouseout",(function(t,e){d3.select(this).classed("hover",!1),y&&d3.select(this).select("path").transition().duration(50).attr("d",F[e]),E.elementMouseout({data:t.data,index:e})})),K.on("mousemove",(function(t,e){E.elementMousemove({data:t.data,index:e})})),K.on("click",(function(t,e){E.elementClick({data:t.data,index:e,color:d3.select(this).style("fill"),event:d3.event,element:this})})),K.on("dblclick",(function(t,e){E.elementDblClick({data:t.data,index:e,color:d3.select(this).style("fill")})})),Z.attr("fill",(function(t,e){return u(t.data,e)})),Z.attr("stroke",(function(t,e){return u(t.data,e)})),K.append("path").each((function(t){this._current=t})),Z.select("path").transition().duration(S).attr("d",(function(t,e){return F[e](t)})).attrTween("d",(function(t,e){t.endAngle=isNaN(t.endAngle)?0:t.endAngle,t.startAngle=isNaN(t.startAngle)?0:t.startAngle,v||(t.innerRadius=0);var n=d3.interpolate(this._current,t);return this._current=n(0),function(t){return F[e](n(t))}})),d){var U=[];for(z=0;z<e[0].length;z++)U.push(F[z]),f?v&&(U[z]=d3.svg.arc().outerRadius(F[z].outerRadius()),!1!==k&&U[z].startAngle(k),!1!==M&&U[z].endAngle(M)):v||U[z].innerRadius(0);q.enter().append("g").classed("nv-label",!0).each((function(t,e){var n=d3.select(this);n.attr("transform",(function(t,e){if(b){t.outerRadius=B[e]+10,t.innerRadius=B[e]+15;var n=(t.startAngle+t.endAngle)/2*(180/Math.PI);return(t.startAngle+t.endAngle)/2<Math.PI?n-=90:n+=90,"translate("+U[e].centroid(t)+") rotate("+n+")"}return t.outerRadius=L+10,t.innerRadius=L+15,"translate("+U[e].centroid(t)+")"})),n.append("rect").style("stroke","#fff").style("fill","#fff").attr("rx",3).attr("ry",3),n.append("text").style("text-anchor",b?(t.startAngle+t.endAngle)/2<Math.PI?"start":"end":"middle").style("fill","#000")}));var Q={},J=function(t){return 140*Math.floor(t[0]/140)+","+14*Math.floor(t[1]/14)},$=function(t){return(t.endAngle-t.startAngle)/(2*Math.PI)};q.watchTransition(D,"pie labels").attr("transform",(function(t,e){if(b){t.outerRadius=B[e]+10,t.innerRadius=B[e]+15;var n=(t.startAngle+t.endAngle)/2*(180/Math.PI);return(t.startAngle+t.endAngle)/2<Math.PI?n-=90:n+=90,"translate("+U[e].centroid(t)+") rotate("+n+")"}t.outerRadius=L+10,t.innerRadius=L+15;var r=U[e].centroid(t),i=$(t);if(t.value&&i>=h){var o=J(r);Q[o]&&(r[1]-=14),Q[J(r)]=!0}return"translate("+r+")"})),q.select(".nv-label text").style("text-anchor",(function(t,e){return b?(t.startAngle+t.endAngle)/2<Math.PI?"start":"end":"middle"})).text((function(t,e){var n=$(t),r="";if(!t.value||h>n)return"";if("function"==typeof p)r=p(t,e,{key:o(t.data),value:a(t.data),percent:c(n)});else switch(p){case"key":r=o(t.data);break;case"value":r=c(a(t.data));break;case"percent":r=d3.format("%")(n)}return r})),g&&q.each((function(e,n){if(this.getBBox){var r=this.getBBox(),i=U[n].centroid(e),o={x:i[0]+r.x,y:i[1]+r.y},a={x:o.x+r.width,y:o.y},s={x:o.x,y:o.y+r.height},l={x:o.x+r.width,y:o.y+r.height};e.visible=t.utils.pointIsInArc(o,e,X)&&t.utils.pointIsInArc(a,e,X)&&t.utils.pointIsInArc(s,e,X)&&t.utils.pointIsInArc(l,e,X)}})).style("display",(function(t){return t.visible?null:"none"}))}})),D.renderEnd("pie immediate"),e}var n={top:0,right:0,bottom:0,left:0},r=500,i=500,o=function(t){return t.x},a=function(t){return t.y},s=Math.floor(1e4*Math.random()),l=null,u=t.utils.defaultColor(),c=d3.format(",.2f"),d=!0,f=!1,p="key",h=.02,g=!1,v=!1,m=!1,y=!0,x=0,b=!1,k=!1,w=!1,M=!1,A=0,C=.5,S=250,W=[],E=d3.dispatch("chartClick","elementClick","elementDblClick","elementMouseover","elementMouseout","elementMousemove","renderEnd"),F=[],N=[],D=t.utils.renderWatch(E);return e.dispatch=E,e.options=t.utils.optionsFunc.bind(e),e._options=Object.create({},{arcsRadius:{get:function(){return W},set:function(t){W=t}},width:{get:function(){return r},set:function(t){r=t}},height:{get:function(){return i},set:function(t){i=t}},showLabels:{get:function(){return d},set:function(t){d=t}},title:{get:function(){return m},set:function(t){m=t}},titleOffset:{get:function(){return x},set:function(t){x=t}},labelThreshold:{get:function(){return h},set:function(t){h=t}},hideOverlapLabels:{get:function(){return g},set:function(t){g=t}},valueFormat:{get:function(){return c},set:function(t){c=t}},x:{get:function(){return o},set:function(t){o=t}},id:{get:function(){return s},set:function(t){s=t}},endAngle:{get:function(){return M},set:function(t){M=t}},startAngle:{get:function(){return k},set:function(t){k=t}},padAngle:{get:function(){return w},set:function(t){w=t}},cornerRadius:{get:function(){return A},set:function(t){A=t}},donutRatio:{get:function(){return C},set:function(t){C=t}},labelsOutside:{get:function(){return f},set:function(t){f=t}},labelSunbeamLayout:{get:function(){return b},set:function(t){b=t}},donut:{get:function(){return v},set:function(t){v=t}},growOnHover:{get:function(){return y},set:function(t){y=t}},pieLabelsOutside:{get:function(){return f},set:function(e){f=e,t.deprecated("pieLabelsOutside","use labelsOutside instead")}},donutLabelsOutside:{get:function(){return f},set:function(e){f=e,t.deprecated("donutLabelsOutside","use labelsOutside instead")}},labelFormat:{get:function(){return c},set:function(e){c=e,t.deprecated("labelFormat","use valueFormat instead")}},margin:{get:function(){return n},set:function(t){n.top=void 0!==t.top?t.top:n.top,n.right=void 0!==t.right?t.right:n.right,n.bottom=void 0!==t.bottom?t.bottom:n.bottom,n.left=void 0!==t.left?t.left:n.left}},duration:{get:function(){return S},set:function(t){S=t,D.reset(S)}},y:{get:function(){return a},set:function(t){a=d3.functor(t)}},color:{get:function(){return u},set:function(e){u=t.utils.getColor(e)}},labelType:{get:function(){return p},set:function(t){p=t||"key"}}}),t.utils.initOptions(e),e},t.models.pieChart=function(){"use strict";function e(i){return y.reset(),y.models(n),i.each((function(i){var u=d3.select(this);t.utils.initSVG(u);var f,g=t.utils.availableWidth(s,u,o),v=t.utils.availableHeight(l,u,o);if(e.update=function(){u.transition().call(e)},e.container=this,p.setter(b(i),e.update).getter(x(i)).update(),p.disabled=i.map((function(t){return!!t.disabled})),!h)for(f in h={},p)p[f]instanceof Array?h[f]=p[f].slice(0):h[f]=p[f];if(!i||!i.length)return t.utils.noData(e,u),e;u.selectAll(".nv-noData").remove();var y=u.selectAll("g.nv-wrap.nv-pieChart").data([i]),k=y.enter().append("g").attr("class","nvd3 nv-wrap nv-pieChart").append("g"),w=y.select("g");if(k.append("g").attr("class","nv-pieWrap"),k.append("g").attr("class","nv-legendWrap"),c)if("top"===d)r.width(g).key(n.x()),y.select(".nv-legendWrap").datum(i).call(r),a||r.height()===o.top||(o.top=r.height(),v=t.utils.availableHeight(l,u,o)),y.select(".nv-legendWrap").attr("transform","translate(0,"+-o.top+")");else if("right"===d){var M=t.models.legend().width();M>g/2&&(M=g/2),r.height(v).key(n.x()),r.width(M),g-=r.width(),y.select(".nv-legendWrap").datum(i).call(r).attr("transform","translate("+g+",0)")}else"bottom"===d&&(r.width(g).key(n.x()),y.select(".nv-legendWrap").datum(i).call(r),o.bottom=r.height(),v=t.utils.availableHeight(l,u,o),y.select(".nv-legendWrap").attr("transform","translate(0,"+v+")"));else w.select(".nv-legendWrap").selectAll("*").remove();y.attr("transform","translate("+o.left+","+o.top+")"),n.width(g).height(v);var A=w.select(".nv-pieWrap").datum([i]);d3.transition(A).call(n),r.dispatch.on("stateChange",(function(t){for(var n in t)p[n]=t[n];m.stateChange(p),e.update()})),m.on("changeState",(function(t){void 0!==t.disabled&&(i.forEach((function(e,n){e.disabled=t.disabled[n]})),p.disabled=t.disabled),e.update()}))})),y.renderEnd("pieChart immediate"),e}var n=t.models.pie(),r=t.models.legend(),i=t.models.tooltip(),o={top:30,right:20,bottom:20,left:20},a=null,s=null,l=null,u=!1,c=!0,d="top",f=t.utils.defaultColor(),p=t.utils.state(),h=null,g=null,v=250,m=d3.dispatch("stateChange","changeState","renderEnd");i.duration(0).headerEnabled(!1).valueFormatter((function(t,e){return n.valueFormat()(t,e)}));var y=t.utils.renderWatch(m),x=function(t){return function(){return{active:t.map((function(t){return!t.disabled}))}}},b=function(t){return function(e){void 0!==e.active&&t.forEach((function(t,n){t.disabled=!e.active[n]}))}};return n.dispatch.on("elementMouseover.tooltip",(function(t){t.series={key:e.x()(t.data),value:e.y()(t.data),color:t.color,percent:t.percent},u||(delete t.percent,delete t.series.percent),i.data(t).hidden(!1)})),n.dispatch.on("elementMouseout.tooltip",(function(t){i.hidden(!0)})),n.dispatch.on("elementMousemove.tooltip",(function(t){i()})),e.legend=r,e.dispatch=m,e.pie=n,e.tooltip=i,e.options=t.utils.optionsFunc.bind(e),e._options=Object.create({},{width:{get:function(){return s},set:function(t){s=t}},height:{get:function(){return l},set:function(t){l=t}},noData:{get:function(){return g},set:function(t){g=t}},showTooltipPercent:{get:function(){return u},set:function(t){u=t}},showLegend:{get:function(){return c},set:function(t){c=t}},legendPosition:{get:function(){return d},set:function(t){d=t}},defaultState:{get:function(){return h},set:function(t){h=t}},color:{get:function(){return f},set:function(t){f=t,r.color(f),n.color(f)}},duration:{get:function(){return v},set:function(t){v=t,y.reset(v),n.duration(v)}},margin:{get:function(){return o},set:function(t){void 0!==t.top&&(o.top=t.top,a=t.top),o.right=void 0!==t.right?t.right:o.right,o.bottom=void 0!==t.bottom?t.bottom:o.bottom,o.left=void 0!==t.left?t.left:o.left}}}),t.utils.inheritOptions(e,n),t.utils.initOptions(e),e},t.models.sankey=function(){"use strict";function e(){for(var t,e=l,n=0;e.length&&n<l.length;)t=[],e.forEach((function(e){e.x=n,e.dx=o,e.sourceLinks.forEach((function(e){t.indexOf(e.target)<0&&t.push(e.target)}))})),e=t,++n;c&&function(t){l.forEach((function(e){e.sourceLinks.length||(e.x=t-1)}))}(n),function(t){l.forEach((function(e){e.x*=t}))}((s[0]-o)/(n-1))}function n(){function t(t,e){return t.source.y-e.source.y}function e(t,e){return t.target.y-e.target.y}l.forEach((function(n){n.sourceLinks.sort(e),n.targetLinks.sort(t)})),l.forEach((function(t){var e=0,n=0;t.sourceLinks.forEach((function(t){t.sy=e,e+=t.dy})),t.targetLinks.forEach((function(t){t.ty=n,n+=t.dy}))}))}function r(t){return t.value}var i={},o=24,a=8,s=[1,1],l=[],u=[],c=!0,d=function(t){l.forEach((function(t){t.sourceLinks=[],t.targetLinks=[]})),u.forEach((function(t){var e=t.source,n=t.target;"number"==typeof e&&(e=t.source=l[t.source]),"number"==typeof n&&(n=t.target=l[t.target]),e.sourceLinks.push(t),n.targetLinks.push(t)})),l.forEach((function(t){t.value=Math.max(d3.sum(t.sourceLinks,r),d3.sum(t.targetLinks,r))})),e(),function(t){function e(t){function e(t){return(t.source.y+t.sy+t.dy/2)*t.value}d.forEach((function(n,i){n.forEach((function(n){if(n.targetLinks.length){var i=d3.sum(n.targetLinks,e)/d3.sum(n.targetLinks,r);n.y+=(i-p(n))*t}}))}))}function i(t){function e(t){return(t.target.y+t.ty+t.dy/2)*t.value}d.slice().reverse().forEach((function(n){n.forEach((function(n){if(n.sourceLinks.length){var i=d3.sum(n.sourceLinks,e)/d3.sum(n.sourceLinks,r);n.y+=(i-p(n))*t}}))}))}function o(){d.forEach((function(t){var e,n,r,i=0,o=t.length;for(t.sort(c),r=0;o>r;++r)(n=i-(e=t[r]).y)>0&&(e.y+=n),i=e.y+e.dy+a;if((n=i-a-s[1])>0)for(i=e.y-=n,r=o-2;r>=0;--r)(n=(e=t[r]).y+e.dy+a-i)>0&&(e.y-=n),i=e.y}))}function c(t,e){return t.y-e.y}var d=d3.nest().key((function(t){return t.x})).sortKeys(d3.ascending).entries(l).map((function(t){return t.values}));(function(){var t=d3.min(d,(function(t){return(s[1]-(t.length-1)*a)/d3.sum(t,r)}));d.forEach((function(e){e.forEach((function(e,n){e.y=n,e.dy=e.value*t}))})),u.forEach((function(e){e.dy=e.value*t}))})(),o(),n();for(var f=1;t>0;--t)i(f*=.99),o(),n(),e(f),o(),n()}(t)},f=function(){function t(t){var n=t.source.x+t.source.dx,r=t.target.x,i=d3.interpolateNumber(n,r),o=i(e),a=i(1-e),s=t.source.y+t.sy+t.dy/2,l=t.target.y+t.ty+t.dy/2;return"M"+n+","+s+"C"+o+","+s+" "+a+","+l+" "+r+","+l}var e=.5;return t.curvature=function(n){return arguments.length?(e=+n,t):e},t},p=function(t){return t.y+t.dy/2};return i.options=t.utils.optionsFunc.bind(i),i._options=Object.create({},{nodeWidth:{get:function(){return o},set:function(t){o=+t}},nodePadding:{get:function(){return a},set:function(t){a=t}},nodes:{get:function(){return l},set:function(t){l=t}},links:{get:function(){return u},set:function(t){u=t}},size:{get:function(){return s},set:function(t){s=t}},sinksRight:{get:function(){return c},set:function(t){c=t}},layout:{get:function(){d(32)},set:function(t){d(t)}},relayout:{get:function(){n()},set:function(t){}},center:{get:function(){return p()},set:function(t){"function"==typeof t&&(p=t)}},link:{get:function(){return f()},set:function(t){return"function"==typeof t&&(f=t),f()}}}),t.utils.initOptions(i),i},t.models.sankeyChart=function(){"use strict";function e(t){return t.each((function(e){var n={nodes:[{node:1,name:"Test 1"},{node:2,name:"Test 2"},{node:3,name:"Test 3"},{node:4,name:"Test 4"},{node:5,name:"Test 5"},{node:6,name:"Test 6"}],links:[{source:0,target:1,value:2295},{source:0,target:5,value:1199},{source:1,target:2,value:1119},{source:1,target:5,value:1176},{source:2,target:3,value:487},{source:2,target:5,value:632},{source:3,target:4,value:301},{source:3,target:5,value:186}]},l=!1,c=!1;if(("object"==typeof e.nodes&&e.nodes.length)>=0&&("object"==typeof e.links&&e.links.length)>=0&&(l=!0),e.nodes&&e.nodes.length>0&&e.links&&e.links.length>0&&(c=!0),!l)return console.error("NVD3 Sankey chart error:","invalid data format for",e),console.info("Valid data format is: ",n,JSON.stringify(n)),m(t,"Error loading chart, data is invalid"),!1;if(!c)return m(t,"No data available"),!1;var d=t.append("svg").attr("width",i).attr("height",o).append("g").attr("class","nvd3 nv-wrap nv-sankeyChart");r.nodeWidth(a).nodePadding(s).size([i,o]);var f=r.link();r.nodes(e.nodes).links(e.links).layout(32).center(u);var y=d.append("g").selectAll(".link").data(e.links).enter().append("path").attr("class","link").attr("d",f).style("stroke-width",(function(t){return Math.max(1,t.dy)})).sort((function(t,e){return e.dy-t.dy}));y.append("title").text(p);var x=d.append("g").selectAll(".node").data(e.nodes).enter().append("g").attr("class","node").attr("transform",(function(t){return"translate("+t.x+","+t.y+")"})).call(d3.behavior.drag().origin((function(t){return t})).on("dragstart",(function(){this.parentNode.appendChild(this)})).on("drag",(function(t){d3.select(this).attr("transform","translate("+t.x+","+(t.y=Math.max(0,Math.min(o-t.dy,d3.event.y)))+")"),r.relayout(),y.attr("d",f)})));x.append("rect").attr("height",(function(t){return t.dy})).attr("width",r.nodeWidth()).style("fill",h).style("stroke",g).append("title").text(v),x.append("text").attr("x",-6).attr("y",(function(t){return t.dy/2})).attr("dy",".35em").attr("text-anchor","end").attr("transform",null).text((function(t){return t.name})).filter((function(t){return t.x<i/2})).attr("x",6+r.nodeWidth()).attr("text-anchor","start")})),e}var n={top:5,right:0,bottom:5,left:0},r=t.models.sankey(),i=600,o=400,a=36,s=40,l="units",u=void 0,c=d3.format(",.0f"),d=function(t){return c(t)+" "+l},f=d3.scale.category20(),p=function(t){return t.source.name+" → "+t.target.name+"\n"+d(t.value)},h=function(t){return t.color=f(t.name.replace(/ .*/,""))},g=function(t){return d3.rgb(t.color).darker(2)},v=function(t){return t.name+"\n"+d(t.value)},m=function(t,e){t.append("text").attr("x",0).attr("y",0).attr("class","nvd3-sankey-chart-error").attr("text-anchor","middle").text(e)};return e.options=t.utils.optionsFunc.bind(e),e._options=Object.create({},{units:{get:function(){return l},set:function(t){l=t}},width:{get:function(){return i},set:function(t){i=t}},height:{get:function(){return o},set:function(t){o=t}},format:{get:function(){return d},set:function(t){d=t}},linkTitle:{get:function(){return p},set:function(t){p=t}},nodeWidth:{get:function(){return a},set:function(t){a=t}},nodePadding:{get:function(){return s},set:function(t){s=t}},center:{get:function(){return u},set:function(t){u=t}},margin:{get:function(){return n},set:function(t){n.top=void 0!==t.top?t.top:n.top,n.right=void 0!==t.right?t.right:n.right,n.bottom=void 0!==t.bottom?t.bottom:n.bottom,n.left=void 0!==t.left?t.left:n.left}},nodeStyle:{get:function(){return{}},set:function(t){h=void 0!==t.fillColor?t.fillColor:h,g=void 0!==t.strokeColor?t.strokeColor:g,v=void 0!==t.title?t.title:v}}}),t.utils.initOptions(e),e},t.models.scatter=function(){"use strict";function e(t){var e;return e=t[0].series+":"+t[1],$[e]=$[e]||{}}function n(t){var e;e=t[0].series+":"+t[1],delete $[e]}function r(t){var n,r,i,o=e(t),a=!1;for(n=1;n<arguments.length;n+=2)r=arguments[n],i=arguments[n+1](t[0],t[1]),o[r]===i&&o.hasOwnProperty(r)||(o[r]=i,a=!0);return a}function i(e){return Q.reset(),e.each((function(e){function Z(){if(U=!1,!N)return!1;if(!0===R){st.select(".nv-point-paths").selectAll("path").remove();var n=d3.merge(e.map((function(e,n){return e.values.map((function(e,r){var i=M(e,r),o=A(e,r);return[t.utils.NaNtoZero(b(i))+1e-4*Math.random(),t.utils.NaNtoZero(k(o))+1e-4*Math.random(),n,r,e]})).filter((function(t,e){return D(t[4],e)}))})));if(0==n.length)return!1;n.length<3&&(n.push([b.range()[0]-20,k.range()[0]-20,null,null]),n.push([b.range()[1]+20,k.range()[1]+20,null,null]),n.push([b.range()[0]-20,k.range()[0]+20,null,null]),n.push([b.range()[1]+20,k.range()[1]-20,null,null]));var r=d3.geom.polygon([[-10,-10],[-10,g+10],[h+10,g+10],[h+10,-10]]),i=1e-4;n=n.sort((function(t,e){return t[0]-e[0]||t[1]-e[1]}));for(var o=0;o<n.length-1;)Math.abs(n[o][0]-n[o+1][0])<i&&Math.abs(n[o][1]-n[o+1][1])<i?n.splice(o+1,1):o++;var a=d3.geom.voronoi(n).map((function(t,e){return{data:r.clip(t),series:n[e][2],point:n[e][3]}})),s=st.select(".nv-point-paths").selectAll("path").data(a),l=s.enter().append("svg:path").attr("d",(function(t){return t&&t.data&&0!==t.data.length?"M"+t.data.join(",")+"Z":"M 0 0"})).attr("id",(function(t,e){return"nv-path-"+e})).attr("clip-path",(function(t,e){return"url(#nv-clip-"+y+"-"+e+")"}));if(P&&l.style("fill",d3.rgb(230,230,230)).style("fill-opacity",.4).style("stroke-opacity",1).style("stroke",d3.rgb(200,200,200)),B)st.select(".nv-point-clips").selectAll("*").remove(),st.select(".nv-point-clips").selectAll("clipPath").data(n).enter().append("svg:clipPath").attr("id",(function(t,e){return"nv-clip-"+y+"-"+e})).append("svg:circle").attr("cx",(function(t){return t[0]})).attr("cy",(function(t){return t[1]})).attr("r",T);var u=function(t,n,r){if(U)return 0;var i=e[n.series];if(void 0!==i){var o=i.values[n.point];o.color=v(i,n.series),o.x=M(o),o.y=A(o);var a=x.node().getBoundingClientRect(),s=window.pageYOffset||document.documentElement.scrollTop,l=window.pageXOffset||document.documentElement.scrollLeft;r({point:o,series:i,pos:{left:b(M(o,n.point))+a.left+l+p.left+10,top:k(A(o,n.point))+a.top+s+p.top+10},relativePos:[b(M(o,n.point))+p.left,k(A(o,n.point))+p.top],seriesIndex:n.series,pointIndex:n.point,event:d3.event,element:t})}};s.on("click",(function(t){u(this,t,j.elementClick)})).on("dblclick",(function(t){u(this,t,j.elementDblClick)})).on("mouseover",(function(t){u(this,t,j.elementMouseover)})).on("mouseout",(function(t,e){u(this,t,j.elementMouseout)}))}else st.select(".nv-groups").selectAll(".nv-group").selectAll(".nv-point").on("click",(function(t,n){if(U||!e[t.series])return 0;var r=e[t.series],i=r.values[n];j.elementClick({point:i,series:r,pos:[b(M(i,n))+p.left,k(A(i,n))+p.top],relativePos:[b(M(i,n))+p.left,k(A(i,n))+p.top],seriesIndex:t.series,pointIndex:n,event:d3.event,element:this})})).on("dblclick",(function(t,n){if(U||!e[t.series])return 0;var r=e[t.series],i=r.values[n];j.elementDblClick({point:i,series:r,pos:[b(M(i,n))+p.left,k(A(i,n))+p.top],relativePos:[b(M(i,n))+p.left,k(A(i,n))+p.top],seriesIndex:t.series,pointIndex:n})})).on("mouseover",(function(t,n){if(U||!e[t.series])return 0;var r=e[t.series],i=r.values[n];j.elementMouseover({point:i,series:r,pos:[b(M(i,n))+p.left,k(A(i,n))+p.top],relativePos:[b(M(i,n))+p.left,k(A(i,n))+p.top],seriesIndex:t.series,pointIndex:n,color:v(t,n)})})).on("mouseout",(function(t,n){if(U||!e[t.series])return 0;var r=e[t.series],i=r.values[n];j.elementMouseout({point:i,series:r,pos:[b(M(i,n))+p.left,k(A(i,n))+p.top],relativePos:[b(M(i,n))+p.left,k(A(i,n))+p.top],seriesIndex:t.series,pointIndex:n,color:v(t,n)})}))}x=d3.select(this);var $=t.utils.availableWidth(h,x,p),tt=t.utils.availableHeight(g,x,p);t.utils.initSVG(x),e.forEach((function(t,e){t.values.forEach((function(t){t.series=e}))}));var et="function"==typeof i.yScale().base,nt=I&&z&&Y?[]:d3.merge(e.map((function(t){return t.values.map((function(t,e){return{x:M(t,e),y:A(t,e),size:C(t,e)}}))})));if(b.domain(I||d3.extent(nt.map((function(t){return t.x})).concat(W))),O&&e[0]?b.range(V||[($*_+$)/(2*e[0].values.length),$-$*(1+_)/(2*e[0].values.length)]):b.range(V||[0,$]),et){var rt=d3.min(nt.map((function(t){return 0!==t.y?t.y:void 0})));k.clamp(!0).domain(z||d3.extent(nt.map((function(t){return 0!==t.y?t.y:.1*rt})).concat(E))).range(H||[tt,0])}else k.domain(z||d3.extent(nt.map((function(t){return t.y})).concat(E))).range(H||[tt,0]);w.domain(Y||d3.extent(nt.map((function(t){return t.size})).concat(F))).range(G||J),X=b.domain()[0]===b.domain()[1]||k.domain()[0]===k.domain()[1],b.domain()[0]===b.domain()[1]&&(b.domain()[0]?b.domain([b.domain()[0]-.01*b.domain()[0],b.domain()[1]+.01*b.domain()[1]]):b.domain([-1,1])),k.domain()[0]===k.domain()[1]&&(k.domain()[0]?k.domain([k.domain()[0]-.01*k.domain()[0],k.domain()[1]+.01*k.domain()[1]]):k.domain([-1,1])),isNaN(b.domain()[0])&&b.domain([-1,1]),isNaN(k.domain()[0])&&k.domain([-1,1]),o=o||b,a=a||k,s=s||w;var it=b(1)!==o(1)||k(1)!==a(1)||w(1)!==s(1);d=d||g;var ot=(c=c||h)!==h||d!==g,at=(l=l||[])[0]!==b.domain()[0]||l[1]!==b.domain()[1];l=b.domain(),u=u||[],at=at||u[0]!==k.domain()[0]||u[1]!==k.domain()[1],u=k.domain();var st=x.selectAll("g.nv-wrap.nv-scatter").data([e]),lt=st.enter().append("g").attr("class","nvd3 nv-wrap nv-scatter nv-chart-"+y),ut=lt.append("defs"),ct=lt.append("g"),dt=st.select("g");st.classed("nv-single-point",X),ct.append("g").attr("class","nv-groups"),ct.append("g").attr("class","nv-point-paths"),lt.append("g").attr("class","nv-point-clips"),st.attr("transform","translate("+p.left+","+p.top+")"),ut.append("clipPath").attr("id","nv-edge-clip-"+y).append("rect").attr("transform","translate( -10, -10)"),st.select("#nv-edge-clip-"+y+" rect").attr("width",$+20).attr("height",tt>0?tt+20:0),dt.attr("clip-path",L?"url(#nv-edge-clip-"+y+")":""),U=!0;var ft=st.select(".nv-groups").selectAll(".nv-group").data((function(t){return t}),(function(t){return t.key}));ft.enter().append("g").style("stroke-opacity",1e-6).style("fill-opacity",1e-6),ft.exit().remove(),ft.attr("class",(function(t,e){return(t.classed||"")+" nv-group nv-series-"+e})).classed("nv-noninteractive",!N).classed("hover",(function(t){return t.hover})),ft.watchTransition(Q,"scatter: groups").style("fill",(function(t,e){return v(t,e)})).style("stroke",(function(t,e){return t.pointBorderColor||m||v(t,e)})).style("stroke-opacity",1).style("fill-opacity",.5);var pt=ft.selectAll("path.nv-point").data((function(t){return t.values.map((function(t,e){return[t,e]})).filter((function(t,e){return D(t[0],e)}))}));if(pt.enter().append("path").attr("class",(function(t){return"nv-point nv-point-"+t[1]})).style("fill",(function(t){return t.color})).style("stroke",(function(t){return t.color})).attr("transform",(function(e){return"translate("+t.utils.NaNtoZero(o(M(e[0],e[1])))+","+t.utils.NaNtoZero(a(A(e[0],e[1])))+")"})).attr("d",t.utils.symbol().type((function(t){return S(t[0])})).size((function(t){return w(C(t[0],t[1]))}))),pt.exit().each(n).remove(),ft.exit().selectAll("path.nv-point").watchTransition(Q,"scatter exit").attr("transform",(function(e){return"translate("+t.utils.NaNtoZero(b(M(e[0],e[1])))+","+t.utils.NaNtoZero(k(A(e[0],e[1])))+")"})).remove(),pt.filter((function(t){return r(t,"x",M,"y",A)||it||ot||at})).watchTransition(Q,"scatter points").attr("transform",(function(e){return"translate("+t.utils.NaNtoZero(b(M(e[0],e[1])))+","+t.utils.NaNtoZero(k(A(e[0],e[1])))+")"})),pt.filter((function(t){return r(t,"shape",S,"size",C)||it||ot||at})).watchTransition(Q,"scatter points").attr("d",t.utils.symbol().type((function(t){return S(t[0])})).size((function(t){return w(C(t[0],t[1]))}))),K){var ht=ft.selectAll(".nv-label").data((function(t){return t.values.map((function(t,e){return[t,e]})).filter((function(t,e){return D(t[0],e)}))}));ht.enter().append("text").style("fill",(function(t,e){return t.color})).style("stroke-opacity",0).style("fill-opacity",1).attr("transform",(function(e){return"translate("+(t.utils.NaNtoZero(o(M(e[0],e[1])))+Math.sqrt(w(C(e[0],e[1]))/Math.PI)+2)+","+t.utils.NaNtoZero(a(A(e[0],e[1])))+")"})).text((function(t,e){return t[0].label})),ht.exit().remove(),ft.exit().selectAll("path.nv-label").watchTransition(Q,"scatter exit").attr("transform",(function(e){return"translate("+(t.utils.NaNtoZero(b(M(e[0],e[1])))+Math.sqrt(w(C(e[0],e[1]))/Math.PI)+2)+","+t.utils.NaNtoZero(k(A(e[0],e[1])))+")"})).remove(),ht.each((function(t){d3.select(this).classed("nv-label",!0).classed("nv-label-"+t[1],!1).classed("hover",!1)})),ht.watchTransition(Q,"scatter labels").attr("transform",(function(e){return"translate("+(t.utils.NaNtoZero(b(M(e[0],e[1])))+Math.sqrt(w(C(e[0],e[1]))/Math.PI)+2)+","+t.utils.NaNtoZero(k(A(e[0],e[1])))+")"}))}q?(clearTimeout(f),f=setTimeout(Z,q)):Z(),o=b.copy(),a=k.copy(),s=w.copy(),c=h,d=g})),Q.renderEnd("scatter immediate"),i}var o,a,s,l,u,c,d,f,p={top:0,right:0,bottom:0,left:0},h=null,g=null,v=t.utils.defaultColor(),m=null,y=Math.floor(1e5*Math.random()),x=null,b=d3.scale.linear(),k=d3.scale.linear(),w=d3.scale.linear(),M=function(t){return t.x},A=function(t){return t.y},C=function(t){return t.size||1},S=function(t){return t.shape||"circle"},W=[],E=[],F=[],N=!0,D=function(t){return!t.notActive},O=!1,_=.1,L=!1,B=!0,P=!1,T=function(){return 25},I=null,z=null,V=null,H=null,Y=null,G=null,X=!1,j=d3.dispatch("elementClick","elementDblClick","elementMouseover","elementMouseout","renderEnd"),R=!0,Z=250,q=300,K=!1,U=!1,Q=t.utils.renderWatch(j,Z),J=[16,256],$={};return i.dispatch=j,i.options=t.utils.optionsFunc.bind(i),i._calls=new function(){this.clearHighlights=function(){return t.dom.write((function(){x.selectAll(".nv-point.hover").classed("hover",!1)})),null},this.highlightPoint=function(e,n,r){t.dom.write((function(){x.select(".nv-groups").selectAll(".nv-series-"+e).selectAll(".nv-point-"+n).classed("hover",r)}))}},j.on("elementMouseover.point",(function(t){N&&i._calls.highlightPoint(t.seriesIndex,t.pointIndex,!0)})),j.on("elementMouseout.point",(function(t){N&&i._calls.highlightPoint(t.seriesIndex,t.pointIndex,!1)})),i._options=Object.create({},{width:{get:function(){return h},set:function(t){h=t}},height:{get:function(){return g},set:function(t){g=t}},xScale:{get:function(){return b},set:function(t){b=t}},yScale:{get:function(){return k},set:function(t){k=t}},pointScale:{get:function(){return w},set:function(t){w=t}},xDomain:{get:function(){return I},set:function(t){I=t}},yDomain:{get:function(){return z},set:function(t){z=t}},pointDomain:{get:function(){return Y},set:function(t){Y=t}},xRange:{get:function(){return V},set:function(t){V=t}},yRange:{get:function(){return H},set:function(t){H=t}},pointRange:{get:function(){return G},set:function(t){G=t}},forceX:{get:function(){return W},set:function(t){W=t}},forceY:{get:function(){return E},set:function(t){E=t}},forcePoint:{get:function(){return F},set:function(t){F=t}},interactive:{get:function(){return N},set:function(t){N=t}},pointActive:{get:function(){return D},set:function(t){D=t}},padDataOuter:{get:function(){return _},set:function(t){_=t}},padData:{get:function(){return O},set:function(t){O=t}},clipEdge:{get:function(){return L},set:function(t){L=t}},clipVoronoi:{get:function(){return B},set:function(t){B=t}},clipRadius:{get:function(){return T},set:function(t){T=t}},showVoronoi:{get:function(){return P},set:function(t){P=t}},id:{get:function(){return y},set:function(t){y=t}},interactiveUpdateDelay:{get:function(){return q},set:function(t){q=t}},showLabels:{get:function(){return K},set:function(t){K=t}},pointBorderColor:{get:function(){return m},set:function(t){m=t}},x:{get:function(){return M},set:function(t){M=d3.functor(t)}},y:{get:function(){return A},set:function(t){A=d3.functor(t)}},pointSize:{get:function(){return C},set:function(t){C=d3.functor(t)}},pointShape:{get:function(){return S},set:function(t){S=d3.functor(t)}},margin:{get:function(){return p},set:function(t){p.top=void 0!==t.top?t.top:p.top,p.right=void 0!==t.right?t.right:p.right,p.bottom=void 0!==t.bottom?t.bottom:p.bottom,p.left=void 0!==t.left?t.left:p.left}},duration:{get:function(){return Z},set:function(t){Z=t,Q.reset(Z)}},color:{get:function(){return v},set:function(e){v=t.utils.getColor(e)}},useVoronoi:{get:function(){return R},set:function(t){!1===(R=t)&&(B=!1)}}}),t.utils.initOptions(i),i},t.models.scatterChart=function(){"use strict";function e(S){return F.reset(),F.models(n),b&&F.models(r),k&&F.models(i),m&&F.models(a),y&&F.models(s),S.each((function(S){p=d3.select(this),t.utils.initSVG(p);var O,_=t.utils.availableWidth(d,p,u),L=t.utils.availableHeight(f,p,u);if(e.update=function(){0===W?p.call(e):p.transition().duration(W).call(e)},e.container=this,M.setter(D(S),e.update).getter(N(S)).update(),M.disabled=S.map((function(t){return!!t.disabled})),!A)for(O in A={},M)M[O]instanceof Array?A[O]=M[O].slice(0):A[O]=M[O];if(!(S&&S.length&&S.filter((function(t){return t.values.length})).length))return t.utils.noData(e,p),F.renderEnd("scatter immediate"),e;p.selectAll(".nv-noData").remove(),g=n.xScale(),v=n.yScale();var B=p.selectAll("g.nv-wrap.nv-scatterChart").data([S]),P=B.enter().append("g").attr("class","nvd3 nv-wrap nv-scatterChart nv-chart-"+n.id()).append("g"),T=B.select("g");if(P.append("rect").attr("class","nvd3 nv-background").style("pointer-events","none"),P.append("g").attr("class","nv-x nv-axis"),P.append("g").attr("class","nv-y nv-axis"),P.append("g").attr("class","nv-scatterWrap"),P.append("g").attr("class","nv-regressionLinesWrap"),P.append("g").attr("class","nv-distWrap"),P.append("g").attr("class","nv-legendWrap"),w&&T.select(".nv-y.nv-axis").attr("transform","translate("+_+",0)"),x){var I=_;o.width(I),B.select(".nv-legendWrap").datum(S).call(o),c||o.height()===u.top||(u.top=o.height(),L=t.utils.availableHeight(f,p,u)),B.select(".nv-legendWrap").attr("transform","translate(0,"+-u.top+")")}else T.select(".nv-legendWrap").selectAll("*").remove();B.attr("transform","translate("+u.left+","+u.top+")"),n.width(_).height(L).color(S.map((function(t,e){return t.color=t.color||h(t,e),t.color})).filter((function(t,e){return!S[e].disabled}))).showLabels(E),B.select(".nv-scatterWrap").datum(S.filter((function(t){return!t.disabled}))).call(n),B.select(".nv-regressionLinesWrap").attr("clip-path","url(#nv-edge-clip-"+n.id()+")");var z=B.select(".nv-regressionLinesWrap").selectAll(".nv-regLines").data((function(t){return t}));z.enter().append("g").attr("class","nv-regLines");var V=z.selectAll(".nv-regLine").data((function(t){return[t]}));V.enter().append("line").attr("class","nv-regLine").style("stroke-opacity",0),V.filter((function(t){return t.intercept&&t.slope})).watchTransition(F,"scatterPlusLineChart: regline").attr("x1",g.range()[0]).attr("x2",g.range()[1]).attr("y1",(function(t,e){return v(g.domain()[0]*t.slope+t.intercept)})).attr("y2",(function(t,e){return v(g.domain()[1]*t.slope+t.intercept)})).style("stroke",(function(t,e,n){return h(t,n)})).style("stroke-opacity",(function(t,e){return t.disabled||void 0===t.slope||void 0===t.intercept?0:1})),b&&(r.scale(g)._ticks(t.utils.calcTicksX(_/100,S)).tickSize(-L,0),T.select(".nv-x.nv-axis").attr("transform","translate(0,"+v.range()[0]+")").call(r)),k&&(i.scale(v)._ticks(t.utils.calcTicksY(L/36,S)).tickSize(-_,0),T.select(".nv-y.nv-axis").call(i)),m&&(a.getData(n.x()).scale(g).width(_).color(S.map((function(t,e){return t.color||h(t,e)})).filter((function(t,e){return!S[e].disabled}))),P.select(".nv-distWrap").append("g").attr("class","nv-distributionX"),T.select(".nv-distributionX").attr("transform","translate(0,"+v.range()[0]+")").datum(S.filter((function(t){return!t.disabled}))).call(a)),y&&(s.getData(n.y()).scale(v).width(L).color(S.map((function(t,e){return t.color||h(t,e)})).filter((function(t,e){return!S[e].disabled}))),P.select(".nv-distWrap").append("g").attr("class","nv-distributionY"),T.select(".nv-distributionY").attr("transform","translate("+(w?_:-s.size())+",0)").datum(S.filter((function(t){return!t.disabled}))).call(s)),o.dispatch.on("stateChange",(function(t){for(var n in t)M[n]=t[n];C.stateChange(M),e.update()})),C.on("changeState",(function(t){void 0!==t.disabled&&(S.forEach((function(e,n){e.disabled=t.disabled[n]})),M.disabled=t.disabled),e.update()})),n.dispatch.on("elementMouseout.tooltip",(function(t){l.hidden(!0),p.select(".nv-chart-"+n.id()+" .nv-series-"+t.seriesIndex+" .nv-distx-"+t.pointIndex).attr("y1",0),p.select(".nv-chart-"+n.id()+" .nv-series-"+t.seriesIndex+" .nv-disty-"+t.pointIndex).attr("x2",s.size())})),n.dispatch.on("elementMouseover.tooltip",(function(t){p.select(".nv-series-"+t.seriesIndex+" .nv-distx-"+t.pointIndex).attr("y1",t.relativePos[1]-L),p.select(".nv-series-"+t.seriesIndex+" .nv-disty-"+t.pointIndex).attr("x2",t.relativePos[0]+a.size()),l.data(t).hidden(!1)})),g.copy(),v.copy()})),F.renderEnd("scatter with line immediate"),e}var n=t.models.scatter(),r=t.models.axis(),i=t.models.axis(),o=t.models.legend(),a=t.models.distribution(),s=t.models.distribution(),l=t.models.tooltip(),u={top:30,right:20,bottom:50,left:75},c=null,d=null,f=null,p=null,h=t.utils.defaultColor(),g=n.xScale(),v=n.yScale(),m=!1,y=!1,x=!0,b=!0,k=!0,w=!1,M=t.utils.state(),A=null,C=d3.dispatch("stateChange","changeState","renderEnd"),S=null,W=250,E=!1;n.xScale(g).yScale(v),r.orient("bottom").tickPadding(10),i.orient(w?"right":"left").tickPadding(10),a.axis("x"),s.axis("y"),l.headerFormatter((function(t,e){return r.tickFormat()(t,e)})).valueFormatter((function(t,e){return i.tickFormat()(t,e)}));var F=t.utils.renderWatch(C,W),N=function(t){return function(){return{active:t.map((function(t){return!t.disabled}))}}},D=function(t){return function(e){void 0!==e.active&&t.forEach((function(t,n){t.disabled=!e.active[n]}))}};return e.dispatch=C,e.scatter=n,e.legend=o,e.xAxis=r,e.yAxis=i,e.distX=a,e.distY=s,e.tooltip=l,e.options=t.utils.optionsFunc.bind(e),e._options=Object.create({},{width:{get:function(){return d},set:function(t){d=t}},height:{get:function(){return f},set:function(t){f=t}},container:{get:function(){return p},set:function(t){p=t}},showDistX:{get:function(){return m},set:function(t){m=t}},showDistY:{get:function(){return y},set:function(t){y=t}},showLegend:{get:function(){return x},set:function(t){x=t}},showXAxis:{get:function(){return b},set:function(t){b=t}},showYAxis:{get:function(){return k},set:function(t){k=t}},defaultState:{get:function(){return A},set:function(t){A=t}},noData:{get:function(){return S},set:function(t){S=t}},duration:{get:function(){return W},set:function(t){W=t}},showLabels:{get:function(){return E},set:function(t){E=t}},margin:{get:function(){return u},set:function(t){void 0!==t.top&&(u.top=t.top,c=t.top),u.right=void 0!==t.right?t.right:u.right,u.bottom=void 0!==t.bottom?t.bottom:u.bottom,u.left=void 0!==t.left?t.left:u.left}},rightAlignYAxis:{get:function(){return w},set:function(t){w=t,i.orient(t?"right":"left")}},color:{get:function(){return h},set:function(e){h=t.utils.getColor(e),o.color(h),a.color(h),s.color(h)}}}),t.utils.inheritOptions(e,n),t.utils.initOptions(e),e},t.models.sparkline=function(){"use strict";function e(c){return x.reset(),c.each((function(e){var c=s-a.left-a.right,y=l-a.top-a.bottom;u=d3.select(this),t.utils.initSVG(u),d.domain(n||d3.extent(e,p)).range(i||[0,c]),f.domain(r||d3.extent(e,h)).range(o||[y,0]);var x=u.selectAll("g.nv-wrap.nv-sparkline").data([e]);x.enter().append("g").attr("class","nvd3 nv-wrap nv-sparkline").append("g"),x.select("g"),x.attr("transform","translate("+a.left+","+a.top+")");var b=x.selectAll("path").data((function(t){return[t]}));b.enter().append("path"),b.exit().remove(),b.style("stroke",(function(t,e){return t.color||g(t,e)})).attr("d",d3.svg.line().x((function(t,e){return d(p(t,e))})).y((function(t,e){return f(h(t,e))})));var k=x.selectAll("circle.nv-point").data((function(t){function e(e){if(-1!=e){var n=t[e];return n.pointIndex=e,n}return null}var n=t.map((function(t,e){return h(t,e)})),r=e(n.lastIndexOf(f.domain()[1])),i=e(n.indexOf(f.domain()[0])),o=e(n.length-1);return[v?i:null,v?r:null,m?o:null].filter((function(t){return null!=t}))}));k.enter().append("circle"),k.exit().remove(),k.attr("cx",(function(t,e){return d(p(t,t.pointIndex))})).attr("cy",(function(t,e){return f(h(t,t.pointIndex))})).attr("r",2).attr("class",(function(t,e){return p(t,t.pointIndex)==d.domain()[1]?"nv-point nv-currentValue":h(t,t.pointIndex)==f.domain()[0]?"nv-point nv-minValue":"nv-point nv-maxValue"}))})),x.renderEnd("sparkline immediate"),e}var n,r,i,o,a={top:2,right:0,bottom:2,left:0},s=400,l=32,u=null,c=!0,d=d3.scale.linear(),f=d3.scale.linear(),p=function(t){return t.x},h=function(t){return t.y},g=t.utils.getColor(["#000"]),v=!0,m=!0,y=d3.dispatch("renderEnd"),x=t.utils.renderWatch(y);return e.options=t.utils.optionsFunc.bind(e),e._options=Object.create({},{width:{get:function(){return s},set:function(t){s=t}},height:{get:function(){return l},set:function(t){l=t}},xDomain:{get:function(){return n},set:function(t){n=t}},yDomain:{get:function(){return r},set:function(t){r=t}},xRange:{get:function(){return i},set:function(t){i=t}},yRange:{get:function(){return o},set:function(t){o=t}},xScale:{get:function(){return d},set:function(t){d=t}},yScale:{get:function(){return f},set:function(t){f=t}},animate:{get:function(){return c},set:function(t){c=t}},showMinMaxPoints:{get:function(){return v},set:function(t){v=t}},showCurrentPoint:{get:function(){return m},set:function(t){m=t}},x:{get:function(){return p},set:function(t){p=d3.functor(t)}},y:{get:function(){return h},set:function(t){h=d3.functor(t)}},margin:{get:function(){return a},set:function(t){a.top=void 0!==t.top?t.top:a.top,a.right=void 0!==t.right?t.right:a.right,a.bottom=void 0!==t.bottom?t.bottom:a.bottom,a.left=void 0!==t.left?t.left:a.left}},color:{get:function(){return g},set:function(e){g=t.utils.getColor(e)}}}),e.dispatch=y,t.utils.initOptions(e),e},t.models.sparklinePlus=function(){"use strict";function e(g){return m.reset(),m.models(i),g.each((function(g){function v(){if(!u){var t=M.selectAll(".nv-hoverValue").data(l),e=t.enter().append("g").attr("class","nv-hoverValue").style("stroke-opacity",0).style("fill-opacity",0);t.exit().transition().duration(250).style("stroke-opacity",0).style("fill-opacity",0).remove(),t.attr("transform",(function(t){return"translate("+n(i.x()(g[t],t))+",0)"})).transition().duration(250).style("stroke-opacity",1).style("fill-opacity",1),l.length&&(e.append("line").attr("x1",0).attr("y1",-o.top).attr("x2",0).attr("y2",x),e.append("text").attr("class","nv-xValue").attr("x",-6).attr("y",-o.top).attr("text-anchor","end").attr("dy",".9em"),M.select(".nv-hoverValue .nv-xValue").text(c(i.x()(g[l[0]],l[0]))),e.append("text").attr("class","nv-yValue").attr("x",6).attr("y",-o.top).attr("text-anchor","start").attr("dy",".9em"),M.select(".nv-hoverValue .nv-yValue").text(d(i.y()(g[l[0]],l[0]))))}}var m=d3.select(this);t.utils.initSVG(m);var y=t.utils.availableWidth(a,m,o),x=t.utils.availableHeight(s,m,o);if(e.update=function(){m.call(e)},e.container=this,!g||!g.length)return t.utils.noData(e,m),e;m.selectAll(".nv-noData").remove();var b=i.y()(g[g.length-1],g.length-1);n=i.xScale(),r=i.yScale();var k=m.selectAll("g.nv-wrap.nv-sparklineplus").data([g]),w=k.enter().append("g").attr("class","nvd3 nv-wrap nv-sparklineplus").append("g"),M=k.select("g");w.append("g").attr("class","nv-sparklineWrap"),w.append("g").attr("class","nv-valueWrap"),w.append("g").attr("class","nv-hoverArea"),k.attr("transform","translate("+o.left+","+o.top+")");var A=M.select(".nv-sparklineWrap");if(i.width(y).height(x),A.call(i),f){var C=M.select(".nv-valueWrap").selectAll(".nv-currentValue").data([b]);C.enter().append("text").attr("class","nv-currentValue").attr("dx",h?-8:8).attr("dy",".9em").style("text-anchor",h?"end":"start"),C.attr("x",y+(h?o.right:0)).attr("y",p?function(t){return r(t)}:0).style("fill",i.color()(g[g.length-1],g.length-1)).text(d(b))}w.select(".nv-hoverArea").append("rect").on("mousemove",(function(){if(!u){var t=d3.mouse(this)[0]-o.left;l=[function(t,e){for(var n=Math.abs(i.x()(t[0],0)-e),r=0,o=0;o<t.length;o++)Math.abs(i.x()(t[o],o)-e)<n&&(n=Math.abs(i.x()(t[o],o)-e),r=o);return r}(g,Math.round(n.invert(t)))],v()}})).on("click",(function(){u=!u})).on("mouseout",(function(){l=[],v()})),M.select(".nv-hoverArea rect").attr("transform",(function(t){return"translate("+-o.left+","+-o.top+")"})).attr("width",y+o.left+o.right).attr("height",x+o.top)})),m.renderEnd("sparklinePlus immediate"),e}var n,r,i=t.models.sparkline(),o={top:15,right:100,bottom:10,left:50},a=null,s=null,l=[],u=!1,c=d3.format(",r"),d=d3.format(",.2f"),f=!0,p=!0,h=!1,g=null,v=d3.dispatch("renderEnd"),m=t.utils.renderWatch(v);return e.dispatch=v,e.sparkline=i,e.options=t.utils.optionsFunc.bind(e),e._options=Object.create({},{width:{get:function(){return a},set:function(t){a=t}},height:{get:function(){return s},set:function(t){s=t}},xTickFormat:{get:function(){return c},set:function(t){c=t}},yTickFormat:{get:function(){return d},set:function(t){d=t}},showLastValue:{get:function(){return f},set:function(t){f=t}},alignValue:{get:function(){return p},set:function(t){p=t}},rightAlignValue:{get:function(){return h},set:function(t){h=t}},noData:{get:function(){return g},set:function(t){g=t}},margin:{get:function(){return o},set:function(t){o.top=void 0!==t.top?t.top:o.top,o.right=void 0!==t.right?t.right:o.right,o.bottom=void 0!==t.bottom?t.bottom:o.bottom,o.left=void 0!==t.left?t.left:o.left}}}),t.utils.inheritOptions(e,i),t.utils.initOptions(e),e},t.models.stackedArea=function(){"use strict";function e(p){return k.reset(),k.models(y),p.each((function(p){var x=o-i.left-i.right,w=a-i.top-i.bottom;u=d3.select(this),t.utils.initSVG(u),n=y.xScale(),r=y.yScale();var M=p;p.forEach((function(t,e){t.seriesIndex=e,t.values=t.values.map((function(t,n){return t.index=n,t.seriesIndex=e,t}))}));var A=p.filter((function(t){return!t.disabled}));p=d3.layout.stack().order(g).offset(h).values((function(t){return t.values})).x(c).y(d).out((function(t,e,n){t.display={y:n,y0:e}}))(A);var C=u.selectAll("g.nv-wrap.nv-stackedarea").data([p]),S=C.enter().append("g").attr("class","nvd3 nv-wrap nv-stackedarea"),W=S.append("defs"),E=S.append("g"),F=C.select("g");E.append("g").attr("class","nv-areaWrap"),E.append("g").attr("class","nv-scatterWrap"),C.attr("transform","translate("+i.left+","+i.top+")"),0==y.forceY().length&&y.forceY().push(0),y.width(x).height(w).x(c).y((function(t){return void 0!==t.display?t.display.y+t.display.y0:void 0})).color(p.map((function(t,e){return t.color=t.color||s(t,t.seriesIndex),t.color}))),F.select(".nv-scatterWrap").datum(p).call(y),W.append("clipPath").attr("id","nv-edge-clip-"+l).append("rect"),C.select("#nv-edge-clip-"+l+" rect").attr("width",x).attr("height",w),F.attr("clip-path",m?"url(#nv-edge-clip-"+l+")":"");var N=d3.svg.area().defined(f).x((function(t,e){return n(c(t,e))})).y0((function(t){return r(t.display.y0)})).y1((function(t){return r(t.display.y+t.display.y0)})).interpolate(v),D=d3.svg.area().defined(f).x((function(t,e){return n(c(t,e))})).y0((function(t){return r(t.display.y0)})).y1((function(t){return r(t.display.y0)})),O=F.select(".nv-areaWrap").selectAll("path.nv-area").data((function(t){return t}));O.enter().append("path").attr("class",(function(t,e){return"nv-area nv-area-"+e})).attr("d",(function(t,e){return D(t.values,t.seriesIndex)})).on("mouseover",(function(t,e){d3.select(this).classed("hover",!0),b.areaMouseover({point:t,series:t.key,pos:[d3.event.pageX,d3.event.pageY],seriesIndex:t.seriesIndex})})).on("mouseout",(function(t,e){d3.select(this).classed("hover",!1),b.areaMouseout({point:t,series:t.key,pos:[d3.event.pageX,d3.event.pageY],seriesIndex:t.seriesIndex})})).on("click",(function(t,e){d3.select(this).classed("hover",!1),b.areaClick({point:t,series:t.key,pos:[d3.event.pageX,d3.event.pageY],seriesIndex:t.seriesIndex})})),O.exit().remove(),O.style("fill",(function(t,e){return t.color||s(t,t.seriesIndex)})).style("stroke",(function(t,e){return t.color||s(t,t.seriesIndex)})),O.watchTransition(k,"stackedArea path").attr("d",(function(t,e){return N(t.values,e)})),y.dispatch.on("elementMouseover.area",(function(t){F.select(".nv-chart-"+l+" .nv-area-"+t.seriesIndex).classed("hover",!0)})),y.dispatch.on("elementMouseout.area",(function(t){F.select(".nv-chart-"+l+" .nv-area-"+t.seriesIndex).classed("hover",!1)})),e.d3_stackedOffset_stackPercent=function(t){var e,n,r,i=t.length,o=t[0].length,a=[];for(n=0;o>n;++n){for(e=0,r=0;e<M.length;e++)r+=d(M[e].values[n]);if(r)for(e=0;i>e;e++)t[e][n][1]/=r;else for(e=0;i>e;e++)t[e][n][1]=0}for(n=0;o>n;++n)a[n]=0;return a}})),k.renderEnd("stackedArea immediate"),e}var n,r,i={top:0,right:0,bottom:0,left:0},o=960,a=500,s=t.utils.defaultColor(),l=Math.floor(1e5*Math.random()),u=null,c=function(t){return t.x},d=function(t){return t.y},f=function(t,e){return!isNaN(d(t,e))&&null!==d(t,e)},p="stack",h="zero",g="default",v="linear",m=!1,y=t.models.scatter(),x=250,b=d3.dispatch("areaClick","areaMouseover","areaMouseout","renderEnd","elementClick","elementMouseover","elementMouseout");y.pointSize(2.2).pointDomain([2.2,2.2]);var k=t.utils.renderWatch(b,x);return e.dispatch=b,e.scatter=y,y.dispatch.on("elementClick",(function(){b.elementClick.apply(this,arguments)})),y.dispatch.on("elementMouseover",(function(){b.elementMouseover.apply(this,arguments)})),y.dispatch.on("elementMouseout",(function(){b.elementMouseout.apply(this,arguments)})),e.interpolate=function(t){return arguments.length?(v=t,e):v},e.duration=function(t){return arguments.length?(x=t,k.reset(x),y.duration(x),e):x},e.dispatch=b,e.scatter=y,e.options=t.utils.optionsFunc.bind(e),e._options=Object.create({},{width:{get:function(){return o},set:function(t){o=t}},height:{get:function(){return a},set:function(t){a=t}},defined:{get:function(){return f},set:function(t){f=t}},clipEdge:{get:function(){return m},set:function(t){m=t}},offset:{get:function(){return h},set:function(t){h=t}},order:{get:function(){return g},set:function(t){g=t}},interpolate:{get:function(){return v},set:function(t){v=t}},x:{get:function(){return c},set:function(t){c=d3.functor(t)}},y:{get:function(){return d},set:function(t){d=d3.functor(t)}},margin:{get:function(){return i},set:function(t){i.top=void 0!==t.top?t.top:i.top,i.right=void 0!==t.right?t.right:i.right,i.bottom=void 0!==t.bottom?t.bottom:i.bottom,i.left=void 0!==t.left?t.left:i.left}},color:{get:function(){return s},set:function(e){s=t.utils.getColor(e)}},style:{get:function(){return p},set:function(t){switch(p=t){case"stack":e.offset("zero"),e.order("default");break;case"stream":e.offset("wiggle"),e.order("inside-out");break;case"stream-center":e.offset("silhouette"),e.order("inside-out");break;case"expand":e.offset("expand"),e.order("default");break;case"stack_percent":e.offset(e.d3_stackedOffset_stackPercent),e.order("default")}}},duration:{get:function(){return x},set:function(t){x=t,k.reset(x),y.duration(x)}}}),t.utils.inheritOptions(e,y),t.utils.initOptions(e),e},t.models.stackedAreaChart=function(){"use strict";function e(c){return T.reset(),T.models(i),b&&T.models(o),k&&T.models(a),c.each((function(c){function F(){b&&q.select(".nv-focus .nv-x.nv-axis").attr("transform","translate(0,"+j+")").transition().duration(L).call(o)}function T(){if(k){if("expand"===i.style()||"stack_percent"===i.style()){var t=a.tickFormat();B&&t===V||(B=t),a.tickFormat(V)}else B&&(a.tickFormat(B),B=null);q.select(".nv-focus .nv-y.nv-axis").transition().duration(0).call(a)}}function H(t){var e=q.select(".nv-focus .nv-stackedWrap").datum(c.filter((function(t){return!t.disabled})).map((function(e,n){return{key:e.key,area:e.area,classed:e.classed,values:e.values.filter((function(e,n){return i.x()(e,n)>=t[0]&&i.x()(e,n)<=t[1]})),disableTooltip:e.disableTooltip}})));e.transition().duration(L).call(i),F(),T()}var Y=d3.select(this);t.utils.initSVG(Y);var G,X=t.utils.availableWidth(h,Y,f),j=t.utils.availableHeight(g,Y,f)-(M?d.height():0);if(e.update=function(){Y.transition().duration(L).call(e)},e.container=this,W.setter(z(c),e.update).getter(I(c)).update(),W.disabled=c.map((function(t){return!!t.disabled})),!E)for(G in E={},W)W[G]instanceof Array?E[G]=W[G].slice(0):E[G]=W[G];if(!(c&&c.length&&c.filter((function(t){return t.values.length})).length))return t.utils.noData(e,Y),e;Y.selectAll(".nv-noData").remove(),n=i.xScale(),r=i.yScale();var R=Y.selectAll("g.nv-wrap.nv-stackedAreaChart").data([c]),Z=R.enter().append("g").attr("class","nvd3 nv-wrap nv-stackedAreaChart").append("g"),q=R.select("g");Z.append("g").attr("class","nv-legendWrap"),Z.append("g").attr("class","nv-controlsWrap");var K=Z.append("g").attr("class","nv-focus");if(K.append("g").attr("class","nv-background").append("rect"),K.append("g").attr("class","nv-x nv-axis"),K.append("g").attr("class","nv-y nv-axis"),K.append("g").attr("class","nv-stackedWrap"),K.append("g").attr("class","nv-interactive"),Z.append("g").attr("class","nv-focusWrap"),y){var U=m&&"top"===x?X-D:X;if(s.width(U),q.select(".nv-legendWrap").datum(c).call(s),"bottom"===x){var Q=10+(b?12:0);f.bottom=Math.max(s.height()+Q,f.bottom);var J=(j=t.utils.availableHeight(g,Y,f)-(M?d.height():0))+Q;q.select(".nv-legendWrap").attr("transform","translate(0,"+J+")")}else"top"===x&&(p||f.top==s.height()||(f.top=s.height(),j=t.utils.availableHeight(g,Y,f)-(M?d.height():0)),q.select(".nv-legendWrap").attr("transform","translate("+(X-U)+","+-f.top+")"))}else q.select(".nv-legendWrap").selectAll("*").remove();if(m){var $=[{key:_.stacked||"Stacked",metaKey:"Stacked",disabled:"stack"!=i.style(),style:"stack"},{key:_.stream||"Stream",metaKey:"Stream",disabled:"stream"!=i.style(),style:"stream"},{key:_.expanded||"Expanded",metaKey:"Expanded",disabled:"expand"!=i.style(),style:"expand"},{key:_.stack_percent||"Stack %",metaKey:"Stack_Percent",disabled:"stack_percent"!=i.style(),style:"stack_percent"}];D=O.length/3*260,$=$.filter((function(t){return-1!==O.indexOf(t.metaKey)})),l.width(D).color(["#444","#444","#444"]),q.select(".nv-controlsWrap").datum($).call(l);var tt=Math.max(l.height(),y&&"top"===x?s.height():0);f.top!=tt&&(f.top=tt,j=t.utils.availableHeight(g,Y,f)-(M?d.height():0)),q.select(".nv-controlsWrap").attr("transform","translate(0,"+-f.top+")")}else q.select(".nv-controlsWrap").selectAll("*").remove();R.attr("transform","translate("+f.left+","+f.top+")"),w&&q.select(".nv-y.nv-axis").attr("transform","translate("+X+",0)"),A&&(u.width(X).height(j).margin({left:f.left,top:f.top}).svgContainer(Y).xScale(n),R.select(".nv-interactive").call(u)),q.select(".nv-focus .nv-background rect").attr("width",X).attr("height",j),i.width(X).height(j).color(c.map((function(t,e){return t.color||v(t,e)})).filter((function(t,e){return!c[e].disabled})));var et,nt=q.select(".nv-focus .nv-stackedWrap").datum(c.filter((function(t){return!t.disabled})));(b&&o.scale(n)._ticks(t.utils.calcTicksX(X/100,c)).tickSize(-j,0),k)&&(et="wiggle"===i.offset()?0:t.utils.calcTicksY(j/36,c),a.scale(r)._ticks(et).tickSize(-X,0));if(M){d.width(X),q.select(".nv-focusWrap").attr("transform","translate(0,"+(j+f.bottom+d.margin().top)+")").datum(c.filter((function(t){return!t.disabled}))).call(d);var rt=d.brush.empty()?d.xDomain():d.brush.extent();null!==rt&&H(rt)}else nt.transition().call(i),F(),T();i.dispatch.on("areaClick.toggle",(function(t){1===c.filter((function(t){return!t.disabled})).length?c.forEach((function(t){t.disabled=!1})):c.forEach((function(e,n){e.disabled=n!=t.seriesIndex})),W.disabled=c.map((function(t){return!!t.disabled})),N.stateChange(W),e.update()})),s.dispatch.on("stateChange",(function(t){for(var n in t)W[n]=t[n];N.stateChange(W),e.update()})),l.dispatch.on("legendClick",(function(t,n){t.disabled&&($=$.map((function(t){return t.disabled=!0,t})),t.disabled=!1,i.style(t.style),W.style=i.style(),N.stateChange(W),e.update())})),u.dispatch.on("elementMousemove",(function(n){i.clearHighlights();var r,o,a,s=[],l=0,d=!0,f=!1;if(c.filter((function(t,e){return t.seriesIndex=e,!t.disabled})).forEach((function(u,p){o=t.interactiveBisect(u.values,n.pointXValue,e.x());var h=u.values[o],g=e.y()(h,o);if(null!=g&&g>0&&(i.highlightPoint(p,o,!0),f=!0),p!==c.length-1||f||i.highlightPoint(p,o,!0),void 0!==h){void 0===r&&(r=h),void 0===a&&(a=e.xScale()(e.x()(h,o)));var m="expand"==i.style()?h.display.y:e.y()(h,o);s.push({key:u.key,value:m,color:v(u,u.seriesIndex),point:h}),C&&"expand"!=i.style()&&null!=m&&(l+=m,d=!1)}})),s.reverse(),s.length>2){var p=e.yScale().invert(n.mouseY),h=null;s.forEach((function(t,e){p=Math.abs(p);var n=Math.abs(t.point.display.y0),r=Math.abs(t.point.display.y);return p>=n&&r+n>=p?void(h=e):void 0})),null!=h&&(s[h].highlight=!0)}C&&"expand"!=i.style()&&s.length>=2&&!d&&s.push({key:S,value:l,total:!0});var g=e.x()(r,o),m=u.tooltip.valueFormatter();"expand"===i.style()||"stack_percent"===i.style()?(P||(P=m),m=d3.format(".1%")):P&&(m=P,P=null),u.tooltip.valueFormatter(m).data({value:g,series:s})(),u.renderGuideLine(a)})),u.dispatch.on("elementMouseout",(function(t){i.clearHighlights()})),d.dispatch.on("onBrush",(function(t){H(t)})),N.on("changeState",(function(t){void 0!==t.disabled&&c.length===t.disabled.length&&(c.forEach((function(e,n){e.disabled=t.disabled[n]})),W.disabled=t.disabled),void 0!==t.style&&(i.style(t.style),t.style),e.update()}))})),T.renderEnd("stacked Area chart immediate"),e}var n,r,i=t.models.stackedArea(),o=t.models.axis(),a=t.models.axis(),s=t.models.legend(),l=t.models.legend(),u=t.interactiveGuideline(),c=t.models.tooltip(),d=t.models.focus(t.models.stackedArea()),f={top:10,right:25,bottom:50,left:60},p=null,h=null,g=null,v=t.utils.defaultColor(),m=!0,y=!0,x="top",b=!0,k=!0,w=!1,M=!1,A=!1,C=!0,S="TOTAL",W=t.utils.state(),E=null,F=null,N=d3.dispatch("stateChange","changeState","renderEnd"),D=250,O=["Stacked","Stream","Expanded"],_={},L=250;W.style=i.style(),o.orient("bottom").tickPadding(7),a.orient(w?"right":"left"),c.headerFormatter((function(t,e){return o.tickFormat()(t,e)})).valueFormatter((function(t,e){return a.tickFormat()(t,e)})),u.tooltip.headerFormatter((function(t,e){return o.tickFormat()(t,e)})).valueFormatter((function(t,e){return null==t?"N/A":a.tickFormat()(t,e)}));var B=null,P=null;l.updateState(!1);var T=t.utils.renderWatch(N),I=(i.style(),function(t){return function(){return{active:t.map((function(t){return!t.disabled})),style:i.style()}}}),z=function(t){return function(e){void 0!==e.style&&e.style,void 0!==e.active&&t.forEach((function(t,n){t.disabled=!e.active[n]}))}},V=d3.format("%");return i.dispatch.on("elementMouseover.tooltip",(function(t){t.point.x=i.x()(t.point),t.point.y=i.y()(t.point),c.data(t).hidden(!1)})),i.dispatch.on("elementMouseout.tooltip",(function(t){c.hidden(!0)})),e.dispatch=N,e.stacked=i,e.legend=s,e.controls=l,e.xAxis=o,e.x2Axis=d.xAxis,e.yAxis=a,e.y2Axis=d.yAxis,e.interactiveLayer=u,e.tooltip=c,e.focus=d,e.dispatch=N,e.options=t.utils.optionsFunc.bind(e),e._options=Object.create({},{width:{get:function(){return h},set:function(t){h=t}},height:{get:function(){return g},set:function(t){g=t}},showLegend:{get:function(){return y},set:function(t){y=t}},legendPosition:{get:function(){return x},set:function(t){x=t}},showXAxis:{get:function(){return b},set:function(t){b=t}},showYAxis:{get:function(){return k},set:function(t){k=t}},defaultState:{get:function(){return E},set:function(t){E=t}},noData:{get:function(){return F},set:function(t){F=t}},showControls:{get:function(){return m},set:function(t){m=t}},controlLabels:{get:function(){return _},set:function(t){_=t}},controlOptions:{get:function(){return O},set:function(t){O=t}},showTotalInTooltip:{get:function(){return C},set:function(t){C=t}},totalLabel:{get:function(){return S},set:function(t){S=t}},focusEnable:{get:function(){return M},set:function(t){M=t}},focusHeight:{get:function(){return d.height()},set:function(t){d.height(t)}},brushExtent:{get:function(){return d.brushExtent()},set:function(t){d.brushExtent(t)}},margin:{get:function(){return f},set:function(t){void 0!==t.top&&(f.top=t.top,p=t.top),f.right=void 0!==t.right?t.right:f.right,f.bottom=void 0!==t.bottom?t.bottom:f.bottom,f.left=void 0!==t.left?t.left:f.left}},focusMargin:{get:function(){return d.margin},set:function(t){d.margin.top=void 0!==t.top?t.top:d.margin.top,d.margin.right=void 0!==t.right?t.right:d.margin.right,d.margin.bottom=void 0!==t.bottom?t.bottom:d.margin.bottom,d.margin.left=void 0!==t.left?t.left:d.margin.left}},duration:{get:function(){return L},set:function(t){L=t,T.reset(L),i.duration(L),o.duration(L),a.duration(L)}},color:{get:function(){return v},set:function(e){v=t.utils.getColor(e),s.color(v),i.color(v),d.color(v)}},x:{get:function(){return i.x()},set:function(t){i.x(t),d.x(t)}},y:{get:function(){return i.y()},set:function(t){i.y(t),d.y(t)}},rightAlignYAxis:{get:function(){return w},set:function(t){w=t,a.orient(w?"right":"left")}},useInteractiveGuideline:{get:function(){return A},set:function(t){A=!!t,e.interactive(!t),e.useVoronoi(!t),i.scatter.interactive(!t)}}}),t.utils.inheritOptions(e,i),t.utils.initOptions(e),e},t.models.stackedAreaWithFocusChart=function(){return t.models.stackedAreaChart().margin({bottom:30}).focusEnable(!0)},t.models.sunburst=function(){"use strict";function e(t){return n(t)>90?180:0}function n(t){return(Math.max(0,Math.min(2*Math.PI,N(t.x)))+Math.max(0,Math.min(2*Math.PI,N(t.x+t.dx))))/2*(180/Math.PI)-90}function r(t){var e=Math.max(0,Math.min(2*Math.PI,N(t.x)));return(Math.max(0,Math.min(2*Math.PI,N(t.x+t.dx)))-e)/(2*Math.PI)}function i(t){var e=Math.max(0,Math.min(2*Math.PI,N(t.x)));return Math.max(0,Math.min(2*Math.PI,N(t.x+t.dx)))-e>A}function o(t,e){var n=d3.interpolate(N.domain(),[c.x,c.x+c.dx]),r=d3.interpolate(D.domain(),[c.y,1]),i=d3.interpolate(D.range(),[c.y?20:0,p]);return 0===e?function(){return L(t)}:function(e){return N.domain(n(e)),D.domain(r(e)).range(i(e)),L(t)}}function a(t){var e=d3.interpolate({x:t.x0,dx:t.dx0,y:t.y0,dy:t.dy0},t);return function(n){var r=e(n);return t.x0=r.x,t.dx0=r.dx,t.y0=r.y,t.dy0=r.dy,L(r)}}function s(t){t.forEach((function(t){var e=S(t),n=_[e];n?(t.dx0=n.dx,t.x0=n.x,t.dy0=n.dy,t.y0=n.y):(t.dx0=t.dx,t.x0=t.x,t.dy0=t.dy,t.y0=t.y),function(t){var e=S(t);_[e]||(_[e]={});var n=_[e];n.dx=t.dx,n.x=t.x,n.dy=t.dy,n.y=t.y}(t)}))}function l(t){var r=b.selectAll("text"),a=b.selectAll("path");r.transition().attr("opacity",0),c=t,a.transition().duration(E).attrTween("d",o).each("end",(function(r){r.x>=t.x&&r.x<t.x+t.dx&&r.depth>=t.depth&&d3.select(this.parentNode).select("text").transition().duration(E).text((function(t){return M(t)})).attr("opacity",(function(t){return i(t)?1:0})).attr("transform",(function(){var i=this.getBBox().width;if(0===r.depth)return"translate("+i/2*-1+",0)";if(r.depth===t.depth)return"translate("+(D(r.y)+5)+",0)";var o=n(r),a=e(r);return 0===a?"rotate("+o+")translate("+(D(r.y)+5)+",0)":"rotate("+o+")translate("+(D(r.y)+i+5)+",0)rotate("+a+")"}))}))}function u(o){return B.reset(),o.each((function(o){b=d3.select(this),d=t.utils.availableWidth(g,b,h),f=t.utils.availableHeight(v,b,h),p=Math.min(d,f)/2,D.range([0,p]);var u=b.select("g.nvd3.nv-wrap.nv-sunburst");u[0][0]?u.attr("transform","translate("+(d/2+h.left+h.right)+","+(f/2+h.top+h.bottom)+")"):u=b.append("g").attr("class","nvd3 nv-wrap nv-sunburst nv-chart-"+x).attr("transform","translate("+(d/2+h.left+h.right)+","+(f/2+h.top+h.bottom)+")"),b.on("click",(function(t,e){F.chartClick({data:t,index:e,pos:d3.event,id:x})})),O.value(y[m]||y.count);var c=O.nodes(o[0]).reverse();s(c);var A=u.selectAll(".arc-container").data(c,S);A.enter().append("g").attr("class","arc-container").append("path").attr("d",L).style("fill",(function(t){return t.color?t.color:k(W?(t.children?t:t.parent).name:t.name)})).style("stroke","#FFF").on("click",(function(t,e){l(t),F.elementClick({data:t,index:e})})).on("mouseover",(function(t,e){d3.select(this).classed("hover",!0).style("opacity",.8),F.elementMouseover({data:t,color:d3.select(this).style("fill"),percent:r(t)})})).on("mouseout",(function(t,e){d3.select(this).classed("hover",!1).style("opacity",1),F.elementMouseout({data:t})})).on("mousemove",(function(t,e){F.elementMousemove({data:t})})),A.each((function(t){d3.select(this).select("path").transition().duration(E).attrTween("d",a)})),w&&(A.selectAll("text").remove(),A.append("text").text((function(t){return M(t)})).transition().duration(E).attr("opacity",(function(t){return i(t)?1:0})).attr("transform",(function(t){var r=this.getBBox().width;if(0===t.depth)return"rotate(0)translate("+r/2*-1+",0)";var i=n(t),o=e(t);return 0===o?"rotate("+i+")translate("+(D(t.y)+5)+",0)":"rotate("+i+")translate("+(D(t.y)+r+5)+",0)rotate("+o+")"}))),l(c[c.length-1]),A.exit().transition().duration(E).attr("opacity",0).each("end",(function(t){var e=S(t);_[e]=void 0})).remove()})),B.renderEnd("sunburst immediate"),u}var c,d,f,p,h={top:0,right:0,bottom:0,left:0},g=600,v=600,m="count",y={count:function(t){return 1},value:function(t){return t.value||t.size},size:function(t){return t.value||t.size}},x=Math.floor(1e4*Math.random()),b=null,k=t.utils.defaultColor(),w=!1,M=function(t){return"count"===m?t.name+" #"+t.value:t.name+" "+(t.value||t.size)},A=.02,C=function(t,e){return t.name>e.name},S=function(t,e){return void 0!==t.parent?t.name+"-"+t.parent.name+"-"+e:t.name},W=!0,E=500,F=d3.dispatch("chartClick","elementClick","elementDblClick","elementMousemove","elementMouseover","elementMouseout","renderEnd"),N=d3.scale.linear().range([0,2*Math.PI]),D=d3.scale.sqrt(),O=d3.layout.partition().sort(C),_={},L=d3.svg.arc().startAngle((function(t){return Math.max(0,Math.min(2*Math.PI,N(t.x)))})).endAngle((function(t){return Math.max(0,Math.min(2*Math.PI,N(t.x+t.dx)))})).innerRadius((function(t){return Math.max(0,D(t.y))})).outerRadius((function(t){return Math.max(0,D(t.y+t.dy))})),B=t.utils.renderWatch(F);return u.dispatch=F,u.options=t.utils.optionsFunc.bind(u),u._options=Object.create({},{width:{get:function(){return g},set:function(t){g=t}},height:{get:function(){return v},set:function(t){v=t}},mode:{get:function(){return m},set:function(t){m=t}},id:{get:function(){return x},set:function(t){x=t}},duration:{get:function(){return E},set:function(t){E=t}},groupColorByParent:{get:function(){return W},set:function(t){W=!!t}},showLabels:{get:function(){return w},set:function(t){w=!!t}},labelFormat:{get:function(){return M},set:function(t){M=t}},labelThreshold:{get:function(){return A},set:function(t){A=t}},sort:{get:function(){return C},set:function(t){C=t}},key:{get:function(){return S},set:function(t){S=t}},margin:{get:function(){return h},set:function(t){h.top=null!=t.top?t.top:h.top,h.right=null!=t.right?t.right:h.right,h.bottom=null!=t.bottom?t.bottom:h.bottom,h.left=null!=t.left?t.left:h.left}},color:{get:function(){return k},set:function(e){k=t.utils.getColor(e)}}}),t.utils.initOptions(u),u},t.models.sunburstChart=function(){"use strict";function e(r){return p.reset(),p.models(n),r.each((function(r){var s=d3.select(this);t.utils.initSVG(s);var l=t.utils.availableWidth(o,s,i),u=t.utils.availableHeight(a,s,i);return e.update=function(){0===d?s.call(e):s.transition().duration(d).call(e)},e.container=s,r&&r.length?(s.selectAll(".nv-noData").remove(),n.width(l).height(u).margin(i),void s.call(n)):(t.utils.noData(e,s),e)})),p.renderEnd("sunburstChart immediate"),e}var n=t.models.sunburst(),r=t.models.tooltip(),i={top:30,right:20,bottom:20,left:20},o=null,a=null,s=t.utils.defaultColor(),l=!1,u=(Math.round(1e5*Math.random()),null),c=null,d=250,f=d3.dispatch("stateChange","changeState","renderEnd"),p=t.utils.renderWatch(f);return r.duration(0).headerEnabled(!1).valueFormatter((function(t){return t})),n.dispatch.on("elementMouseover.tooltip",(function(t){t.series={key:t.data.name,value:t.data.value||t.data.size,color:t.color,percent:t.percent},l||(delete t.percent,delete t.series.percent),r.data(t).hidden(!1)})),n.dispatch.on("elementMouseout.tooltip",(function(t){r.hidden(!0)})),n.dispatch.on("elementMousemove.tooltip",(function(t){r()})),e.dispatch=f,e.sunburst=n,e.tooltip=r,e.options=t.utils.optionsFunc.bind(e),e._options=Object.create({},{noData:{get:function(){return c},set:function(t){c=t}},defaultState:{get:function(){return u},set:function(t){u=t}},showTooltipPercent:{get:function(){return l},set:function(t){l=t}},color:{get:function(){return s},set:function(t){s=t,n.color(s)}},duration:{get:function(){return d},set:function(t){d=t,p.reset(d),n.duration(d)}},margin:{get:function(){return i},set:function(t){i.top=void 0!==t.top?t.top:i.top,i.right=void 0!==t.right?t.right:i.right,i.bottom=void 0!==t.bottom?t.bottom:i.bottom,i.left=void 0!==t.left?t.left:i.left,n.margin(i)}}}),t.utils.inheritOptions(e,n),t.utils.initOptions(e),e},t.version="1.8.6"}();